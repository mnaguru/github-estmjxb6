var Km=t=>{throw TypeError(t)};var lh=(t,e,n)=>e.has(t)||Km("Cannot "+n);var M=(t,e,n)=>(lh(t,e,"read from private field"),n?n.call(t):e.get(t)),ce=(t,e,n)=>e.has(t)?Km("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),se=(t,e,n,r)=>(lh(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),Ke=(t,e,n)=>(lh(t,e,"access private method"),n);var Tl=(t,e,n,r)=>({set _(i){se(t,e,i,n)},get _(){return M(t,e,r)}});(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function cI(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Qv={exports:{}},uc={},Hv={exports:{}},le={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ka=Symbol.for("react.element"),hI=Symbol.for("react.portal"),dI=Symbol.for("react.fragment"),fI=Symbol.for("react.strict_mode"),pI=Symbol.for("react.profiler"),mI=Symbol.for("react.provider"),gI=Symbol.for("react.context"),yI=Symbol.for("react.forward_ref"),vI=Symbol.for("react.suspense"),_I=Symbol.for("react.memo"),wI=Symbol.for("react.lazy"),Gm=Symbol.iterator;function EI(t){return t===null||typeof t!="object"?null:(t=Gm&&t[Gm]||t["@@iterator"],typeof t=="function"?t:null)}var Wv={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Yv=Object.assign,Xv={};function lo(t,e,n){this.props=t,this.context=e,this.refs=Xv,this.updater=n||Wv}lo.prototype.isReactComponent={};lo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};lo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Jv(){}Jv.prototype=lo.prototype;function pf(t,e,n){this.props=t,this.context=e,this.refs=Xv,this.updater=n||Wv}var mf=pf.prototype=new Jv;mf.constructor=pf;Yv(mf,lo.prototype);mf.isPureReactComponent=!0;var Qm=Array.isArray,Zv=Object.prototype.hasOwnProperty,gf={current:null},e0={key:!0,ref:!0,__self:!0,__source:!0};function t0(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)Zv.call(e,r)&&!e0.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var u=Array(l),h=0;h<l;h++)u[h]=arguments[h+2];i.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:Ka,type:t,key:s,ref:o,props:i,_owner:gf.current}}function II(t,e){return{$$typeof:Ka,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function yf(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ka}function TI(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Hm=/\/+/g;function uh(t,e){return typeof t=="object"&&t!==null&&t.key!=null?TI(""+t.key):e.toString(36)}function Wl(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Ka:case hI:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+uh(o,0):r,Qm(i)?(n="",t!=null&&(n=t.replace(Hm,"$&/")+"/"),Wl(i,e,n,"",function(h){return h})):i!=null&&(yf(i)&&(i=II(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Hm,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",Qm(t))for(var l=0;l<t.length;l++){s=t[l];var u=r+uh(s,l);o+=Wl(s,e,n,u,i)}else if(u=EI(t),typeof u=="function")for(t=u.call(t),l=0;!(s=t.next()).done;)s=s.value,u=r+uh(s,l++),o+=Wl(s,e,n,u,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Al(t,e,n){if(t==null)return t;var r=[],i=0;return Wl(t,r,"","",function(s){return e.call(n,s,i++)}),r}function AI(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var kt={current:null},Yl={transition:null},SI={ReactCurrentDispatcher:kt,ReactCurrentBatchConfig:Yl,ReactCurrentOwner:gf};function n0(){throw Error("act(...) is not supported in production builds of React.")}le.Children={map:Al,forEach:function(t,e,n){Al(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Al(t,function(){e++}),e},toArray:function(t){return Al(t,function(e){return e})||[]},only:function(t){if(!yf(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};le.Component=lo;le.Fragment=dI;le.Profiler=pI;le.PureComponent=pf;le.StrictMode=fI;le.Suspense=vI;le.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=SI;le.act=n0;le.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Yv({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=gf.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)Zv.call(e,u)&&!e0.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var h=0;h<u;h++)l[h]=arguments[h+2];r.children=l}return{$$typeof:Ka,type:t.type,key:i,ref:s,props:r,_owner:o}};le.createContext=function(t){return t={$$typeof:gI,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:mI,_context:t},t.Consumer=t};le.createElement=t0;le.createFactory=function(t){var e=t0.bind(null,t);return e.type=t,e};le.createRef=function(){return{current:null}};le.forwardRef=function(t){return{$$typeof:yI,render:t}};le.isValidElement=yf;le.lazy=function(t){return{$$typeof:wI,_payload:{_status:-1,_result:t},_init:AI}};le.memo=function(t,e){return{$$typeof:_I,type:t,compare:e===void 0?null:e}};le.startTransition=function(t){var e=Yl.transition;Yl.transition={};try{t()}finally{Yl.transition=e}};le.unstable_act=n0;le.useCallback=function(t,e){return kt.current.useCallback(t,e)};le.useContext=function(t){return kt.current.useContext(t)};le.useDebugValue=function(){};le.useDeferredValue=function(t){return kt.current.useDeferredValue(t)};le.useEffect=function(t,e){return kt.current.useEffect(t,e)};le.useId=function(){return kt.current.useId()};le.useImperativeHandle=function(t,e,n){return kt.current.useImperativeHandle(t,e,n)};le.useInsertionEffect=function(t,e){return kt.current.useInsertionEffect(t,e)};le.useLayoutEffect=function(t,e){return kt.current.useLayoutEffect(t,e)};le.useMemo=function(t,e){return kt.current.useMemo(t,e)};le.useReducer=function(t,e,n){return kt.current.useReducer(t,e,n)};le.useRef=function(t){return kt.current.useRef(t)};le.useState=function(t){return kt.current.useState(t)};le.useSyncExternalStore=function(t,e,n){return kt.current.useSyncExternalStore(t,e,n)};le.useTransition=function(){return kt.current.useTransition()};le.version="18.3.1";Hv.exports=le;var Ve=Hv.exports;const an=cI(Ve);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xI=Ve,PI=Symbol.for("react.element"),RI=Symbol.for("react.fragment"),CI=Object.prototype.hasOwnProperty,kI=xI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,bI={key:!0,ref:!0,__self:!0,__source:!0};function r0(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)CI.call(e,r)&&!bI.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:PI,type:t,key:s,ref:o,props:i,_owner:kI.current}}uc.Fragment=RI;uc.jsx=r0;uc.jsxs=r0;Qv.exports=uc;var D=Qv.exports,i0={exports:{}},en={},s0={exports:{}},o0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(H,te){var ie=H.length;H.push(te);e:for(;0<ie;){var xe=ie-1>>>1,_e=H[xe];if(0<i(_e,te))H[xe]=te,H[ie]=_e,ie=xe;else break e}}function n(H){return H.length===0?null:H[0]}function r(H){if(H.length===0)return null;var te=H[0],ie=H.pop();if(ie!==te){H[0]=ie;e:for(var xe=0,_e=H.length,Oe=_e>>>1;xe<Oe;){var nn=2*(xe+1)-1,gn=H[nn],zt=nn+1,rn=H[zt];if(0>i(gn,ie))zt<_e&&0>i(rn,gn)?(H[xe]=rn,H[zt]=ie,xe=zt):(H[xe]=gn,H[nn]=ie,xe=nn);else if(zt<_e&&0>i(rn,ie))H[xe]=rn,H[zt]=ie,xe=zt;else break e}}return te}function i(H,te){var ie=H.sortIndex-te.sortIndex;return ie!==0?ie:H.id-te.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],h=[],f=1,p=null,g=3,S=!1,C=!1,k=!1,j=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function I(H){for(var te=n(h);te!==null;){if(te.callback===null)r(h);else if(te.startTime<=H)r(h),te.sortIndex=te.expirationTime,e(u,te);else break;te=n(h)}}function N(H){if(k=!1,I(H),!C)if(n(u)!==null)C=!0,ot(L);else{var te=n(h);te!==null&&Be(N,te.startTime-H)}}function L(H,te){C=!1,k&&(k=!1,A(y),y=-1),S=!0;var ie=g;try{for(I(te),p=n(u);p!==null&&(!(p.expirationTime>te)||H&&!R());){var xe=p.callback;if(typeof xe=="function"){p.callback=null,g=p.priorityLevel;var _e=xe(p.expirationTime<=te);te=t.unstable_now(),typeof _e=="function"?p.callback=_e:p===n(u)&&r(u),I(te)}else r(u);p=n(u)}if(p!==null)var Oe=!0;else{var nn=n(h);nn!==null&&Be(N,nn.startTime-te),Oe=!1}return Oe}finally{p=null,g=ie,S=!1}}var U=!1,w=null,y=-1,_=5,T=-1;function R(){return!(t.unstable_now()-T<_)}function P(){if(w!==null){var H=t.unstable_now();T=H;var te=!0;try{te=w(!0,H)}finally{te?E():(U=!1,w=null)}}else U=!1}var E;if(typeof v=="function")E=function(){v(P)};else if(typeof MessageChannel<"u"){var ye=new MessageChannel,De=ye.port2;ye.port1.onmessage=P,E=function(){De.postMessage(null)}}else E=function(){j(P,0)};function ot(H){w=H,U||(U=!0,E())}function Be(H,te){y=j(function(){H(t.unstable_now())},te)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(H){H.callback=null},t.unstable_continueExecution=function(){C||S||(C=!0,ot(L))},t.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<H?Math.floor(1e3/H):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(H){switch(g){case 1:case 2:case 3:var te=3;break;default:te=g}var ie=g;g=te;try{return H()}finally{g=ie}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(H,te){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var ie=g;g=H;try{return te()}finally{g=ie}},t.unstable_scheduleCallback=function(H,te,ie){var xe=t.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?xe+ie:xe):ie=xe,H){case 1:var _e=-1;break;case 2:_e=250;break;case 5:_e=1073741823;break;case 4:_e=1e4;break;default:_e=5e3}return _e=ie+_e,H={id:f++,callback:te,priorityLevel:H,startTime:ie,expirationTime:_e,sortIndex:-1},ie>xe?(H.sortIndex=ie,e(h,H),n(u)===null&&H===n(h)&&(k?(A(y),y=-1):k=!0,Be(N,ie-xe))):(H.sortIndex=_e,e(u,H),C||S||(C=!0,ot(L))),H},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(H){var te=g;return function(){var ie=g;g=te;try{return H.apply(this,arguments)}finally{g=ie}}}})(o0);s0.exports=o0;var DI=s0.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VI=Ve,Jt=DI;function $(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a0=new Set,pa={};function Hi(t,e){Ks(t,e),Ks(t+"Capture",e)}function Ks(t,e){for(pa[t]=e,t=0;t<e.length;t++)a0.add(e[t])}var sr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Jh=Object.prototype.hasOwnProperty,NI=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Wm={},Ym={};function OI(t){return Jh.call(Ym,t)?!0:Jh.call(Wm,t)?!1:NI.test(t)?Ym[t]=!0:(Wm[t]=!0,!1)}function FI(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function MI(t,e,n,r){if(e===null||typeof e>"u"||FI(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function bt(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var pt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){pt[t]=new bt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];pt[e]=new bt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){pt[t]=new bt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){pt[t]=new bt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){pt[t]=new bt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){pt[t]=new bt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){pt[t]=new bt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){pt[t]=new bt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){pt[t]=new bt(t,5,!1,t.toLowerCase(),null,!1,!1)});var vf=/[\-:]([a-z])/g;function _f(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(vf,_f);pt[e]=new bt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(vf,_f);pt[e]=new bt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(vf,_f);pt[e]=new bt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){pt[t]=new bt(t,1,!1,t.toLowerCase(),null,!1,!1)});pt.xlinkHref=new bt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){pt[t]=new bt(t,1,!1,t.toLowerCase(),null,!0,!0)});function wf(t,e,n,r){var i=pt.hasOwnProperty(e)?pt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(MI(e,n,i,r)&&(n=null),r||i===null?OI(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var hr=VI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Sl=Symbol.for("react.element"),gs=Symbol.for("react.portal"),ys=Symbol.for("react.fragment"),Ef=Symbol.for("react.strict_mode"),Zh=Symbol.for("react.profiler"),l0=Symbol.for("react.provider"),u0=Symbol.for("react.context"),If=Symbol.for("react.forward_ref"),ed=Symbol.for("react.suspense"),td=Symbol.for("react.suspense_list"),Tf=Symbol.for("react.memo"),wr=Symbol.for("react.lazy"),c0=Symbol.for("react.offscreen"),Xm=Symbol.iterator;function ko(t){return t===null||typeof t!="object"?null:(t=Xm&&t[Xm]||t["@@iterator"],typeof t=="function"?t:null)}var je=Object.assign,ch;function Go(t){if(ch===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);ch=e&&e[1]||""}return`
`+ch+t}var hh=!1;function dh(t,e){if(!t||hh)return"";hh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var r=h}Reflect.construct(t,[],e)}else{try{e.call()}catch(h){r=h}t.call(e.prototype)}else{try{throw Error()}catch(h){r=h}t()}}catch(h){if(h&&r&&typeof h.stack=="string"){for(var i=h.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,l=s.length-1;1<=o&&0<=l&&i[o]!==s[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==s[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==s[l]){var u=`
`+i[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=l);break}}}finally{hh=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Go(t):""}function LI(t){switch(t.tag){case 5:return Go(t.type);case 16:return Go("Lazy");case 13:return Go("Suspense");case 19:return Go("SuspenseList");case 0:case 2:case 15:return t=dh(t.type,!1),t;case 11:return t=dh(t.type.render,!1),t;case 1:return t=dh(t.type,!0),t;default:return""}}function nd(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ys:return"Fragment";case gs:return"Portal";case Zh:return"Profiler";case Ef:return"StrictMode";case ed:return"Suspense";case td:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case u0:return(t.displayName||"Context")+".Consumer";case l0:return(t._context.displayName||"Context")+".Provider";case If:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Tf:return e=t.displayName||null,e!==null?e:nd(t.type)||"Memo";case wr:e=t._payload,t=t._init;try{return nd(t(e))}catch{}}return null}function jI(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return nd(e);case 8:return e===Ef?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Yr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function h0(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function BI(t){var e=h0(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function xl(t){t._valueTracker||(t._valueTracker=BI(t))}function d0(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=h0(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function vu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function rd(t,e){var n=e.checked;return je({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Jm(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Yr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function f0(t,e){e=e.checked,e!=null&&wf(t,"checked",e,!1)}function id(t,e){f0(t,e);var n=Yr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?sd(t,e.type,n):e.hasOwnProperty("defaultValue")&&sd(t,e.type,Yr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Zm(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function sd(t,e,n){(e!=="number"||vu(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Qo=Array.isArray;function ks(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Yr(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function od(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error($(91));return je({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function eg(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error($(92));if(Qo(n)){if(1<n.length)throw Error($(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Yr(n)}}function p0(t,e){var n=Yr(e.value),r=Yr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function tg(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function m0(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ad(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?m0(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Pl,g0=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Pl=Pl||document.createElement("div"),Pl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Pl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ma(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Jo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},UI=["Webkit","ms","Moz","O"];Object.keys(Jo).forEach(function(t){UI.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Jo[e]=Jo[t]})});function y0(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Jo.hasOwnProperty(t)&&Jo[t]?(""+e).trim():e+"px"}function v0(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=y0(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var zI=je({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ld(t,e){if(e){if(zI[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error($(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error($(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error($(61))}if(e.style!=null&&typeof e.style!="object")throw Error($(62))}}function ud(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var cd=null;function Af(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var hd=null,bs=null,Ds=null;function ng(t){if(t=Ha(t)){if(typeof hd!="function")throw Error($(280));var e=t.stateNode;e&&(e=pc(e),hd(t.stateNode,t.type,e))}}function _0(t){bs?Ds?Ds.push(t):Ds=[t]:bs=t}function w0(){if(bs){var t=bs,e=Ds;if(Ds=bs=null,ng(t),e)for(t=0;t<e.length;t++)ng(e[t])}}function E0(t,e){return t(e)}function I0(){}var fh=!1;function T0(t,e,n){if(fh)return t(e,n);fh=!0;try{return E0(t,e,n)}finally{fh=!1,(bs!==null||Ds!==null)&&(I0(),w0())}}function ga(t,e){var n=t.stateNode;if(n===null)return null;var r=pc(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error($(231,e,typeof n));return n}var dd=!1;if(sr)try{var bo={};Object.defineProperty(bo,"passive",{get:function(){dd=!0}}),window.addEventListener("test",bo,bo),window.removeEventListener("test",bo,bo)}catch{dd=!1}function $I(t,e,n,r,i,s,o,l,u){var h=Array.prototype.slice.call(arguments,3);try{e.apply(n,h)}catch(f){this.onError(f)}}var Zo=!1,_u=null,wu=!1,fd=null,qI={onError:function(t){Zo=!0,_u=t}};function KI(t,e,n,r,i,s,o,l,u){Zo=!1,_u=null,$I.apply(qI,arguments)}function GI(t,e,n,r,i,s,o,l,u){if(KI.apply(this,arguments),Zo){if(Zo){var h=_u;Zo=!1,_u=null}else throw Error($(198));wu||(wu=!0,fd=h)}}function Wi(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function A0(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function rg(t){if(Wi(t)!==t)throw Error($(188))}function QI(t){var e=t.alternate;if(!e){if(e=Wi(t),e===null)throw Error($(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return rg(i),t;if(s===r)return rg(i),e;s=s.sibling}throw Error($(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o)throw Error($(189))}}if(n.alternate!==r)throw Error($(190))}if(n.tag!==3)throw Error($(188));return n.stateNode.current===n?t:e}function S0(t){return t=QI(t),t!==null?x0(t):null}function x0(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=x0(t);if(e!==null)return e;t=t.sibling}return null}var P0=Jt.unstable_scheduleCallback,ig=Jt.unstable_cancelCallback,HI=Jt.unstable_shouldYield,WI=Jt.unstable_requestPaint,Qe=Jt.unstable_now,YI=Jt.unstable_getCurrentPriorityLevel,Sf=Jt.unstable_ImmediatePriority,R0=Jt.unstable_UserBlockingPriority,Eu=Jt.unstable_NormalPriority,XI=Jt.unstable_LowPriority,C0=Jt.unstable_IdlePriority,cc=null,zn=null;function JI(t){if(zn&&typeof zn.onCommitFiberRoot=="function")try{zn.onCommitFiberRoot(cc,t,void 0,(t.current.flags&128)===128)}catch{}}var xn=Math.clz32?Math.clz32:tT,ZI=Math.log,eT=Math.LN2;function tT(t){return t>>>=0,t===0?32:31-(ZI(t)/eT|0)|0}var Rl=64,Cl=4194304;function Ho(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Iu(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~i;l!==0?r=Ho(l):(s&=o,s!==0&&(r=Ho(s)))}else o=n&~i,o!==0?r=Ho(o):s!==0&&(r=Ho(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-xn(e),i=1<<n,r|=t[n],e&=~i;return r}function nT(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function rT(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-xn(s),l=1<<o,u=i[o];u===-1?(!(l&n)||l&r)&&(i[o]=nT(l,e)):u<=e&&(t.expiredLanes|=l),s&=~l}}function pd(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function k0(){var t=Rl;return Rl<<=1,!(Rl&4194240)&&(Rl=64),t}function ph(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ga(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-xn(e),t[e]=n}function iT(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-xn(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function xf(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-xn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var we=0;function b0(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var D0,Pf,V0,N0,O0,md=!1,kl=[],Mr=null,Lr=null,jr=null,ya=new Map,va=new Map,Ir=[],sT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function sg(t,e){switch(t){case"focusin":case"focusout":Mr=null;break;case"dragenter":case"dragleave":Lr=null;break;case"mouseover":case"mouseout":jr=null;break;case"pointerover":case"pointerout":ya.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":va.delete(e.pointerId)}}function Do(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Ha(e),e!==null&&Pf(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function oT(t,e,n,r,i){switch(e){case"focusin":return Mr=Do(Mr,t,e,n,r,i),!0;case"dragenter":return Lr=Do(Lr,t,e,n,r,i),!0;case"mouseover":return jr=Do(jr,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return ya.set(s,Do(ya.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,va.set(s,Do(va.get(s)||null,t,e,n,r,i)),!0}return!1}function F0(t){var e=Ti(t.target);if(e!==null){var n=Wi(e);if(n!==null){if(e=n.tag,e===13){if(e=A0(n),e!==null){t.blockedOn=e,O0(t.priority,function(){V0(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Xl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=gd(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);cd=r,n.target.dispatchEvent(r),cd=null}else return e=Ha(n),e!==null&&Pf(e),t.blockedOn=n,!1;e.shift()}return!0}function og(t,e,n){Xl(t)&&n.delete(e)}function aT(){md=!1,Mr!==null&&Xl(Mr)&&(Mr=null),Lr!==null&&Xl(Lr)&&(Lr=null),jr!==null&&Xl(jr)&&(jr=null),ya.forEach(og),va.forEach(og)}function Vo(t,e){t.blockedOn===e&&(t.blockedOn=null,md||(md=!0,Jt.unstable_scheduleCallback(Jt.unstable_NormalPriority,aT)))}function _a(t){function e(i){return Vo(i,t)}if(0<kl.length){Vo(kl[0],t);for(var n=1;n<kl.length;n++){var r=kl[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Mr!==null&&Vo(Mr,t),Lr!==null&&Vo(Lr,t),jr!==null&&Vo(jr,t),ya.forEach(e),va.forEach(e),n=0;n<Ir.length;n++)r=Ir[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Ir.length&&(n=Ir[0],n.blockedOn===null);)F0(n),n.blockedOn===null&&Ir.shift()}var Vs=hr.ReactCurrentBatchConfig,Tu=!0;function lT(t,e,n,r){var i=we,s=Vs.transition;Vs.transition=null;try{we=1,Rf(t,e,n,r)}finally{we=i,Vs.transition=s}}function uT(t,e,n,r){var i=we,s=Vs.transition;Vs.transition=null;try{we=4,Rf(t,e,n,r)}finally{we=i,Vs.transition=s}}function Rf(t,e,n,r){if(Tu){var i=gd(t,e,n,r);if(i===null)Ah(t,e,r,Au,n),sg(t,r);else if(oT(i,t,e,n,r))r.stopPropagation();else if(sg(t,r),e&4&&-1<sT.indexOf(t)){for(;i!==null;){var s=Ha(i);if(s!==null&&D0(s),s=gd(t,e,n,r),s===null&&Ah(t,e,r,Au,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Ah(t,e,r,null,n)}}var Au=null;function gd(t,e,n,r){if(Au=null,t=Af(r),t=Ti(t),t!==null)if(e=Wi(t),e===null)t=null;else if(n=e.tag,n===13){if(t=A0(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Au=t,null}function M0(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(YI()){case Sf:return 1;case R0:return 4;case Eu:case XI:return 16;case C0:return 536870912;default:return 16}default:return 16}}var Vr=null,Cf=null,Jl=null;function L0(){if(Jl)return Jl;var t,e=Cf,n=e.length,r,i="value"in Vr?Vr.value:Vr.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Jl=i.slice(t,1<r?1-r:void 0)}function Zl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function bl(){return!0}function ag(){return!1}function tn(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?bl:ag,this.isPropagationStopped=ag,this}return je(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=bl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=bl)},persist:function(){},isPersistent:bl}),e}var uo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},kf=tn(uo),Qa=je({},uo,{view:0,detail:0}),cT=tn(Qa),mh,gh,No,hc=je({},Qa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:bf,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==No&&(No&&t.type==="mousemove"?(mh=t.screenX-No.screenX,gh=t.screenY-No.screenY):gh=mh=0,No=t),mh)},movementY:function(t){return"movementY"in t?t.movementY:gh}}),lg=tn(hc),hT=je({},hc,{dataTransfer:0}),dT=tn(hT),fT=je({},Qa,{relatedTarget:0}),yh=tn(fT),pT=je({},uo,{animationName:0,elapsedTime:0,pseudoElement:0}),mT=tn(pT),gT=je({},uo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),yT=tn(gT),vT=je({},uo,{data:0}),ug=tn(vT),_T={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wT={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ET={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function IT(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=ET[t])?!!e[t]:!1}function bf(){return IT}var TT=je({},Qa,{key:function(t){if(t.key){var e=_T[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Zl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?wT[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:bf,charCode:function(t){return t.type==="keypress"?Zl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Zl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),AT=tn(TT),ST=je({},hc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),cg=tn(ST),xT=je({},Qa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:bf}),PT=tn(xT),RT=je({},uo,{propertyName:0,elapsedTime:0,pseudoElement:0}),CT=tn(RT),kT=je({},hc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),bT=tn(kT),DT=[9,13,27,32],Df=sr&&"CompositionEvent"in window,ea=null;sr&&"documentMode"in document&&(ea=document.documentMode);var VT=sr&&"TextEvent"in window&&!ea,j0=sr&&(!Df||ea&&8<ea&&11>=ea),hg=" ",dg=!1;function B0(t,e){switch(t){case"keyup":return DT.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function U0(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var vs=!1;function NT(t,e){switch(t){case"compositionend":return U0(e);case"keypress":return e.which!==32?null:(dg=!0,hg);case"textInput":return t=e.data,t===hg&&dg?null:t;default:return null}}function OT(t,e){if(vs)return t==="compositionend"||!Df&&B0(t,e)?(t=L0(),Jl=Cf=Vr=null,vs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return j0&&e.locale!=="ko"?null:e.data;default:return null}}var FT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function fg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!FT[t.type]:e==="textarea"}function z0(t,e,n,r){_0(r),e=Su(e,"onChange"),0<e.length&&(n=new kf("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ta=null,wa=null;function MT(t){Z0(t,0)}function dc(t){var e=Es(t);if(d0(e))return t}function LT(t,e){if(t==="change")return e}var $0=!1;if(sr){var vh;if(sr){var _h="oninput"in document;if(!_h){var pg=document.createElement("div");pg.setAttribute("oninput","return;"),_h=typeof pg.oninput=="function"}vh=_h}else vh=!1;$0=vh&&(!document.documentMode||9<document.documentMode)}function mg(){ta&&(ta.detachEvent("onpropertychange",q0),wa=ta=null)}function q0(t){if(t.propertyName==="value"&&dc(wa)){var e=[];z0(e,wa,t,Af(t)),T0(MT,e)}}function jT(t,e,n){t==="focusin"?(mg(),ta=e,wa=n,ta.attachEvent("onpropertychange",q0)):t==="focusout"&&mg()}function BT(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return dc(wa)}function UT(t,e){if(t==="click")return dc(e)}function zT(t,e){if(t==="input"||t==="change")return dc(e)}function $T(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Cn=typeof Object.is=="function"?Object.is:$T;function Ea(t,e){if(Cn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Jh.call(e,i)||!Cn(t[i],e[i]))return!1}return!0}function gg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function yg(t,e){var n=gg(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=gg(n)}}function K0(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?K0(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function G0(){for(var t=window,e=vu();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=vu(t.document)}return e}function Vf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function qT(t){var e=G0(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&K0(n.ownerDocument.documentElement,n)){if(r!==null&&Vf(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=yg(n,s);var o=yg(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var KT=sr&&"documentMode"in document&&11>=document.documentMode,_s=null,yd=null,na=null,vd=!1;function vg(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;vd||_s==null||_s!==vu(r)||(r=_s,"selectionStart"in r&&Vf(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),na&&Ea(na,r)||(na=r,r=Su(yd,"onSelect"),0<r.length&&(e=new kf("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=_s)))}function Dl(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ws={animationend:Dl("Animation","AnimationEnd"),animationiteration:Dl("Animation","AnimationIteration"),animationstart:Dl("Animation","AnimationStart"),transitionend:Dl("Transition","TransitionEnd")},wh={},Q0={};sr&&(Q0=document.createElement("div").style,"AnimationEvent"in window||(delete ws.animationend.animation,delete ws.animationiteration.animation,delete ws.animationstart.animation),"TransitionEvent"in window||delete ws.transitionend.transition);function fc(t){if(wh[t])return wh[t];if(!ws[t])return t;var e=ws[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Q0)return wh[t]=e[n];return t}var H0=fc("animationend"),W0=fc("animationiteration"),Y0=fc("animationstart"),X0=fc("transitionend"),J0=new Map,_g="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ni(t,e){J0.set(t,e),Hi(e,[t])}for(var Eh=0;Eh<_g.length;Eh++){var Ih=_g[Eh],GT=Ih.toLowerCase(),QT=Ih[0].toUpperCase()+Ih.slice(1);ni(GT,"on"+QT)}ni(H0,"onAnimationEnd");ni(W0,"onAnimationIteration");ni(Y0,"onAnimationStart");ni("dblclick","onDoubleClick");ni("focusin","onFocus");ni("focusout","onBlur");ni(X0,"onTransitionEnd");Ks("onMouseEnter",["mouseout","mouseover"]);Ks("onMouseLeave",["mouseout","mouseover"]);Ks("onPointerEnter",["pointerout","pointerover"]);Ks("onPointerLeave",["pointerout","pointerover"]);Hi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Hi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Hi("onBeforeInput",["compositionend","keypress","textInput","paste"]);Hi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Hi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Hi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),HT=new Set("cancel close invalid load scroll toggle".split(" ").concat(Wo));function wg(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,GI(r,e,void 0,t),t.currentTarget=null}function Z0(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],u=l.instance,h=l.currentTarget;if(l=l.listener,u!==s&&i.isPropagationStopped())break e;wg(i,l,h),s=u}else for(o=0;o<r.length;o++){if(l=r[o],u=l.instance,h=l.currentTarget,l=l.listener,u!==s&&i.isPropagationStopped())break e;wg(i,l,h),s=u}}}if(wu)throw t=fd,wu=!1,fd=null,t}function Ce(t,e){var n=e[Td];n===void 0&&(n=e[Td]=new Set);var r=t+"__bubble";n.has(r)||(e_(e,t,2,!1),n.add(r))}function Th(t,e,n){var r=0;e&&(r|=4),e_(n,t,r,e)}var Vl="_reactListening"+Math.random().toString(36).slice(2);function Ia(t){if(!t[Vl]){t[Vl]=!0,a0.forEach(function(n){n!=="selectionchange"&&(HT.has(n)||Th(n,!1,t),Th(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Vl]||(e[Vl]=!0,Th("selectionchange",!1,e))}}function e_(t,e,n,r){switch(M0(e)){case 1:var i=lT;break;case 4:i=uT;break;default:i=Rf}n=i.bind(null,e,n,t),i=void 0,!dd||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Ah(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;l!==null;){if(o=Ti(l),o===null)return;if(u=o.tag,u===5||u===6){r=s=o;continue e}l=l.parentNode}}r=r.return}T0(function(){var h=s,f=Af(n),p=[];e:{var g=J0.get(t);if(g!==void 0){var S=kf,C=t;switch(t){case"keypress":if(Zl(n)===0)break e;case"keydown":case"keyup":S=AT;break;case"focusin":C="focus",S=yh;break;case"focusout":C="blur",S=yh;break;case"beforeblur":case"afterblur":S=yh;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":S=lg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":S=dT;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":S=PT;break;case H0:case W0:case Y0:S=mT;break;case X0:S=CT;break;case"scroll":S=cT;break;case"wheel":S=bT;break;case"copy":case"cut":case"paste":S=yT;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":S=cg}var k=(e&4)!==0,j=!k&&t==="scroll",A=k?g!==null?g+"Capture":null:g;k=[];for(var v=h,I;v!==null;){I=v;var N=I.stateNode;if(I.tag===5&&N!==null&&(I=N,A!==null&&(N=ga(v,A),N!=null&&k.push(Ta(v,N,I)))),j)break;v=v.return}0<k.length&&(g=new S(g,C,null,n,f),p.push({event:g,listeners:k}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",S=t==="mouseout"||t==="pointerout",g&&n!==cd&&(C=n.relatedTarget||n.fromElement)&&(Ti(C)||C[or]))break e;if((S||g)&&(g=f.window===f?f:(g=f.ownerDocument)?g.defaultView||g.parentWindow:window,S?(C=n.relatedTarget||n.toElement,S=h,C=C?Ti(C):null,C!==null&&(j=Wi(C),C!==j||C.tag!==5&&C.tag!==6)&&(C=null)):(S=null,C=h),S!==C)){if(k=lg,N="onMouseLeave",A="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(k=cg,N="onPointerLeave",A="onPointerEnter",v="pointer"),j=S==null?g:Es(S),I=C==null?g:Es(C),g=new k(N,v+"leave",S,n,f),g.target=j,g.relatedTarget=I,N=null,Ti(f)===h&&(k=new k(A,v+"enter",C,n,f),k.target=I,k.relatedTarget=j,N=k),j=N,S&&C)t:{for(k=S,A=C,v=0,I=k;I;I=os(I))v++;for(I=0,N=A;N;N=os(N))I++;for(;0<v-I;)k=os(k),v--;for(;0<I-v;)A=os(A),I--;for(;v--;){if(k===A||A!==null&&k===A.alternate)break t;k=os(k),A=os(A)}k=null}else k=null;S!==null&&Eg(p,g,S,k,!1),C!==null&&j!==null&&Eg(p,j,C,k,!0)}}e:{if(g=h?Es(h):window,S=g.nodeName&&g.nodeName.toLowerCase(),S==="select"||S==="input"&&g.type==="file")var L=LT;else if(fg(g))if($0)L=zT;else{L=BT;var U=jT}else(S=g.nodeName)&&S.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(L=UT);if(L&&(L=L(t,h))){z0(p,L,n,f);break e}U&&U(t,g,h),t==="focusout"&&(U=g._wrapperState)&&U.controlled&&g.type==="number"&&sd(g,"number",g.value)}switch(U=h?Es(h):window,t){case"focusin":(fg(U)||U.contentEditable==="true")&&(_s=U,yd=h,na=null);break;case"focusout":na=yd=_s=null;break;case"mousedown":vd=!0;break;case"contextmenu":case"mouseup":case"dragend":vd=!1,vg(p,n,f);break;case"selectionchange":if(KT)break;case"keydown":case"keyup":vg(p,n,f)}var w;if(Df)e:{switch(t){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else vs?B0(t,n)&&(y="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(j0&&n.locale!=="ko"&&(vs||y!=="onCompositionStart"?y==="onCompositionEnd"&&vs&&(w=L0()):(Vr=f,Cf="value"in Vr?Vr.value:Vr.textContent,vs=!0)),U=Su(h,y),0<U.length&&(y=new ug(y,t,null,n,f),p.push({event:y,listeners:U}),w?y.data=w:(w=U0(n),w!==null&&(y.data=w)))),(w=VT?NT(t,n):OT(t,n))&&(h=Su(h,"onBeforeInput"),0<h.length&&(f=new ug("onBeforeInput","beforeinput",null,n,f),p.push({event:f,listeners:h}),f.data=w))}Z0(p,e)})}function Ta(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Su(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=ga(t,n),s!=null&&r.unshift(Ta(t,s,i)),s=ga(t,e),s!=null&&r.push(Ta(t,s,i))),t=t.return}return r}function os(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Eg(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var l=n,u=l.alternate,h=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&h!==null&&(l=h,i?(u=ga(n,s),u!=null&&o.unshift(Ta(n,u,l))):i||(u=ga(n,s),u!=null&&o.push(Ta(n,u,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var WT=/\r\n?/g,YT=/\u0000|\uFFFD/g;function Ig(t){return(typeof t=="string"?t:""+t).replace(WT,`
`).replace(YT,"")}function Nl(t,e,n){if(e=Ig(e),Ig(t)!==e&&n)throw Error($(425))}function xu(){}var _d=null,wd=null;function Ed(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Id=typeof setTimeout=="function"?setTimeout:void 0,XT=typeof clearTimeout=="function"?clearTimeout:void 0,Tg=typeof Promise=="function"?Promise:void 0,JT=typeof queueMicrotask=="function"?queueMicrotask:typeof Tg<"u"?function(t){return Tg.resolve(null).then(t).catch(ZT)}:Id;function ZT(t){setTimeout(function(){throw t})}function Sh(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),_a(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);_a(e)}function Br(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Ag(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var co=Math.random().toString(36).slice(2),Mn="__reactFiber$"+co,Aa="__reactProps$"+co,or="__reactContainer$"+co,Td="__reactEvents$"+co,eA="__reactListeners$"+co,tA="__reactHandles$"+co;function Ti(t){var e=t[Mn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[or]||n[Mn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Ag(t);t!==null;){if(n=t[Mn])return n;t=Ag(t)}return e}t=n,n=t.parentNode}return null}function Ha(t){return t=t[Mn]||t[or],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Es(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error($(33))}function pc(t){return t[Aa]||null}var Ad=[],Is=-1;function ri(t){return{current:t}}function be(t){0>Is||(t.current=Ad[Is],Ad[Is]=null,Is--)}function Pe(t,e){Is++,Ad[Is]=t.current,t.current=e}var Xr={},It=ri(Xr),Mt=ri(!1),Ni=Xr;function Gs(t,e){var n=t.type.contextTypes;if(!n)return Xr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Lt(t){return t=t.childContextTypes,t!=null}function Pu(){be(Mt),be(It)}function Sg(t,e,n){if(It.current!==Xr)throw Error($(168));Pe(It,e),Pe(Mt,n)}function t_(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error($(108,jI(t)||"Unknown",i));return je({},n,r)}function Ru(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Xr,Ni=It.current,Pe(It,t),Pe(Mt,Mt.current),!0}function xg(t,e,n){var r=t.stateNode;if(!r)throw Error($(169));n?(t=t_(t,e,Ni),r.__reactInternalMemoizedMergedChildContext=t,be(Mt),be(It),Pe(It,t)):be(Mt),Pe(Mt,n)}var Xn=null,mc=!1,xh=!1;function n_(t){Xn===null?Xn=[t]:Xn.push(t)}function nA(t){mc=!0,n_(t)}function ii(){if(!xh&&Xn!==null){xh=!0;var t=0,e=we;try{var n=Xn;for(we=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Xn=null,mc=!1}catch(i){throw Xn!==null&&(Xn=Xn.slice(t+1)),P0(Sf,ii),i}finally{we=e,xh=!1}}return null}var Ts=[],As=0,Cu=null,ku=0,un=[],cn=0,Oi=null,Zn=1,er="";function pi(t,e){Ts[As++]=ku,Ts[As++]=Cu,Cu=t,ku=e}function r_(t,e,n){un[cn++]=Zn,un[cn++]=er,un[cn++]=Oi,Oi=t;var r=Zn;t=er;var i=32-xn(r)-1;r&=~(1<<i),n+=1;var s=32-xn(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Zn=1<<32-xn(e)+i|n<<i|r,er=s+t}else Zn=1<<s|n<<i|r,er=t}function Nf(t){t.return!==null&&(pi(t,1),r_(t,1,0))}function Of(t){for(;t===Cu;)Cu=Ts[--As],Ts[As]=null,ku=Ts[--As],Ts[As]=null;for(;t===Oi;)Oi=un[--cn],un[cn]=null,er=un[--cn],un[cn]=null,Zn=un[--cn],un[cn]=null}var Yt=null,Ht=null,Ne=!1,Tn=null;function i_(t,e){var n=hn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Pg(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Yt=t,Ht=Br(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Yt=t,Ht=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Oi!==null?{id:Zn,overflow:er}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=hn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Yt=t,Ht=null,!0):!1;default:return!1}}function Sd(t){return(t.mode&1)!==0&&(t.flags&128)===0}function xd(t){if(Ne){var e=Ht;if(e){var n=e;if(!Pg(t,e)){if(Sd(t))throw Error($(418));e=Br(n.nextSibling);var r=Yt;e&&Pg(t,e)?i_(r,n):(t.flags=t.flags&-4097|2,Ne=!1,Yt=t)}}else{if(Sd(t))throw Error($(418));t.flags=t.flags&-4097|2,Ne=!1,Yt=t}}}function Rg(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Yt=t}function Ol(t){if(t!==Yt)return!1;if(!Ne)return Rg(t),Ne=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Ed(t.type,t.memoizedProps)),e&&(e=Ht)){if(Sd(t))throw s_(),Error($(418));for(;e;)i_(t,e),e=Br(e.nextSibling)}if(Rg(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error($(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Ht=Br(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Ht=null}}else Ht=Yt?Br(t.stateNode.nextSibling):null;return!0}function s_(){for(var t=Ht;t;)t=Br(t.nextSibling)}function Qs(){Ht=Yt=null,Ne=!1}function Ff(t){Tn===null?Tn=[t]:Tn.push(t)}var rA=hr.ReactCurrentBatchConfig;function Oo(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error($(309));var r=n.stateNode}if(!r)throw Error($(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var l=i.refs;o===null?delete l[s]:l[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error($(284));if(!n._owner)throw Error($(290,t))}return t}function Fl(t,e){throw t=Object.prototype.toString.call(e),Error($(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Cg(t){var e=t._init;return e(t._payload)}function o_(t){function e(A,v){if(t){var I=A.deletions;I===null?(A.deletions=[v],A.flags|=16):I.push(v)}}function n(A,v){if(!t)return null;for(;v!==null;)e(A,v),v=v.sibling;return null}function r(A,v){for(A=new Map;v!==null;)v.key!==null?A.set(v.key,v):A.set(v.index,v),v=v.sibling;return A}function i(A,v){return A=qr(A,v),A.index=0,A.sibling=null,A}function s(A,v,I){return A.index=I,t?(I=A.alternate,I!==null?(I=I.index,I<v?(A.flags|=2,v):I):(A.flags|=2,v)):(A.flags|=1048576,v)}function o(A){return t&&A.alternate===null&&(A.flags|=2),A}function l(A,v,I,N){return v===null||v.tag!==6?(v=Vh(I,A.mode,N),v.return=A,v):(v=i(v,I),v.return=A,v)}function u(A,v,I,N){var L=I.type;return L===ys?f(A,v,I.props.children,N,I.key):v!==null&&(v.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===wr&&Cg(L)===v.type)?(N=i(v,I.props),N.ref=Oo(A,v,I),N.return=A,N):(N=ou(I.type,I.key,I.props,null,A.mode,N),N.ref=Oo(A,v,I),N.return=A,N)}function h(A,v,I,N){return v===null||v.tag!==4||v.stateNode.containerInfo!==I.containerInfo||v.stateNode.implementation!==I.implementation?(v=Nh(I,A.mode,N),v.return=A,v):(v=i(v,I.children||[]),v.return=A,v)}function f(A,v,I,N,L){return v===null||v.tag!==7?(v=Vi(I,A.mode,N,L),v.return=A,v):(v=i(v,I),v.return=A,v)}function p(A,v,I){if(typeof v=="string"&&v!==""||typeof v=="number")return v=Vh(""+v,A.mode,I),v.return=A,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Sl:return I=ou(v.type,v.key,v.props,null,A.mode,I),I.ref=Oo(A,null,v),I.return=A,I;case gs:return v=Nh(v,A.mode,I),v.return=A,v;case wr:var N=v._init;return p(A,N(v._payload),I)}if(Qo(v)||ko(v))return v=Vi(v,A.mode,I,null),v.return=A,v;Fl(A,v)}return null}function g(A,v,I,N){var L=v!==null?v.key:null;if(typeof I=="string"&&I!==""||typeof I=="number")return L!==null?null:l(A,v,""+I,N);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case Sl:return I.key===L?u(A,v,I,N):null;case gs:return I.key===L?h(A,v,I,N):null;case wr:return L=I._init,g(A,v,L(I._payload),N)}if(Qo(I)||ko(I))return L!==null?null:f(A,v,I,N,null);Fl(A,I)}return null}function S(A,v,I,N,L){if(typeof N=="string"&&N!==""||typeof N=="number")return A=A.get(I)||null,l(v,A,""+N,L);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case Sl:return A=A.get(N.key===null?I:N.key)||null,u(v,A,N,L);case gs:return A=A.get(N.key===null?I:N.key)||null,h(v,A,N,L);case wr:var U=N._init;return S(A,v,I,U(N._payload),L)}if(Qo(N)||ko(N))return A=A.get(I)||null,f(v,A,N,L,null);Fl(v,N)}return null}function C(A,v,I,N){for(var L=null,U=null,w=v,y=v=0,_=null;w!==null&&y<I.length;y++){w.index>y?(_=w,w=null):_=w.sibling;var T=g(A,w,I[y],N);if(T===null){w===null&&(w=_);break}t&&w&&T.alternate===null&&e(A,w),v=s(T,v,y),U===null?L=T:U.sibling=T,U=T,w=_}if(y===I.length)return n(A,w),Ne&&pi(A,y),L;if(w===null){for(;y<I.length;y++)w=p(A,I[y],N),w!==null&&(v=s(w,v,y),U===null?L=w:U.sibling=w,U=w);return Ne&&pi(A,y),L}for(w=r(A,w);y<I.length;y++)_=S(w,A,y,I[y],N),_!==null&&(t&&_.alternate!==null&&w.delete(_.key===null?y:_.key),v=s(_,v,y),U===null?L=_:U.sibling=_,U=_);return t&&w.forEach(function(R){return e(A,R)}),Ne&&pi(A,y),L}function k(A,v,I,N){var L=ko(I);if(typeof L!="function")throw Error($(150));if(I=L.call(I),I==null)throw Error($(151));for(var U=L=null,w=v,y=v=0,_=null,T=I.next();w!==null&&!T.done;y++,T=I.next()){w.index>y?(_=w,w=null):_=w.sibling;var R=g(A,w,T.value,N);if(R===null){w===null&&(w=_);break}t&&w&&R.alternate===null&&e(A,w),v=s(R,v,y),U===null?L=R:U.sibling=R,U=R,w=_}if(T.done)return n(A,w),Ne&&pi(A,y),L;if(w===null){for(;!T.done;y++,T=I.next())T=p(A,T.value,N),T!==null&&(v=s(T,v,y),U===null?L=T:U.sibling=T,U=T);return Ne&&pi(A,y),L}for(w=r(A,w);!T.done;y++,T=I.next())T=S(w,A,y,T.value,N),T!==null&&(t&&T.alternate!==null&&w.delete(T.key===null?y:T.key),v=s(T,v,y),U===null?L=T:U.sibling=T,U=T);return t&&w.forEach(function(P){return e(A,P)}),Ne&&pi(A,y),L}function j(A,v,I,N){if(typeof I=="object"&&I!==null&&I.type===ys&&I.key===null&&(I=I.props.children),typeof I=="object"&&I!==null){switch(I.$$typeof){case Sl:e:{for(var L=I.key,U=v;U!==null;){if(U.key===L){if(L=I.type,L===ys){if(U.tag===7){n(A,U.sibling),v=i(U,I.props.children),v.return=A,A=v;break e}}else if(U.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===wr&&Cg(L)===U.type){n(A,U.sibling),v=i(U,I.props),v.ref=Oo(A,U,I),v.return=A,A=v;break e}n(A,U);break}else e(A,U);U=U.sibling}I.type===ys?(v=Vi(I.props.children,A.mode,N,I.key),v.return=A,A=v):(N=ou(I.type,I.key,I.props,null,A.mode,N),N.ref=Oo(A,v,I),N.return=A,A=N)}return o(A);case gs:e:{for(U=I.key;v!==null;){if(v.key===U)if(v.tag===4&&v.stateNode.containerInfo===I.containerInfo&&v.stateNode.implementation===I.implementation){n(A,v.sibling),v=i(v,I.children||[]),v.return=A,A=v;break e}else{n(A,v);break}else e(A,v);v=v.sibling}v=Nh(I,A.mode,N),v.return=A,A=v}return o(A);case wr:return U=I._init,j(A,v,U(I._payload),N)}if(Qo(I))return C(A,v,I,N);if(ko(I))return k(A,v,I,N);Fl(A,I)}return typeof I=="string"&&I!==""||typeof I=="number"?(I=""+I,v!==null&&v.tag===6?(n(A,v.sibling),v=i(v,I),v.return=A,A=v):(n(A,v),v=Vh(I,A.mode,N),v.return=A,A=v),o(A)):n(A,v)}return j}var Hs=o_(!0),a_=o_(!1),bu=ri(null),Du=null,Ss=null,Mf=null;function Lf(){Mf=Ss=Du=null}function jf(t){var e=bu.current;be(bu),t._currentValue=e}function Pd(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ns(t,e){Du=t,Mf=Ss=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ft=!0),t.firstContext=null)}function pn(t){var e=t._currentValue;if(Mf!==t)if(t={context:t,memoizedValue:e,next:null},Ss===null){if(Du===null)throw Error($(308));Ss=t,Du.dependencies={lanes:0,firstContext:t}}else Ss=Ss.next=t;return e}var Ai=null;function Bf(t){Ai===null?Ai=[t]:Ai.push(t)}function l_(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Bf(e)):(n.next=i.next,i.next=n),e.interleaved=n,ar(t,r)}function ar(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Er=!1;function Uf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function u_(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function tr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ur(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ge&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,ar(t,n)}return i=r.interleaved,i===null?(e.next=e,Bf(r)):(e.next=i.next,i.next=e),r.interleaved=e,ar(t,n)}function eu(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,xf(t,n)}}function kg(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Vu(t,e,n,r){var i=t.updateQueue;Er=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var u=l,h=u.next;u.next=null,o===null?s=h:o.next=h,o=u;var f=t.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==o&&(l===null?f.firstBaseUpdate=h:l.next=h,f.lastBaseUpdate=u))}if(s!==null){var p=i.baseState;o=0,f=h=u=null,l=s;do{var g=l.lane,S=l.eventTime;if((r&g)===g){f!==null&&(f=f.next={eventTime:S,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var C=t,k=l;switch(g=e,S=n,k.tag){case 1:if(C=k.payload,typeof C=="function"){p=C.call(S,p,g);break e}p=C;break e;case 3:C.flags=C.flags&-65537|128;case 0:if(C=k.payload,g=typeof C=="function"?C.call(S,p,g):C,g==null)break e;p=je({},p,g);break e;case 2:Er=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,g=i.effects,g===null?i.effects=[l]:g.push(l))}else S={eventTime:S,lane:g,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(h=f=S,u=p):f=f.next=S,o|=g;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;g=l,l=g.next,g.next=null,i.lastBaseUpdate=g,i.shared.pending=null}}while(!0);if(f===null&&(u=p),i.baseState=u,i.firstBaseUpdate=h,i.lastBaseUpdate=f,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Mi|=o,t.lanes=o,t.memoizedState=p}}function bg(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error($(191,i));i.call(r)}}}var Wa={},$n=ri(Wa),Sa=ri(Wa),xa=ri(Wa);function Si(t){if(t===Wa)throw Error($(174));return t}function zf(t,e){switch(Pe(xa,e),Pe(Sa,t),Pe($n,Wa),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:ad(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=ad(e,t)}be($n),Pe($n,e)}function Ws(){be($n),be(Sa),be(xa)}function c_(t){Si(xa.current);var e=Si($n.current),n=ad(e,t.type);e!==n&&(Pe(Sa,t),Pe($n,n))}function $f(t){Sa.current===t&&(be($n),be(Sa))}var Fe=ri(0);function Nu(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Ph=[];function qf(){for(var t=0;t<Ph.length;t++)Ph[t]._workInProgressVersionPrimary=null;Ph.length=0}var tu=hr.ReactCurrentDispatcher,Rh=hr.ReactCurrentBatchConfig,Fi=0,Le=null,Ze=null,it=null,Ou=!1,ra=!1,Pa=0,iA=0;function yt(){throw Error($(321))}function Kf(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Cn(t[n],e[n]))return!1;return!0}function Gf(t,e,n,r,i,s){if(Fi=s,Le=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,tu.current=t===null||t.memoizedState===null?lA:uA,t=n(r,i),ra){s=0;do{if(ra=!1,Pa=0,25<=s)throw Error($(301));s+=1,it=Ze=null,e.updateQueue=null,tu.current=cA,t=n(r,i)}while(ra)}if(tu.current=Fu,e=Ze!==null&&Ze.next!==null,Fi=0,it=Ze=Le=null,Ou=!1,e)throw Error($(300));return t}function Qf(){var t=Pa!==0;return Pa=0,t}function Dn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return it===null?Le.memoizedState=it=t:it=it.next=t,it}function mn(){if(Ze===null){var t=Le.alternate;t=t!==null?t.memoizedState:null}else t=Ze.next;var e=it===null?Le.memoizedState:it.next;if(e!==null)it=e,Ze=t;else{if(t===null)throw Error($(310));Ze=t,t={memoizedState:Ze.memoizedState,baseState:Ze.baseState,baseQueue:Ze.baseQueue,queue:Ze.queue,next:null},it===null?Le.memoizedState=it=t:it=it.next=t}return it}function Ra(t,e){return typeof e=="function"?e(t):e}function Ch(t){var e=mn(),n=e.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=t;var r=Ze,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var l=o=null,u=null,h=s;do{var f=h.lane;if((Fi&f)===f)u!==null&&(u=u.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),r=h.hasEagerState?h.eagerState:t(r,h.action);else{var p={lane:f,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};u===null?(l=u=p,o=r):u=u.next=p,Le.lanes|=f,Mi|=f}h=h.next}while(h!==null&&h!==s);u===null?o=r:u.next=l,Cn(r,e.memoizedState)||(Ft=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Le.lanes|=s,Mi|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function kh(t){var e=mn(),n=e.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Cn(s,e.memoizedState)||(Ft=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function h_(){}function d_(t,e){var n=Le,r=mn(),i=e(),s=!Cn(r.memoizedState,i);if(s&&(r.memoizedState=i,Ft=!0),r=r.queue,Hf(m_.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||it!==null&&it.memoizedState.tag&1){if(n.flags|=2048,Ca(9,p_.bind(null,n,r,i,e),void 0,null),st===null)throw Error($(349));Fi&30||f_(n,e,i)}return i}function f_(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Le.updateQueue,e===null?(e={lastEffect:null,stores:null},Le.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function p_(t,e,n,r){e.value=n,e.getSnapshot=r,g_(e)&&y_(t)}function m_(t,e,n){return n(function(){g_(e)&&y_(t)})}function g_(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Cn(t,n)}catch{return!0}}function y_(t){var e=ar(t,1);e!==null&&Pn(e,t,1,-1)}function Dg(t){var e=Dn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ra,lastRenderedState:t},e.queue=t,t=t.dispatch=aA.bind(null,Le,t),[e.memoizedState,t]}function Ca(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Le.updateQueue,e===null?(e={lastEffect:null,stores:null},Le.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function v_(){return mn().memoizedState}function nu(t,e,n,r){var i=Dn();Le.flags|=t,i.memoizedState=Ca(1|e,n,void 0,r===void 0?null:r)}function gc(t,e,n,r){var i=mn();r=r===void 0?null:r;var s=void 0;if(Ze!==null){var o=Ze.memoizedState;if(s=o.destroy,r!==null&&Kf(r,o.deps)){i.memoizedState=Ca(e,n,s,r);return}}Le.flags|=t,i.memoizedState=Ca(1|e,n,s,r)}function Vg(t,e){return nu(8390656,8,t,e)}function Hf(t,e){return gc(2048,8,t,e)}function __(t,e){return gc(4,2,t,e)}function w_(t,e){return gc(4,4,t,e)}function E_(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function I_(t,e,n){return n=n!=null?n.concat([t]):null,gc(4,4,E_.bind(null,e,t),n)}function Wf(){}function T_(t,e){var n=mn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Kf(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function A_(t,e){var n=mn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Kf(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function S_(t,e,n){return Fi&21?(Cn(n,e)||(n=k0(),Le.lanes|=n,Mi|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ft=!0),t.memoizedState=n)}function sA(t,e){var n=we;we=n!==0&&4>n?n:4,t(!0);var r=Rh.transition;Rh.transition={};try{t(!1),e()}finally{we=n,Rh.transition=r}}function x_(){return mn().memoizedState}function oA(t,e,n){var r=$r(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},P_(t))R_(e,n);else if(n=l_(t,e,n,r),n!==null){var i=Pt();Pn(n,t,r,i),C_(n,e,r)}}function aA(t,e,n){var r=$r(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(P_(t))R_(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,l=s(o,n);if(i.hasEagerState=!0,i.eagerState=l,Cn(l,o)){var u=e.interleaved;u===null?(i.next=i,Bf(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}n=l_(t,e,i,r),n!==null&&(i=Pt(),Pn(n,t,r,i),C_(n,e,r))}}function P_(t){var e=t.alternate;return t===Le||e!==null&&e===Le}function R_(t,e){ra=Ou=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function C_(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,xf(t,n)}}var Fu={readContext:pn,useCallback:yt,useContext:yt,useEffect:yt,useImperativeHandle:yt,useInsertionEffect:yt,useLayoutEffect:yt,useMemo:yt,useReducer:yt,useRef:yt,useState:yt,useDebugValue:yt,useDeferredValue:yt,useTransition:yt,useMutableSource:yt,useSyncExternalStore:yt,useId:yt,unstable_isNewReconciler:!1},lA={readContext:pn,useCallback:function(t,e){return Dn().memoizedState=[t,e===void 0?null:e],t},useContext:pn,useEffect:Vg,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,nu(4194308,4,E_.bind(null,e,t),n)},useLayoutEffect:function(t,e){return nu(4194308,4,t,e)},useInsertionEffect:function(t,e){return nu(4,2,t,e)},useMemo:function(t,e){var n=Dn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Dn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=oA.bind(null,Le,t),[r.memoizedState,t]},useRef:function(t){var e=Dn();return t={current:t},e.memoizedState=t},useState:Dg,useDebugValue:Wf,useDeferredValue:function(t){return Dn().memoizedState=t},useTransition:function(){var t=Dg(!1),e=t[0];return t=sA.bind(null,t[1]),Dn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Le,i=Dn();if(Ne){if(n===void 0)throw Error($(407));n=n()}else{if(n=e(),st===null)throw Error($(349));Fi&30||f_(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,Vg(m_.bind(null,r,s,t),[t]),r.flags|=2048,Ca(9,p_.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Dn(),e=st.identifierPrefix;if(Ne){var n=er,r=Zn;n=(r&~(1<<32-xn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Pa++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=iA++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},uA={readContext:pn,useCallback:T_,useContext:pn,useEffect:Hf,useImperativeHandle:I_,useInsertionEffect:__,useLayoutEffect:w_,useMemo:A_,useReducer:Ch,useRef:v_,useState:function(){return Ch(Ra)},useDebugValue:Wf,useDeferredValue:function(t){var e=mn();return S_(e,Ze.memoizedState,t)},useTransition:function(){var t=Ch(Ra)[0],e=mn().memoizedState;return[t,e]},useMutableSource:h_,useSyncExternalStore:d_,useId:x_,unstable_isNewReconciler:!1},cA={readContext:pn,useCallback:T_,useContext:pn,useEffect:Hf,useImperativeHandle:I_,useInsertionEffect:__,useLayoutEffect:w_,useMemo:A_,useReducer:kh,useRef:v_,useState:function(){return kh(Ra)},useDebugValue:Wf,useDeferredValue:function(t){var e=mn();return Ze===null?e.memoizedState=t:S_(e,Ze.memoizedState,t)},useTransition:function(){var t=kh(Ra)[0],e=mn().memoizedState;return[t,e]},useMutableSource:h_,useSyncExternalStore:d_,useId:x_,unstable_isNewReconciler:!1};function _n(t,e){if(t&&t.defaultProps){e=je({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Rd(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:je({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var yc={isMounted:function(t){return(t=t._reactInternals)?Wi(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Pt(),i=$r(t),s=tr(r,i);s.payload=e,n!=null&&(s.callback=n),e=Ur(t,s,i),e!==null&&(Pn(e,t,i,r),eu(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Pt(),i=$r(t),s=tr(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Ur(t,s,i),e!==null&&(Pn(e,t,i,r),eu(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Pt(),r=$r(t),i=tr(n,r);i.tag=2,e!=null&&(i.callback=e),e=Ur(t,i,r),e!==null&&(Pn(e,t,r,n),eu(e,t,r))}};function Ng(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Ea(n,r)||!Ea(i,s):!0}function k_(t,e,n){var r=!1,i=Xr,s=e.contextType;return typeof s=="object"&&s!==null?s=pn(s):(i=Lt(e)?Ni:It.current,r=e.contextTypes,s=(r=r!=null)?Gs(t,i):Xr),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=yc,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function Og(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&yc.enqueueReplaceState(e,e.state,null)}function Cd(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Uf(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=pn(s):(s=Lt(e)?Ni:It.current,i.context=Gs(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Rd(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&yc.enqueueReplaceState(i,i.state,null),Vu(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Ys(t,e){try{var n="",r=e;do n+=LI(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function bh(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function kd(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var hA=typeof WeakMap=="function"?WeakMap:Map;function b_(t,e,n){n=tr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Lu||(Lu=!0,Bd=r),kd(t,e)},n}function D_(t,e,n){n=tr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){kd(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){kd(t,e),typeof r!="function"&&(zr===null?zr=new Set([this]):zr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Fg(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new hA;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=SA.bind(null,t,e,n),e.then(t,t))}function Mg(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Lg(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=tr(-1,1),e.tag=2,Ur(n,e,1))),n.lanes|=1),t)}var dA=hr.ReactCurrentOwner,Ft=!1;function St(t,e,n,r){e.child=t===null?a_(e,null,n,r):Hs(e,t.child,n,r)}function jg(t,e,n,r,i){n=n.render;var s=e.ref;return Ns(e,i),r=Gf(t,e,n,r,s,i),n=Qf(),t!==null&&!Ft?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,lr(t,e,i)):(Ne&&n&&Nf(e),e.flags|=1,St(t,e,r,i),e.child)}function Bg(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!rp(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,V_(t,e,s,r,i)):(t=ou(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Ea,n(o,r)&&t.ref===e.ref)return lr(t,e,i)}return e.flags|=1,t=qr(s,r),t.ref=e.ref,t.return=e,e.child=t}function V_(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Ea(s,r)&&t.ref===e.ref)if(Ft=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Ft=!0);else return e.lanes=t.lanes,lr(t,e,i)}return bd(t,e,n,r,i)}function N_(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Pe(Ps,Kt),Kt|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Pe(Ps,Kt),Kt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Pe(Ps,Kt),Kt|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Pe(Ps,Kt),Kt|=r;return St(t,e,i,n),e.child}function O_(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function bd(t,e,n,r,i){var s=Lt(n)?Ni:It.current;return s=Gs(e,s),Ns(e,i),n=Gf(t,e,n,r,s,i),r=Qf(),t!==null&&!Ft?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,lr(t,e,i)):(Ne&&r&&Nf(e),e.flags|=1,St(t,e,n,i),e.child)}function Ug(t,e,n,r,i){if(Lt(n)){var s=!0;Ru(e)}else s=!1;if(Ns(e,i),e.stateNode===null)ru(t,e),k_(e,n,r),Cd(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var u=o.context,h=n.contextType;typeof h=="object"&&h!==null?h=pn(h):(h=Lt(n)?Ni:It.current,h=Gs(e,h));var f=n.getDerivedStateFromProps,p=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";p||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||u!==h)&&Og(e,o,r,h),Er=!1;var g=e.memoizedState;o.state=g,Vu(e,r,o,i),u=e.memoizedState,l!==r||g!==u||Mt.current||Er?(typeof f=="function"&&(Rd(e,n,f,r),u=e.memoizedState),(l=Er||Ng(e,n,l,r,g,u,h))?(p||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=h,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,u_(t,e),l=e.memoizedProps,h=e.type===e.elementType?l:_n(e.type,l),o.props=h,p=e.pendingProps,g=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=pn(u):(u=Lt(n)?Ni:It.current,u=Gs(e,u));var S=n.getDerivedStateFromProps;(f=typeof S=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==p||g!==u)&&Og(e,o,r,u),Er=!1,g=e.memoizedState,o.state=g,Vu(e,r,o,i);var C=e.memoizedState;l!==p||g!==C||Mt.current||Er?(typeof S=="function"&&(Rd(e,n,S,r),C=e.memoizedState),(h=Er||Ng(e,n,h,r,g,C,u)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,C,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,C,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=C),o.props=r,o.state=C,o.context=u,r=h):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return Dd(t,e,n,r,s,i)}function Dd(t,e,n,r,i,s){O_(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&xg(e,n,!1),lr(t,e,s);r=e.stateNode,dA.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Hs(e,t.child,null,s),e.child=Hs(e,null,l,s)):St(t,e,l,s),e.memoizedState=r.state,i&&xg(e,n,!0),e.child}function F_(t){var e=t.stateNode;e.pendingContext?Sg(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Sg(t,e.context,!1),zf(t,e.containerInfo)}function zg(t,e,n,r,i){return Qs(),Ff(i),e.flags|=256,St(t,e,n,r),e.child}var Vd={dehydrated:null,treeContext:null,retryLane:0};function Nd(t){return{baseLanes:t,cachePool:null,transitions:null}}function M_(t,e,n){var r=e.pendingProps,i=Fe.current,s=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Pe(Fe,i&1),t===null)return xd(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=wc(o,r,0,null),t=Vi(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Nd(n),e.memoizedState=Vd,t):Yf(e,o));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return fA(t,e,o,r,l,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,l=i.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=qr(i,u),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?s=qr(l,s):(s=Vi(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Nd(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Vd,r}return s=t.child,t=s.sibling,r=qr(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Yf(t,e){return e=wc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ml(t,e,n,r){return r!==null&&Ff(r),Hs(e,t.child,null,n),t=Yf(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function fA(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=bh(Error($(422))),Ml(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=wc({mode:"visible",children:r.children},i,0,null),s=Vi(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Hs(e,t.child,null,o),e.child.memoizedState=Nd(o),e.memoizedState=Vd,s);if(!(e.mode&1))return Ml(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,s=Error($(419)),r=bh(s,r,void 0),Ml(t,e,o,r)}if(l=(o&t.childLanes)!==0,Ft||l){if(r=st,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,ar(t,i),Pn(r,t,i,-1))}return np(),r=bh(Error($(421))),Ml(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=xA.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Ht=Br(i.nextSibling),Yt=e,Ne=!0,Tn=null,t!==null&&(un[cn++]=Zn,un[cn++]=er,un[cn++]=Oi,Zn=t.id,er=t.overflow,Oi=e),e=Yf(e,r.children),e.flags|=4096,e)}function $g(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Pd(t.return,e,n)}function Dh(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function L_(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(St(t,e,r.children,n),r=Fe.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&$g(t,n,e);else if(t.tag===19)$g(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Pe(Fe,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Nu(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Dh(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Nu(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Dh(e,!0,n,null,s);break;case"together":Dh(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ru(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function lr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Mi|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error($(153));if(e.child!==null){for(t=e.child,n=qr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=qr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function pA(t,e,n){switch(e.tag){case 3:F_(e),Qs();break;case 5:c_(e);break;case 1:Lt(e.type)&&Ru(e);break;case 4:zf(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Pe(bu,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Pe(Fe,Fe.current&1),e.flags|=128,null):n&e.child.childLanes?M_(t,e,n):(Pe(Fe,Fe.current&1),t=lr(t,e,n),t!==null?t.sibling:null);Pe(Fe,Fe.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return L_(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Pe(Fe,Fe.current),r)break;return null;case 22:case 23:return e.lanes=0,N_(t,e,n)}return lr(t,e,n)}var j_,Od,B_,U_;j_=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Od=function(){};B_=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Si($n.current);var s=null;switch(n){case"input":i=rd(t,i),r=rd(t,r),s=[];break;case"select":i=je({},i,{value:void 0}),r=je({},r,{value:void 0}),s=[];break;case"textarea":i=od(t,i),r=od(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=xu)}ld(n,r);var o;n=null;for(h in i)if(!r.hasOwnProperty(h)&&i.hasOwnProperty(h)&&i[h]!=null)if(h==="style"){var l=i[h];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(pa.hasOwnProperty(h)?s||(s=[]):(s=s||[]).push(h,null));for(h in r){var u=r[h];if(l=i!=null?i[h]:void 0,r.hasOwnProperty(h)&&u!==l&&(u!=null||l!=null))if(h==="style")if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(s||(s=[]),s.push(h,n)),n=u;else h==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(s=s||[]).push(h,u)):h==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(h,""+u):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(pa.hasOwnProperty(h)?(u!=null&&h==="onScroll"&&Ce("scroll",t),s||l===u||(s=[])):(s=s||[]).push(h,u))}n&&(s=s||[]).push("style",n);var h=s;(e.updateQueue=h)&&(e.flags|=4)}};U_=function(t,e,n,r){n!==r&&(e.flags|=4)};function Fo(t,e){if(!Ne)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function vt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function mA(t,e,n){var r=e.pendingProps;switch(Of(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return vt(e),null;case 1:return Lt(e.type)&&Pu(),vt(e),null;case 3:return r=e.stateNode,Ws(),be(Mt),be(It),qf(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Ol(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Tn!==null&&($d(Tn),Tn=null))),Od(t,e),vt(e),null;case 5:$f(e);var i=Si(xa.current);if(n=e.type,t!==null&&e.stateNode!=null)B_(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error($(166));return vt(e),null}if(t=Si($n.current),Ol(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Mn]=e,r[Aa]=s,t=(e.mode&1)!==0,n){case"dialog":Ce("cancel",r),Ce("close",r);break;case"iframe":case"object":case"embed":Ce("load",r);break;case"video":case"audio":for(i=0;i<Wo.length;i++)Ce(Wo[i],r);break;case"source":Ce("error",r);break;case"img":case"image":case"link":Ce("error",r),Ce("load",r);break;case"details":Ce("toggle",r);break;case"input":Jm(r,s),Ce("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ce("invalid",r);break;case"textarea":eg(r,s),Ce("invalid",r)}ld(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="children"?typeof l=="string"?r.textContent!==l&&(s.suppressHydrationWarning!==!0&&Nl(r.textContent,l,t),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&Nl(r.textContent,l,t),i=["children",""+l]):pa.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Ce("scroll",r)}switch(n){case"input":xl(r),Zm(r,s,!0);break;case"textarea":xl(r),tg(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=xu)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=m0(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Mn]=e,t[Aa]=r,j_(t,e,!1,!1),e.stateNode=t;e:{switch(o=ud(n,r),n){case"dialog":Ce("cancel",t),Ce("close",t),i=r;break;case"iframe":case"object":case"embed":Ce("load",t),i=r;break;case"video":case"audio":for(i=0;i<Wo.length;i++)Ce(Wo[i],t);i=r;break;case"source":Ce("error",t),i=r;break;case"img":case"image":case"link":Ce("error",t),Ce("load",t),i=r;break;case"details":Ce("toggle",t),i=r;break;case"input":Jm(t,r),i=rd(t,r),Ce("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=je({},r,{value:void 0}),Ce("invalid",t);break;case"textarea":eg(t,r),i=od(t,r),Ce("invalid",t);break;default:i=r}ld(n,i),l=i;for(s in l)if(l.hasOwnProperty(s)){var u=l[s];s==="style"?v0(t,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&g0(t,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&ma(t,u):typeof u=="number"&&ma(t,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(pa.hasOwnProperty(s)?u!=null&&s==="onScroll"&&Ce("scroll",t):u!=null&&wf(t,s,u,o))}switch(n){case"input":xl(t),Zm(t,r,!1);break;case"textarea":xl(t),tg(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Yr(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?ks(t,!!r.multiple,s,!1):r.defaultValue!=null&&ks(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=xu)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return vt(e),null;case 6:if(t&&e.stateNode!=null)U_(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error($(166));if(n=Si(xa.current),Si($n.current),Ol(e)){if(r=e.stateNode,n=e.memoizedProps,r[Mn]=e,(s=r.nodeValue!==n)&&(t=Yt,t!==null))switch(t.tag){case 3:Nl(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Nl(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Mn]=e,e.stateNode=r}return vt(e),null;case 13:if(be(Fe),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ne&&Ht!==null&&e.mode&1&&!(e.flags&128))s_(),Qs(),e.flags|=98560,s=!1;else if(s=Ol(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error($(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error($(317));s[Mn]=e}else Qs(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;vt(e),s=!1}else Tn!==null&&($d(Tn),Tn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Fe.current&1?tt===0&&(tt=3):np())),e.updateQueue!==null&&(e.flags|=4),vt(e),null);case 4:return Ws(),Od(t,e),t===null&&Ia(e.stateNode.containerInfo),vt(e),null;case 10:return jf(e.type._context),vt(e),null;case 17:return Lt(e.type)&&Pu(),vt(e),null;case 19:if(be(Fe),s=e.memoizedState,s===null)return vt(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Fo(s,!1);else{if(tt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Nu(t),o!==null){for(e.flags|=128,Fo(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Pe(Fe,Fe.current&1|2),e.child}t=t.sibling}s.tail!==null&&Qe()>Xs&&(e.flags|=128,r=!0,Fo(s,!1),e.lanes=4194304)}else{if(!r)if(t=Nu(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Fo(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Ne)return vt(e),null}else 2*Qe()-s.renderingStartTime>Xs&&n!==1073741824&&(e.flags|=128,r=!0,Fo(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Qe(),e.sibling=null,n=Fe.current,Pe(Fe,r?n&1|2:n&1),e):(vt(e),null);case 22:case 23:return tp(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Kt&1073741824&&(vt(e),e.subtreeFlags&6&&(e.flags|=8192)):vt(e),null;case 24:return null;case 25:return null}throw Error($(156,e.tag))}function gA(t,e){switch(Of(e),e.tag){case 1:return Lt(e.type)&&Pu(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ws(),be(Mt),be(It),qf(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return $f(e),null;case 13:if(be(Fe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error($(340));Qs()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return be(Fe),null;case 4:return Ws(),null;case 10:return jf(e.type._context),null;case 22:case 23:return tp(),null;case 24:return null;default:return null}}var Ll=!1,Et=!1,yA=typeof WeakSet=="function"?WeakSet:Set,Y=null;function xs(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){$e(t,e,r)}else n.current=null}function Fd(t,e,n){try{n()}catch(r){$e(t,e,r)}}var qg=!1;function vA(t,e){if(_d=Tu,t=G0(),Vf(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,l=-1,u=-1,h=0,f=0,p=t,g=null;t:for(;;){for(var S;p!==n||i!==0&&p.nodeType!==3||(l=o+i),p!==s||r!==0&&p.nodeType!==3||(u=o+r),p.nodeType===3&&(o+=p.nodeValue.length),(S=p.firstChild)!==null;)g=p,p=S;for(;;){if(p===t)break t;if(g===n&&++h===i&&(l=o),g===s&&++f===r&&(u=o),(S=p.nextSibling)!==null)break;p=g,g=p.parentNode}p=S}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(wd={focusedElem:t,selectionRange:n},Tu=!1,Y=e;Y!==null;)if(e=Y,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Y=t;else for(;Y!==null;){e=Y;try{var C=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(C!==null){var k=C.memoizedProps,j=C.memoizedState,A=e.stateNode,v=A.getSnapshotBeforeUpdate(e.elementType===e.type?k:_n(e.type,k),j);A.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var I=e.stateNode.containerInfo;I.nodeType===1?I.textContent="":I.nodeType===9&&I.documentElement&&I.removeChild(I.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error($(163))}}catch(N){$e(e,e.return,N)}if(t=e.sibling,t!==null){t.return=e.return,Y=t;break}Y=e.return}return C=qg,qg=!1,C}function ia(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Fd(e,n,s)}i=i.next}while(i!==r)}}function vc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Md(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function z_(t){var e=t.alternate;e!==null&&(t.alternate=null,z_(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Mn],delete e[Aa],delete e[Td],delete e[eA],delete e[tA])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function $_(t){return t.tag===5||t.tag===3||t.tag===4}function Kg(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||$_(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Ld(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=xu));else if(r!==4&&(t=t.child,t!==null))for(Ld(t,e,n),t=t.sibling;t!==null;)Ld(t,e,n),t=t.sibling}function jd(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(jd(t,e,n),t=t.sibling;t!==null;)jd(t,e,n),t=t.sibling}var lt=null,In=!1;function gr(t,e,n){for(n=n.child;n!==null;)q_(t,e,n),n=n.sibling}function q_(t,e,n){if(zn&&typeof zn.onCommitFiberUnmount=="function")try{zn.onCommitFiberUnmount(cc,n)}catch{}switch(n.tag){case 5:Et||xs(n,e);case 6:var r=lt,i=In;lt=null,gr(t,e,n),lt=r,In=i,lt!==null&&(In?(t=lt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):lt.removeChild(n.stateNode));break;case 18:lt!==null&&(In?(t=lt,n=n.stateNode,t.nodeType===8?Sh(t.parentNode,n):t.nodeType===1&&Sh(t,n),_a(t)):Sh(lt,n.stateNode));break;case 4:r=lt,i=In,lt=n.stateNode.containerInfo,In=!0,gr(t,e,n),lt=r,In=i;break;case 0:case 11:case 14:case 15:if(!Et&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Fd(n,e,o),i=i.next}while(i!==r)}gr(t,e,n);break;case 1:if(!Et&&(xs(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){$e(n,e,l)}gr(t,e,n);break;case 21:gr(t,e,n);break;case 22:n.mode&1?(Et=(r=Et)||n.memoizedState!==null,gr(t,e,n),Et=r):gr(t,e,n);break;default:gr(t,e,n)}}function Gg(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new yA),e.forEach(function(r){var i=PA.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function vn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:lt=l.stateNode,In=!1;break e;case 3:lt=l.stateNode.containerInfo,In=!0;break e;case 4:lt=l.stateNode.containerInfo,In=!0;break e}l=l.return}if(lt===null)throw Error($(160));q_(s,o,i),lt=null,In=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(h){$e(i,e,h)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)K_(e,t),e=e.sibling}function K_(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(vn(e,t),bn(t),r&4){try{ia(3,t,t.return),vc(3,t)}catch(k){$e(t,t.return,k)}try{ia(5,t,t.return)}catch(k){$e(t,t.return,k)}}break;case 1:vn(e,t),bn(t),r&512&&n!==null&&xs(n,n.return);break;case 5:if(vn(e,t),bn(t),r&512&&n!==null&&xs(n,n.return),t.flags&32){var i=t.stateNode;try{ma(i,"")}catch(k){$e(t,t.return,k)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&f0(i,s),ud(l,o);var h=ud(l,s);for(o=0;o<u.length;o+=2){var f=u[o],p=u[o+1];f==="style"?v0(i,p):f==="dangerouslySetInnerHTML"?g0(i,p):f==="children"?ma(i,p):wf(i,f,p,h)}switch(l){case"input":id(i,s);break;case"textarea":p0(i,s);break;case"select":var g=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var S=s.value;S!=null?ks(i,!!s.multiple,S,!1):g!==!!s.multiple&&(s.defaultValue!=null?ks(i,!!s.multiple,s.defaultValue,!0):ks(i,!!s.multiple,s.multiple?[]:"",!1))}i[Aa]=s}catch(k){$e(t,t.return,k)}}break;case 6:if(vn(e,t),bn(t),r&4){if(t.stateNode===null)throw Error($(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(k){$e(t,t.return,k)}}break;case 3:if(vn(e,t),bn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{_a(e.containerInfo)}catch(k){$e(t,t.return,k)}break;case 4:vn(e,t),bn(t);break;case 13:vn(e,t),bn(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Zf=Qe())),r&4&&Gg(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(Et=(h=Et)||f,vn(e,t),Et=h):vn(e,t),bn(t),r&8192){if(h=t.memoizedState!==null,(t.stateNode.isHidden=h)&&!f&&t.mode&1)for(Y=t,f=t.child;f!==null;){for(p=Y=f;Y!==null;){switch(g=Y,S=g.child,g.tag){case 0:case 11:case 14:case 15:ia(4,g,g.return);break;case 1:xs(g,g.return);var C=g.stateNode;if(typeof C.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,C.props=e.memoizedProps,C.state=e.memoizedState,C.componentWillUnmount()}catch(k){$e(r,n,k)}}break;case 5:xs(g,g.return);break;case 22:if(g.memoizedState!==null){Hg(p);continue}}S!==null?(S.return=g,Y=S):Hg(p)}f=f.sibling}e:for(f=null,p=t;;){if(p.tag===5){if(f===null){f=p;try{i=p.stateNode,h?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=p.stateNode,u=p.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=y0("display",o))}catch(k){$e(t,t.return,k)}}}else if(p.tag===6){if(f===null)try{p.stateNode.nodeValue=h?"":p.memoizedProps}catch(k){$e(t,t.return,k)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;f===p&&(f=null),p=p.return}f===p&&(f=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:vn(e,t),bn(t),r&4&&Gg(t);break;case 21:break;default:vn(e,t),bn(t)}}function bn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if($_(n)){var r=n;break e}n=n.return}throw Error($(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(ma(i,""),r.flags&=-33);var s=Kg(t);jd(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,l=Kg(t);Ld(t,l,o);break;default:throw Error($(161))}}catch(u){$e(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function _A(t,e,n){Y=t,G_(t)}function G_(t,e,n){for(var r=(t.mode&1)!==0;Y!==null;){var i=Y,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Ll;if(!o){var l=i.alternate,u=l!==null&&l.memoizedState!==null||Et;l=Ll;var h=Et;if(Ll=o,(Et=u)&&!h)for(Y=i;Y!==null;)o=Y,u=o.child,o.tag===22&&o.memoizedState!==null?Wg(i):u!==null?(u.return=o,Y=u):Wg(i);for(;s!==null;)Y=s,G_(s),s=s.sibling;Y=i,Ll=l,Et=h}Qg(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Y=s):Qg(t)}}function Qg(t){for(;Y!==null;){var e=Y;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Et||vc(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Et)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:_n(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&bg(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}bg(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var h=e.alternate;if(h!==null){var f=h.memoizedState;if(f!==null){var p=f.dehydrated;p!==null&&_a(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error($(163))}Et||e.flags&512&&Md(e)}catch(g){$e(e,e.return,g)}}if(e===t){Y=null;break}if(n=e.sibling,n!==null){n.return=e.return,Y=n;break}Y=e.return}}function Hg(t){for(;Y!==null;){var e=Y;if(e===t){Y=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Y=n;break}Y=e.return}}function Wg(t){for(;Y!==null;){var e=Y;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{vc(4,e)}catch(u){$e(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(u){$e(e,i,u)}}var s=e.return;try{Md(e)}catch(u){$e(e,s,u)}break;case 5:var o=e.return;try{Md(e)}catch(u){$e(e,o,u)}}}catch(u){$e(e,e.return,u)}if(e===t){Y=null;break}var l=e.sibling;if(l!==null){l.return=e.return,Y=l;break}Y=e.return}}var wA=Math.ceil,Mu=hr.ReactCurrentDispatcher,Xf=hr.ReactCurrentOwner,fn=hr.ReactCurrentBatchConfig,ge=0,st=null,Xe=null,ft=0,Kt=0,Ps=ri(0),tt=0,ka=null,Mi=0,_c=0,Jf=0,sa=null,Ot=null,Zf=0,Xs=1/0,Yn=null,Lu=!1,Bd=null,zr=null,jl=!1,Nr=null,ju=0,oa=0,Ud=null,iu=-1,su=0;function Pt(){return ge&6?Qe():iu!==-1?iu:iu=Qe()}function $r(t){return t.mode&1?ge&2&&ft!==0?ft&-ft:rA.transition!==null?(su===0&&(su=k0()),su):(t=we,t!==0||(t=window.event,t=t===void 0?16:M0(t.type)),t):1}function Pn(t,e,n,r){if(50<oa)throw oa=0,Ud=null,Error($(185));Ga(t,n,r),(!(ge&2)||t!==st)&&(t===st&&(!(ge&2)&&(_c|=n),tt===4&&Tr(t,ft)),jt(t,r),n===1&&ge===0&&!(e.mode&1)&&(Xs=Qe()+500,mc&&ii()))}function jt(t,e){var n=t.callbackNode;rT(t,e);var r=Iu(t,t===st?ft:0);if(r===0)n!==null&&ig(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&ig(n),e===1)t.tag===0?nA(Yg.bind(null,t)):n_(Yg.bind(null,t)),JT(function(){!(ge&6)&&ii()}),n=null;else{switch(b0(r)){case 1:n=Sf;break;case 4:n=R0;break;case 16:n=Eu;break;case 536870912:n=C0;break;default:n=Eu}n=ew(n,Q_.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Q_(t,e){if(iu=-1,su=0,ge&6)throw Error($(327));var n=t.callbackNode;if(Os()&&t.callbackNode!==n)return null;var r=Iu(t,t===st?ft:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Bu(t,r);else{e=r;var i=ge;ge|=2;var s=W_();(st!==t||ft!==e)&&(Yn=null,Xs=Qe()+500,Di(t,e));do try{TA();break}catch(l){H_(t,l)}while(!0);Lf(),Mu.current=s,ge=i,Xe!==null?e=0:(st=null,ft=0,e=tt)}if(e!==0){if(e===2&&(i=pd(t),i!==0&&(r=i,e=zd(t,i))),e===1)throw n=ka,Di(t,0),Tr(t,r),jt(t,Qe()),n;if(e===6)Tr(t,r);else{if(i=t.current.alternate,!(r&30)&&!EA(i)&&(e=Bu(t,r),e===2&&(s=pd(t),s!==0&&(r=s,e=zd(t,s))),e===1))throw n=ka,Di(t,0),Tr(t,r),jt(t,Qe()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error($(345));case 2:mi(t,Ot,Yn);break;case 3:if(Tr(t,r),(r&130023424)===r&&(e=Zf+500-Qe(),10<e)){if(Iu(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Pt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Id(mi.bind(null,t,Ot,Yn),e);break}mi(t,Ot,Yn);break;case 4:if(Tr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-xn(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Qe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*wA(r/1960))-r,10<r){t.timeoutHandle=Id(mi.bind(null,t,Ot,Yn),r);break}mi(t,Ot,Yn);break;case 5:mi(t,Ot,Yn);break;default:throw Error($(329))}}}return jt(t,Qe()),t.callbackNode===n?Q_.bind(null,t):null}function zd(t,e){var n=sa;return t.current.memoizedState.isDehydrated&&(Di(t,e).flags|=256),t=Bu(t,e),t!==2&&(e=Ot,Ot=n,e!==null&&$d(e)),t}function $d(t){Ot===null?Ot=t:Ot.push.apply(Ot,t)}function EA(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Cn(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Tr(t,e){for(e&=~Jf,e&=~_c,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-xn(e),r=1<<n;t[n]=-1,e&=~r}}function Yg(t){if(ge&6)throw Error($(327));Os();var e=Iu(t,0);if(!(e&1))return jt(t,Qe()),null;var n=Bu(t,e);if(t.tag!==0&&n===2){var r=pd(t);r!==0&&(e=r,n=zd(t,r))}if(n===1)throw n=ka,Di(t,0),Tr(t,e),jt(t,Qe()),n;if(n===6)throw Error($(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,mi(t,Ot,Yn),jt(t,Qe()),null}function ep(t,e){var n=ge;ge|=1;try{return t(e)}finally{ge=n,ge===0&&(Xs=Qe()+500,mc&&ii())}}function Li(t){Nr!==null&&Nr.tag===0&&!(ge&6)&&Os();var e=ge;ge|=1;var n=fn.transition,r=we;try{if(fn.transition=null,we=1,t)return t()}finally{we=r,fn.transition=n,ge=e,!(ge&6)&&ii()}}function tp(){Kt=Ps.current,be(Ps)}function Di(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,XT(n)),Xe!==null)for(n=Xe.return;n!==null;){var r=n;switch(Of(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Pu();break;case 3:Ws(),be(Mt),be(It),qf();break;case 5:$f(r);break;case 4:Ws();break;case 13:be(Fe);break;case 19:be(Fe);break;case 10:jf(r.type._context);break;case 22:case 23:tp()}n=n.return}if(st=t,Xe=t=qr(t.current,null),ft=Kt=e,tt=0,ka=null,Jf=_c=Mi=0,Ot=sa=null,Ai!==null){for(e=0;e<Ai.length;e++)if(n=Ai[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Ai=null}return t}function H_(t,e){do{var n=Xe;try{if(Lf(),tu.current=Fu,Ou){for(var r=Le.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Ou=!1}if(Fi=0,it=Ze=Le=null,ra=!1,Pa=0,Xf.current=null,n===null||n.return===null){tt=1,ka=e,Xe=null;break}e:{var s=t,o=n.return,l=n,u=e;if(e=ft,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var h=u,f=l,p=f.tag;if(!(f.mode&1)&&(p===0||p===11||p===15)){var g=f.alternate;g?(f.updateQueue=g.updateQueue,f.memoizedState=g.memoizedState,f.lanes=g.lanes):(f.updateQueue=null,f.memoizedState=null)}var S=Mg(o);if(S!==null){S.flags&=-257,Lg(S,o,l,s,e),S.mode&1&&Fg(s,h,e),e=S,u=h;var C=e.updateQueue;if(C===null){var k=new Set;k.add(u),e.updateQueue=k}else C.add(u);break e}else{if(!(e&1)){Fg(s,h,e),np();break e}u=Error($(426))}}else if(Ne&&l.mode&1){var j=Mg(o);if(j!==null){!(j.flags&65536)&&(j.flags|=256),Lg(j,o,l,s,e),Ff(Ys(u,l));break e}}s=u=Ys(u,l),tt!==4&&(tt=2),sa===null?sa=[s]:sa.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var A=b_(s,u,e);kg(s,A);break e;case 1:l=u;var v=s.type,I=s.stateNode;if(!(s.flags&128)&&(typeof v.getDerivedStateFromError=="function"||I!==null&&typeof I.componentDidCatch=="function"&&(zr===null||!zr.has(I)))){s.flags|=65536,e&=-e,s.lanes|=e;var N=D_(s,l,e);kg(s,N);break e}}s=s.return}while(s!==null)}X_(n)}catch(L){e=L,Xe===n&&n!==null&&(Xe=n=n.return);continue}break}while(!0)}function W_(){var t=Mu.current;return Mu.current=Fu,t===null?Fu:t}function np(){(tt===0||tt===3||tt===2)&&(tt=4),st===null||!(Mi&268435455)&&!(_c&268435455)||Tr(st,ft)}function Bu(t,e){var n=ge;ge|=2;var r=W_();(st!==t||ft!==e)&&(Yn=null,Di(t,e));do try{IA();break}catch(i){H_(t,i)}while(!0);if(Lf(),ge=n,Mu.current=r,Xe!==null)throw Error($(261));return st=null,ft=0,tt}function IA(){for(;Xe!==null;)Y_(Xe)}function TA(){for(;Xe!==null&&!HI();)Y_(Xe)}function Y_(t){var e=Z_(t.alternate,t,Kt);t.memoizedProps=t.pendingProps,e===null?X_(t):Xe=e,Xf.current=null}function X_(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=gA(n,e),n!==null){n.flags&=32767,Xe=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{tt=6,Xe=null;return}}else if(n=mA(n,e,Kt),n!==null){Xe=n;return}if(e=e.sibling,e!==null){Xe=e;return}Xe=e=t}while(e!==null);tt===0&&(tt=5)}function mi(t,e,n){var r=we,i=fn.transition;try{fn.transition=null,we=1,AA(t,e,n,r)}finally{fn.transition=i,we=r}return null}function AA(t,e,n,r){do Os();while(Nr!==null);if(ge&6)throw Error($(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error($(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(iT(t,s),t===st&&(Xe=st=null,ft=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||jl||(jl=!0,ew(Eu,function(){return Os(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=fn.transition,fn.transition=null;var o=we;we=1;var l=ge;ge|=4,Xf.current=null,vA(t,n),K_(n,t),qT(wd),Tu=!!_d,wd=_d=null,t.current=n,_A(n),WI(),ge=l,we=o,fn.transition=s}else t.current=n;if(jl&&(jl=!1,Nr=t,ju=i),s=t.pendingLanes,s===0&&(zr=null),JI(n.stateNode),jt(t,Qe()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Lu)throw Lu=!1,t=Bd,Bd=null,t;return ju&1&&t.tag!==0&&Os(),s=t.pendingLanes,s&1?t===Ud?oa++:(oa=0,Ud=t):oa=0,ii(),null}function Os(){if(Nr!==null){var t=b0(ju),e=fn.transition,n=we;try{if(fn.transition=null,we=16>t?16:t,Nr===null)var r=!1;else{if(t=Nr,Nr=null,ju=0,ge&6)throw Error($(331));var i=ge;for(ge|=4,Y=t.current;Y!==null;){var s=Y,o=s.child;if(Y.flags&16){var l=s.deletions;if(l!==null){for(var u=0;u<l.length;u++){var h=l[u];for(Y=h;Y!==null;){var f=Y;switch(f.tag){case 0:case 11:case 15:ia(8,f,s)}var p=f.child;if(p!==null)p.return=f,Y=p;else for(;Y!==null;){f=Y;var g=f.sibling,S=f.return;if(z_(f),f===h){Y=null;break}if(g!==null){g.return=S,Y=g;break}Y=S}}}var C=s.alternate;if(C!==null){var k=C.child;if(k!==null){C.child=null;do{var j=k.sibling;k.sibling=null,k=j}while(k!==null)}}Y=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Y=o;else e:for(;Y!==null;){if(s=Y,s.flags&2048)switch(s.tag){case 0:case 11:case 15:ia(9,s,s.return)}var A=s.sibling;if(A!==null){A.return=s.return,Y=A;break e}Y=s.return}}var v=t.current;for(Y=v;Y!==null;){o=Y;var I=o.child;if(o.subtreeFlags&2064&&I!==null)I.return=o,Y=I;else e:for(o=v;Y!==null;){if(l=Y,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:vc(9,l)}}catch(L){$e(l,l.return,L)}if(l===o){Y=null;break e}var N=l.sibling;if(N!==null){N.return=l.return,Y=N;break e}Y=l.return}}if(ge=i,ii(),zn&&typeof zn.onPostCommitFiberRoot=="function")try{zn.onPostCommitFiberRoot(cc,t)}catch{}r=!0}return r}finally{we=n,fn.transition=e}}return!1}function Xg(t,e,n){e=Ys(n,e),e=b_(t,e,1),t=Ur(t,e,1),e=Pt(),t!==null&&(Ga(t,1,e),jt(t,e))}function $e(t,e,n){if(t.tag===3)Xg(t,t,n);else for(;e!==null;){if(e.tag===3){Xg(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(zr===null||!zr.has(r))){t=Ys(n,t),t=D_(e,t,1),e=Ur(e,t,1),t=Pt(),e!==null&&(Ga(e,1,t),jt(e,t));break}}e=e.return}}function SA(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Pt(),t.pingedLanes|=t.suspendedLanes&n,st===t&&(ft&n)===n&&(tt===4||tt===3&&(ft&130023424)===ft&&500>Qe()-Zf?Di(t,0):Jf|=n),jt(t,e)}function J_(t,e){e===0&&(t.mode&1?(e=Cl,Cl<<=1,!(Cl&130023424)&&(Cl=4194304)):e=1);var n=Pt();t=ar(t,e),t!==null&&(Ga(t,e,n),jt(t,n))}function xA(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),J_(t,n)}function PA(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error($(314))}r!==null&&r.delete(e),J_(t,n)}var Z_;Z_=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Mt.current)Ft=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ft=!1,pA(t,e,n);Ft=!!(t.flags&131072)}else Ft=!1,Ne&&e.flags&1048576&&r_(e,ku,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;ru(t,e),t=e.pendingProps;var i=Gs(e,It.current);Ns(e,n),i=Gf(null,e,r,t,i,n);var s=Qf();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Lt(r)?(s=!0,Ru(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Uf(e),i.updater=yc,e.stateNode=i,i._reactInternals=e,Cd(e,r,t,n),e=Dd(null,e,r,!0,s,n)):(e.tag=0,Ne&&s&&Nf(e),St(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(ru(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=CA(r),t=_n(r,t),i){case 0:e=bd(null,e,r,t,n);break e;case 1:e=Ug(null,e,r,t,n);break e;case 11:e=jg(null,e,r,t,n);break e;case 14:e=Bg(null,e,r,_n(r.type,t),n);break e}throw Error($(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:_n(r,i),bd(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:_n(r,i),Ug(t,e,r,i,n);case 3:e:{if(F_(e),t===null)throw Error($(387));r=e.pendingProps,s=e.memoizedState,i=s.element,u_(t,e),Vu(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Ys(Error($(423)),e),e=zg(t,e,r,n,i);break e}else if(r!==i){i=Ys(Error($(424)),e),e=zg(t,e,r,n,i);break e}else for(Ht=Br(e.stateNode.containerInfo.firstChild),Yt=e,Ne=!0,Tn=null,n=a_(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Qs(),r===i){e=lr(t,e,n);break e}St(t,e,r,n)}e=e.child}return e;case 5:return c_(e),t===null&&xd(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Ed(r,i)?o=null:s!==null&&Ed(r,s)&&(e.flags|=32),O_(t,e),St(t,e,o,n),e.child;case 6:return t===null&&xd(e),null;case 13:return M_(t,e,n);case 4:return zf(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Hs(e,null,r,n):St(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:_n(r,i),jg(t,e,r,i,n);case 7:return St(t,e,e.pendingProps,n),e.child;case 8:return St(t,e,e.pendingProps.children,n),e.child;case 12:return St(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Pe(bu,r._currentValue),r._currentValue=o,s!==null)if(Cn(s.value,o)){if(s.children===i.children&&!Mt.current){e=lr(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){o=s.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=tr(-1,n&-n),u.tag=2;var h=s.updateQueue;if(h!==null){h=h.shared;var f=h.pending;f===null?u.next=u:(u.next=f.next,f.next=u),h.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),Pd(s.return,n,e),l.lanes|=n;break}u=u.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error($(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Pd(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}St(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Ns(e,n),i=pn(i),r=r(i),e.flags|=1,St(t,e,r,n),e.child;case 14:return r=e.type,i=_n(r,e.pendingProps),i=_n(r.type,i),Bg(t,e,r,i,n);case 15:return V_(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:_n(r,i),ru(t,e),e.tag=1,Lt(r)?(t=!0,Ru(e)):t=!1,Ns(e,n),k_(e,r,i),Cd(e,r,i,n),Dd(null,e,r,!0,t,n);case 19:return L_(t,e,n);case 22:return N_(t,e,n)}throw Error($(156,e.tag))};function ew(t,e){return P0(t,e)}function RA(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function hn(t,e,n,r){return new RA(t,e,n,r)}function rp(t){return t=t.prototype,!(!t||!t.isReactComponent)}function CA(t){if(typeof t=="function")return rp(t)?1:0;if(t!=null){if(t=t.$$typeof,t===If)return 11;if(t===Tf)return 14}return 2}function qr(t,e){var n=t.alternate;return n===null?(n=hn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function ou(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")rp(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case ys:return Vi(n.children,i,s,e);case Ef:o=8,i|=8;break;case Zh:return t=hn(12,n,e,i|2),t.elementType=Zh,t.lanes=s,t;case ed:return t=hn(13,n,e,i),t.elementType=ed,t.lanes=s,t;case td:return t=hn(19,n,e,i),t.elementType=td,t.lanes=s,t;case c0:return wc(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case l0:o=10;break e;case u0:o=9;break e;case If:o=11;break e;case Tf:o=14;break e;case wr:o=16,r=null;break e}throw Error($(130,t==null?t:typeof t,""))}return e=hn(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Vi(t,e,n,r){return t=hn(7,t,r,e),t.lanes=n,t}function wc(t,e,n,r){return t=hn(22,t,r,e),t.elementType=c0,t.lanes=n,t.stateNode={isHidden:!1},t}function Vh(t,e,n){return t=hn(6,t,null,e),t.lanes=n,t}function Nh(t,e,n){return e=hn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function kA(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ph(0),this.expirationTimes=ph(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ph(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function ip(t,e,n,r,i,s,o,l,u){return t=new kA(t,e,n,l,u),e===1?(e=1,s===!0&&(e|=8)):e=0,s=hn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Uf(s),t}function bA(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:gs,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function tw(t){if(!t)return Xr;t=t._reactInternals;e:{if(Wi(t)!==t||t.tag!==1)throw Error($(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Lt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error($(171))}if(t.tag===1){var n=t.type;if(Lt(n))return t_(t,n,e)}return e}function nw(t,e,n,r,i,s,o,l,u){return t=ip(n,r,!0,t,i,s,o,l,u),t.context=tw(null),n=t.current,r=Pt(),i=$r(n),s=tr(r,i),s.callback=e??null,Ur(n,s,i),t.current.lanes=i,Ga(t,i,r),jt(t,r),t}function Ec(t,e,n,r){var i=e.current,s=Pt(),o=$r(i);return n=tw(n),e.context===null?e.context=n:e.pendingContext=n,e=tr(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Ur(i,e,o),t!==null&&(Pn(t,i,o,s),eu(t,i,o)),o}function Uu(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Jg(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function sp(t,e){Jg(t,e),(t=t.alternate)&&Jg(t,e)}function DA(){return null}var rw=typeof reportError=="function"?reportError:function(t){console.error(t)};function op(t){this._internalRoot=t}Ic.prototype.render=op.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error($(409));Ec(t,e,null,null)};Ic.prototype.unmount=op.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Li(function(){Ec(null,t,null,null)}),e[or]=null}};function Ic(t){this._internalRoot=t}Ic.prototype.unstable_scheduleHydration=function(t){if(t){var e=N0();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ir.length&&e!==0&&e<Ir[n].priority;n++);Ir.splice(n,0,t),n===0&&F0(t)}};function ap(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Tc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Zg(){}function VA(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var h=Uu(o);s.call(h)}}var o=nw(e,r,t,0,null,!1,!1,"",Zg);return t._reactRootContainer=o,t[or]=o.current,Ia(t.nodeType===8?t.parentNode:t),Li(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var h=Uu(u);l.call(h)}}var u=ip(t,0,!1,null,null,!1,!1,"",Zg);return t._reactRootContainer=u,t[or]=u.current,Ia(t.nodeType===8?t.parentNode:t),Li(function(){Ec(e,u,n,r)}),u}function Ac(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var l=i;i=function(){var u=Uu(o);l.call(u)}}Ec(e,o,t,i)}else o=VA(n,e,t,i,r);return Uu(o)}D0=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ho(e.pendingLanes);n!==0&&(xf(e,n|1),jt(e,Qe()),!(ge&6)&&(Xs=Qe()+500,ii()))}break;case 13:Li(function(){var r=ar(t,1);if(r!==null){var i=Pt();Pn(r,t,1,i)}}),sp(t,1)}};Pf=function(t){if(t.tag===13){var e=ar(t,134217728);if(e!==null){var n=Pt();Pn(e,t,134217728,n)}sp(t,134217728)}};V0=function(t){if(t.tag===13){var e=$r(t),n=ar(t,e);if(n!==null){var r=Pt();Pn(n,t,e,r)}sp(t,e)}};N0=function(){return we};O0=function(t,e){var n=we;try{return we=t,e()}finally{we=n}};hd=function(t,e,n){switch(e){case"input":if(id(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=pc(r);if(!i)throw Error($(90));d0(r),id(r,i)}}}break;case"textarea":p0(t,n);break;case"select":e=n.value,e!=null&&ks(t,!!n.multiple,e,!1)}};E0=ep;I0=Li;var NA={usingClientEntryPoint:!1,Events:[Ha,Es,pc,_0,w0,ep]},Mo={findFiberByHostInstance:Ti,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},OA={bundleType:Mo.bundleType,version:Mo.version,rendererPackageName:Mo.rendererPackageName,rendererConfig:Mo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:hr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=S0(t),t===null?null:t.stateNode},findFiberByHostInstance:Mo.findFiberByHostInstance||DA,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Bl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Bl.isDisabled&&Bl.supportsFiber)try{cc=Bl.inject(OA),zn=Bl}catch{}}en.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=NA;en.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ap(e))throw Error($(200));return bA(t,e,null,n)};en.createRoot=function(t,e){if(!ap(t))throw Error($(299));var n=!1,r="",i=rw;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=ip(t,1,!1,null,null,n,!1,r,i),t[or]=e.current,Ia(t.nodeType===8?t.parentNode:t),new op(e)};en.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error($(188)):(t=Object.keys(t).join(","),Error($(268,t)));return t=S0(e),t=t===null?null:t.stateNode,t};en.flushSync=function(t){return Li(t)};en.hydrate=function(t,e,n){if(!Tc(e))throw Error($(200));return Ac(null,t,e,!0,n)};en.hydrateRoot=function(t,e,n){if(!ap(t))throw Error($(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=rw;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=nw(e,null,t,1,n??null,i,!1,s,o),t[or]=e.current,Ia(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Ic(e)};en.render=function(t,e,n){if(!Tc(e))throw Error($(200));return Ac(null,t,e,!1,n)};en.unmountComponentAtNode=function(t){if(!Tc(t))throw Error($(40));return t._reactRootContainer?(Li(function(){Ac(null,null,t,!1,function(){t._reactRootContainer=null,t[or]=null})}),!0):!1};en.unstable_batchedUpdates=ep;en.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Tc(n))throw Error($(200));if(t==null||t._reactInternals===void 0)throw Error($(38));return Ac(t,e,n,!1,r)};en.version="18.3.1-next-f1338f8080-20240426";function iw(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(iw)}catch(t){console.error(t)}}iw(),i0.exports=en;var FA=i0.exports,sw,ey=FA;sw=ey.createRoot,ey.hydrateRoot;var Ya=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Sc=typeof window>"u"||"Deno"in globalThis;function wn(){}function MA(t,e){return typeof t=="function"?t(e):t}function LA(t){return typeof t=="number"&&t>=0&&t!==1/0}function jA(t,e){return Math.max(t+(e||0)-Date.now(),0)}function ty(t,e){return typeof t=="function"?t(e):t}function BA(t,e){return typeof t=="function"?t(e):t}function ny(t,e){const{type:n="all",exact:r,fetchStatus:i,predicate:s,queryKey:o,stale:l}=t;if(o){if(r){if(e.queryHash!==lp(o,e.options))return!1}else if(!ba(e.queryKey,o))return!1}if(n!=="all"){const u=e.isActive();if(n==="active"&&!u||n==="inactive"&&u)return!1}return!(typeof l=="boolean"&&e.isStale()!==l||i&&i!==e.state.fetchStatus||s&&!s(e))}function ry(t,e){const{exact:n,status:r,predicate:i,mutationKey:s}=t;if(s){if(!e.options.mutationKey)return!1;if(n){if(ji(e.options.mutationKey)!==ji(s))return!1}else if(!ba(e.options.mutationKey,s))return!1}return!(r&&e.state.status!==r||i&&!i(e))}function lp(t,e){return((e==null?void 0:e.queryKeyHashFn)||ji)(t)}function ji(t){return JSON.stringify(t,(e,n)=>qd(n)?Object.keys(n).sort().reduce((r,i)=>(r[i]=n[i],r),{}):n)}function ba(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?!Object.keys(e).some(n=>!ba(t[n],e[n])):!1}function ow(t,e){if(t===e)return t;const n=iy(t)&&iy(e);if(n||qd(t)&&qd(e)){const r=n?t:Object.keys(t),i=r.length,s=n?e:Object.keys(e),o=s.length,l=n?[]:{};let u=0;for(let h=0;h<o;h++){const f=n?h:s[h];(!n&&r.includes(f)||n)&&t[f]===void 0&&e[f]===void 0?(l[f]=void 0,u++):(l[f]=ow(t[f],e[f]),l[f]===t[f]&&t[f]!==void 0&&u++)}return i===o&&u===i?t:l}return e}function UA(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function iy(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function qd(t){if(!sy(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!sy(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function sy(t){return Object.prototype.toString.call(t)==="[object Object]"}function zA(t){return new Promise(e=>{setTimeout(e,t)})}function $A(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?ow(t,e):e}function qA(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function KA(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var up=Symbol();function aw(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===up?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var Ri,xr,Fs,Lv,GA=(Lv=class extends Ya{constructor(){super();ce(this,Ri);ce(this,xr);ce(this,Fs);se(this,Fs,e=>{if(!Sc&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){M(this,xr)||this.setEventListener(M(this,Fs))}onUnsubscribe(){var e;this.hasListeners()||((e=M(this,xr))==null||e.call(this),se(this,xr,void 0))}setEventListener(e){var n;se(this,Fs,e),(n=M(this,xr))==null||n.call(this),se(this,xr,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){M(this,Ri)!==e&&(se(this,Ri,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof M(this,Ri)=="boolean"?M(this,Ri):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Ri=new WeakMap,xr=new WeakMap,Fs=new WeakMap,Lv),lw=new GA,Ms,Pr,Ls,jv,QA=(jv=class extends Ya{constructor(){super();ce(this,Ms,!0);ce(this,Pr);ce(this,Ls);se(this,Ls,e=>{if(!Sc&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){M(this,Pr)||this.setEventListener(M(this,Ls))}onUnsubscribe(){var e;this.hasListeners()||((e=M(this,Pr))==null||e.call(this),se(this,Pr,void 0))}setEventListener(e){var n;se(this,Ls,e),(n=M(this,Pr))==null||n.call(this),se(this,Pr,e(this.setOnline.bind(this)))}setOnline(e){M(this,Ms)!==e&&(se(this,Ms,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return M(this,Ms)}},Ms=new WeakMap,Pr=new WeakMap,Ls=new WeakMap,jv),zu=new QA;function HA(){let t,e;const n=new Promise((i,s)=>{t=i,e=s});n.status="pending",n.catch(()=>{});function r(i){Object.assign(n,i),delete n.resolve,delete n.reject}return n.resolve=i=>{r({status:"fulfilled",value:i}),t(i)},n.reject=i=>{r({status:"rejected",reason:i}),e(i)},n}function WA(t){return Math.min(1e3*2**t,3e4)}function uw(t){return(t??"online")==="online"?zu.isOnline():!0}var cw=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function Oh(t){return t instanceof cw}function hw(t){let e=!1,n=0,r=!1,i;const s=HA(),o=k=>{var j;r||(g(new cw(k)),(j=t.abort)==null||j.call(t))},l=()=>{e=!0},u=()=>{e=!1},h=()=>lw.isFocused()&&(t.networkMode==="always"||zu.isOnline())&&t.canRun(),f=()=>uw(t.networkMode)&&t.canRun(),p=k=>{var j;r||(r=!0,(j=t.onSuccess)==null||j.call(t,k),i==null||i(),s.resolve(k))},g=k=>{var j;r||(r=!0,(j=t.onError)==null||j.call(t,k),i==null||i(),s.reject(k))},S=()=>new Promise(k=>{var j;i=A=>{(r||h())&&k(A)},(j=t.onPause)==null||j.call(t)}).then(()=>{var k;i=void 0,r||(k=t.onContinue)==null||k.call(t)}),C=()=>{if(r)return;let k;const j=n===0?t.initialPromise:void 0;try{k=j??t.fn()}catch(A){k=Promise.reject(A)}Promise.resolve(k).then(p).catch(A=>{var U;if(r)return;const v=t.retry??(Sc?0:3),I=t.retryDelay??WA,N=typeof I=="function"?I(n,A):I,L=v===!0||typeof v=="number"&&n<v||typeof v=="function"&&v(n,A);if(e||!L){g(A);return}n++,(U=t.onFail)==null||U.call(t,n,A),zA(N).then(()=>h()?void 0:S()).then(()=>{e?g(A):C()})})};return{promise:s,cancel:o,continue:()=>(i==null||i(),s),cancelRetry:l,continueRetry:u,canStart:f,start:()=>(f()?C():S().then(C),s)}}function YA(){let t=[],e=0,n=l=>{l()},r=l=>{l()},i=l=>setTimeout(l,0);const s=l=>{e?t.push(l):i(()=>{n(l)})},o=()=>{const l=t;t=[],l.length&&i(()=>{r(()=>{l.forEach(u=>{n(u)})})})};return{batch:l=>{let u;e++;try{u=l()}finally{e--,e||o()}return u},batchCalls:l=>(...u)=>{s(()=>{l(...u)})},schedule:s,setNotifyFunction:l=>{n=l},setBatchNotifyFunction:l=>{r=l},setScheduler:l=>{i=l}}}var ht=YA(),Ci,Bv,dw=(Bv=class{constructor(){ce(this,Ci)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),LA(this.gcTime)&&se(this,Ci,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Sc?1/0:5*60*1e3))}clearGcTimeout(){M(this,Ci)&&(clearTimeout(M(this,Ci)),se(this,Ci,void 0))}},Ci=new WeakMap,Bv),js,Bs,ln,wt,$a,ki,En,Wn,Uv,XA=(Uv=class extends dw{constructor(n){super();ce(this,En);ce(this,js);ce(this,Bs);ce(this,ln);ce(this,wt);ce(this,$a);ce(this,ki);se(this,ki,!1),se(this,$a,n.defaultOptions),this.setOptions(n.options),this.observers=[],se(this,ln,n.cache),this.queryKey=n.queryKey,this.queryHash=n.queryHash,se(this,js,ZA(this.options)),this.state=n.state??M(this,js),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var n;return(n=M(this,wt))==null?void 0:n.promise}setOptions(n){this.options={...M(this,$a),...n},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&M(this,ln).remove(this)}setData(n,r){const i=$A(this.state.data,n,this.options);return Ke(this,En,Wn).call(this,{data:i,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),i}setState(n,r){Ke(this,En,Wn).call(this,{type:"setState",state:n,setStateOptions:r})}cancel(n){var i,s;const r=(i=M(this,wt))==null?void 0:i.promise;return(s=M(this,wt))==null||s.cancel(n),r?r.then(wn).catch(wn):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(M(this,js))}isActive(){return this.observers.some(n=>BA(n.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===up||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(n=>n.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(n=0){return this.state.isInvalidated||this.state.data===void 0||!jA(this.state.dataUpdatedAt,n)}onFocus(){var r;const n=this.observers.find(i=>i.shouldFetchOnWindowFocus());n==null||n.refetch({cancelRefetch:!1}),(r=M(this,wt))==null||r.continue()}onOnline(){var r;const n=this.observers.find(i=>i.shouldFetchOnReconnect());n==null||n.refetch({cancelRefetch:!1}),(r=M(this,wt))==null||r.continue()}addObserver(n){this.observers.includes(n)||(this.observers.push(n),this.clearGcTimeout(),M(this,ln).notify({type:"observerAdded",query:this,observer:n}))}removeObserver(n){this.observers.includes(n)&&(this.observers=this.observers.filter(r=>r!==n),this.observers.length||(M(this,wt)&&(M(this,ki)?M(this,wt).cancel({revert:!0}):M(this,wt).cancelRetry()),this.scheduleGc()),M(this,ln).notify({type:"observerRemoved",query:this,observer:n}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Ke(this,En,Wn).call(this,{type:"invalidate"})}fetch(n,r){var h,f,p;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(M(this,wt))return M(this,wt).continueRetry(),M(this,wt).promise}if(n&&this.setOptions(n),!this.options.queryFn){const g=this.observers.find(S=>S.options.queryFn);g&&this.setOptions(g.options)}const i=new AbortController,s=g=>{Object.defineProperty(g,"signal",{enumerable:!0,get:()=>(se(this,ki,!0),i.signal)})},o=()=>{const g=aw(this.options,r),S={queryKey:this.queryKey,meta:this.meta};return s(S),se(this,ki,!1),this.options.persister?this.options.persister(g,S,this):g(S)},l={fetchOptions:r,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:o};s(l),(h=this.options.behavior)==null||h.onFetch(l,this),se(this,Bs,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((f=l.fetchOptions)==null?void 0:f.meta))&&Ke(this,En,Wn).call(this,{type:"fetch",meta:(p=l.fetchOptions)==null?void 0:p.meta});const u=g=>{var S,C,k,j;Oh(g)&&g.silent||Ke(this,En,Wn).call(this,{type:"error",error:g}),Oh(g)||((C=(S=M(this,ln).config).onError)==null||C.call(S,g,this),(j=(k=M(this,ln).config).onSettled)==null||j.call(k,this.state.data,g,this)),this.scheduleGc()};return se(this,wt,hw({initialPromise:r==null?void 0:r.initialPromise,fn:l.fetchFn,abort:i.abort.bind(i),onSuccess:g=>{var S,C,k,j;if(g===void 0){u(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(g)}catch(A){u(A);return}(C=(S=M(this,ln).config).onSuccess)==null||C.call(S,g,this),(j=(k=M(this,ln).config).onSettled)==null||j.call(k,g,this.state.error,this),this.scheduleGc()},onError:u,onFail:(g,S)=>{Ke(this,En,Wn).call(this,{type:"failed",failureCount:g,error:S})},onPause:()=>{Ke(this,En,Wn).call(this,{type:"pause"})},onContinue:()=>{Ke(this,En,Wn).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0})),M(this,wt).start()}},js=new WeakMap,Bs=new WeakMap,ln=new WeakMap,wt=new WeakMap,$a=new WeakMap,ki=new WeakMap,En=new WeakSet,Wn=function(n){const r=i=>{switch(n.type){case"failed":return{...i,fetchFailureCount:n.failureCount,fetchFailureReason:n.error};case"pause":return{...i,fetchStatus:"paused"};case"continue":return{...i,fetchStatus:"fetching"};case"fetch":return{...i,...JA(i.data,this.options),fetchMeta:n.meta??null};case"success":return{...i,data:n.data,dataUpdateCount:i.dataUpdateCount+1,dataUpdatedAt:n.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!n.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=n.error;return Oh(s)&&s.revert&&M(this,Bs)?{...M(this,Bs),fetchStatus:"idle"}:{...i,error:s,errorUpdateCount:i.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:i.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...i,isInvalidated:!0};case"setState":return{...i,...n.state}}};this.state=r(this.state),ht.batch(()=>{this.observers.forEach(i=>{i.onQueryUpdate()}),M(this,ln).notify({query:this,type:"updated",action:n})})},Uv);function JA(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:uw(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function ZA(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Nn,zv,eS=(zv=class extends Ya{constructor(e={}){super();ce(this,Nn);this.config=e,se(this,Nn,new Map)}build(e,n,r){const i=n.queryKey,s=n.queryHash??lp(i,n);let o=this.get(s);return o||(o=new XA({cache:this,queryKey:i,queryHash:s,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(i)}),this.add(o)),o}add(e){M(this,Nn).has(e.queryHash)||(M(this,Nn).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=M(this,Nn).get(e.queryHash);n&&(e.destroy(),n===e&&M(this,Nn).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){ht.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return M(this,Nn).get(e)}getAll(){return[...M(this,Nn).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>ny(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>ny(e,r)):n}notify(e){ht.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){ht.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){ht.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Nn=new WeakMap,zv),On,At,bi,Fn,_r,$v,tS=($v=class extends dw{constructor(n){super();ce(this,Fn);ce(this,On);ce(this,At);ce(this,bi);this.mutationId=n.mutationId,se(this,At,n.mutationCache),se(this,On,[]),this.state=n.state||fw(),this.setOptions(n.options),this.scheduleGc()}setOptions(n){this.options=n,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(n){M(this,On).includes(n)||(M(this,On).push(n),this.clearGcTimeout(),M(this,At).notify({type:"observerAdded",mutation:this,observer:n}))}removeObserver(n){se(this,On,M(this,On).filter(r=>r!==n)),this.scheduleGc(),M(this,At).notify({type:"observerRemoved",mutation:this,observer:n})}optionalRemove(){M(this,On).length||(this.state.status==="pending"?this.scheduleGc():M(this,At).remove(this))}continue(){var n;return((n=M(this,bi))==null?void 0:n.continue())??this.execute(this.state.variables)}async execute(n){var s,o,l,u,h,f,p,g,S,C,k,j,A,v,I,N,L,U,w,y;se(this,bi,hw({fn:()=>this.options.mutationFn?this.options.mutationFn(n):Promise.reject(new Error("No mutationFn found")),onFail:(_,T)=>{Ke(this,Fn,_r).call(this,{type:"failed",failureCount:_,error:T})},onPause:()=>{Ke(this,Fn,_r).call(this,{type:"pause"})},onContinue:()=>{Ke(this,Fn,_r).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>M(this,At).canRun(this)}));const r=this.state.status==="pending",i=!M(this,bi).canStart();try{if(!r){Ke(this,Fn,_r).call(this,{type:"pending",variables:n,isPaused:i}),await((o=(s=M(this,At).config).onMutate)==null?void 0:o.call(s,n,this));const T=await((u=(l=this.options).onMutate)==null?void 0:u.call(l,n));T!==this.state.context&&Ke(this,Fn,_r).call(this,{type:"pending",context:T,variables:n,isPaused:i})}const _=await M(this,bi).start();return await((f=(h=M(this,At).config).onSuccess)==null?void 0:f.call(h,_,n,this.state.context,this)),await((g=(p=this.options).onSuccess)==null?void 0:g.call(p,_,n,this.state.context)),await((C=(S=M(this,At).config).onSettled)==null?void 0:C.call(S,_,null,this.state.variables,this.state.context,this)),await((j=(k=this.options).onSettled)==null?void 0:j.call(k,_,null,n,this.state.context)),Ke(this,Fn,_r).call(this,{type:"success",data:_}),_}catch(_){try{throw await((v=(A=M(this,At).config).onError)==null?void 0:v.call(A,_,n,this.state.context,this)),await((N=(I=this.options).onError)==null?void 0:N.call(I,_,n,this.state.context)),await((U=(L=M(this,At).config).onSettled)==null?void 0:U.call(L,void 0,_,this.state.variables,this.state.context,this)),await((y=(w=this.options).onSettled)==null?void 0:y.call(w,void 0,_,n,this.state.context)),_}finally{Ke(this,Fn,_r).call(this,{type:"error",error:_})}}finally{M(this,At).runNext(this)}}},On=new WeakMap,At=new WeakMap,bi=new WeakMap,Fn=new WeakSet,_r=function(n){const r=i=>{switch(n.type){case"failed":return{...i,failureCount:n.failureCount,failureReason:n.error};case"pause":return{...i,isPaused:!0};case"continue":return{...i,isPaused:!1};case"pending":return{...i,context:n.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:n.isPaused,status:"pending",variables:n.variables,submittedAt:Date.now()};case"success":return{...i,data:n.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...i,data:void 0,error:n.error,failureCount:i.failureCount+1,failureReason:n.error,isPaused:!1,status:"error"}}};this.state=r(this.state),ht.batch(()=>{M(this,On).forEach(i=>{i.onMutationUpdate(n)}),M(this,At).notify({mutation:this,type:"updated",action:n})})},$v);function fw(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var qt,qa,qv,nS=(qv=class extends Ya{constructor(e={}){super();ce(this,qt);ce(this,qa);this.config=e,se(this,qt,new Map),se(this,qa,Date.now())}build(e,n,r){const i=new tS({mutationCache:this,mutationId:++Tl(this,qa)._,options:e.defaultMutationOptions(n),state:r});return this.add(i),i}add(e){const n=Ul(e),r=M(this,qt).get(n)??[];r.push(e),M(this,qt).set(n,r),this.notify({type:"added",mutation:e})}remove(e){var r;const n=Ul(e);if(M(this,qt).has(n)){const i=(r=M(this,qt).get(n))==null?void 0:r.filter(s=>s!==e);i&&(i.length===0?M(this,qt).delete(n):M(this,qt).set(n,i))}this.notify({type:"removed",mutation:e})}canRun(e){var r;const n=(r=M(this,qt).get(Ul(e)))==null?void 0:r.find(i=>i.state.status==="pending");return!n||n===e}runNext(e){var r;const n=(r=M(this,qt).get(Ul(e)))==null?void 0:r.find(i=>i!==e&&i.state.isPaused);return(n==null?void 0:n.continue())??Promise.resolve()}clear(){ht.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}getAll(){return[...M(this,qt).values()].flat()}find(e){const n={exact:!0,...e};return this.getAll().find(r=>ry(n,r))}findAll(e={}){return this.getAll().filter(n=>ry(e,n))}notify(e){ht.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return ht.batch(()=>Promise.all(e.map(n=>n.continue().catch(wn))))}},qt=new WeakMap,qa=new WeakMap,qv);function Ul(t){var e;return((e=t.options.scope)==null?void 0:e.id)??String(t.mutationId)}function oy(t){return{onFetch:(e,n)=>{var f,p,g,S,C;const r=e.options,i=(g=(p=(f=e.fetchOptions)==null?void 0:f.meta)==null?void 0:p.fetchMore)==null?void 0:g.direction,s=((S=e.state.data)==null?void 0:S.pages)||[],o=((C=e.state.data)==null?void 0:C.pageParams)||[];let l={pages:[],pageParams:[]},u=0;const h=async()=>{let k=!1;const j=I=>{Object.defineProperty(I,"signal",{enumerable:!0,get:()=>(e.signal.aborted?k=!0:e.signal.addEventListener("abort",()=>{k=!0}),e.signal)})},A=aw(e.options,e.fetchOptions),v=async(I,N,L)=>{if(k)return Promise.reject();if(N==null&&I.pages.length)return Promise.resolve(I);const U={queryKey:e.queryKey,pageParam:N,direction:L?"backward":"forward",meta:e.options.meta};j(U);const w=await A(U),{maxPages:y}=e.options,_=L?KA:qA;return{pages:_(I.pages,w,y),pageParams:_(I.pageParams,N,y)}};if(i&&s.length){const I=i==="backward",N=I?rS:ay,L={pages:s,pageParams:o},U=N(r,L);l=await v(L,U,I)}else{const I=t??s.length;do{const N=u===0?o[0]??r.initialPageParam:ay(r,l);if(u>0&&N==null)break;l=await v(l,N),u++}while(u<I)}return l};e.options.persister?e.fetchFn=()=>{var k,j;return(j=(k=e.options).persister)==null?void 0:j.call(k,h,{queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=h}}}function ay(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function rS(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var ze,Rr,Cr,Us,zs,kr,$s,qs,Kv,iS=(Kv=class{constructor(t={}){ce(this,ze);ce(this,Rr);ce(this,Cr);ce(this,Us);ce(this,zs);ce(this,kr);ce(this,$s);ce(this,qs);se(this,ze,t.queryCache||new eS),se(this,Rr,t.mutationCache||new nS),se(this,Cr,t.defaultOptions||{}),se(this,Us,new Map),se(this,zs,new Map),se(this,kr,0)}mount(){Tl(this,kr)._++,M(this,kr)===1&&(se(this,$s,lw.subscribe(async t=>{t&&(await this.resumePausedMutations(),M(this,ze).onFocus())})),se(this,qs,zu.subscribe(async t=>{t&&(await this.resumePausedMutations(),M(this,ze).onOnline())})))}unmount(){var t,e;Tl(this,kr)._--,M(this,kr)===0&&((t=M(this,$s))==null||t.call(this),se(this,$s,void 0),(e=M(this,qs))==null||e.call(this),se(this,qs,void 0))}isFetching(t){return M(this,ze).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return M(this,Rr).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=M(this,ze).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.getQueryData(t.queryKey);if(e===void 0)return this.fetchQuery(t);{const n=this.defaultQueryOptions(t),r=M(this,ze).build(this,n);return t.revalidateIfStale&&r.isStaleByTime(ty(n.staleTime,r))&&this.prefetchQuery(n),Promise.resolve(e)}}getQueriesData(t){return M(this,ze).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),i=M(this,ze).get(r.queryHash),s=i==null?void 0:i.state.data,o=MA(e,s);if(o!==void 0)return M(this,ze).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return ht.batch(()=>M(this,ze).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=M(this,ze).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=M(this,ze);ht.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=M(this,ze),r={type:"active",...t};return ht.batch(()=>(n.findAll(t).forEach(i=>{i.reset()}),this.refetchQueries(r,e)))}cancelQueries(t={},e={}){const n={revert:!0,...e},r=ht.batch(()=>M(this,ze).findAll(t).map(i=>i.cancel(n)));return Promise.all(r).then(wn).catch(wn)}invalidateQueries(t={},e={}){return ht.batch(()=>{if(M(this,ze).findAll(t).forEach(r=>{r.invalidate()}),t.refetchType==="none")return Promise.resolve();const n={...t,type:t.refetchType??t.type??"active"};return this.refetchQueries(n,e)})}refetchQueries(t={},e){const n={...e,cancelRefetch:(e==null?void 0:e.cancelRefetch)??!0},r=ht.batch(()=>M(this,ze).findAll(t).filter(i=>!i.isDisabled()).map(i=>{let s=i.fetch(void 0,n);return n.throwOnError||(s=s.catch(wn)),i.state.fetchStatus==="paused"?Promise.resolve():s}));return Promise.all(r).then(wn)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=M(this,ze).build(this,e);return n.isStaleByTime(ty(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(wn).catch(wn)}fetchInfiniteQuery(t){return t.behavior=oy(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(wn).catch(wn)}ensureInfiniteQueryData(t){return t.behavior=oy(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return zu.isOnline()?M(this,Rr).resumePausedMutations():Promise.resolve()}getQueryCache(){return M(this,ze)}getMutationCache(){return M(this,Rr)}getDefaultOptions(){return M(this,Cr)}setDefaultOptions(t){se(this,Cr,t)}setQueryDefaults(t,e){M(this,Us).set(ji(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...M(this,Us).values()];let n={};return e.forEach(r=>{ba(t,r.queryKey)&&(n={...n,...r.defaultOptions})}),n}setMutationDefaults(t,e){M(this,zs).set(ji(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...M(this,zs).values()];let n={};return e.forEach(r=>{ba(t,r.mutationKey)&&(n={...n,...r.defaultOptions})}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...M(this,Cr).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=lp(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.enabled!==!0&&e.queryFn===up&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...M(this,Cr).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){M(this,ze).clear(),M(this,Rr).clear()}},ze=new WeakMap,Rr=new WeakMap,Cr=new WeakMap,Us=new WeakMap,zs=new WeakMap,kr=new WeakMap,$s=new WeakMap,qs=new WeakMap,Kv),br,Dr,Dt,Jn,ir,au,Kd,Gv,sS=(Gv=class extends Ya{constructor(n,r){super();ce(this,ir);ce(this,br);ce(this,Dr);ce(this,Dt);ce(this,Jn);se(this,br,n),this.setOptions(r),this.bindMethods(),Ke(this,ir,au).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var i;const r=this.options;this.options=M(this,br).defaultMutationOptions(n),UA(this.options,r)||M(this,br).getMutationCache().notify({type:"observerOptionsUpdated",mutation:M(this,Dt),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&ji(r.mutationKey)!==ji(this.options.mutationKey)?this.reset():((i=M(this,Dt))==null?void 0:i.state.status)==="pending"&&M(this,Dt).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=M(this,Dt))==null||n.removeObserver(this)}onMutationUpdate(n){Ke(this,ir,au).call(this),Ke(this,ir,Kd).call(this,n)}getCurrentResult(){return M(this,Dr)}reset(){var n;(n=M(this,Dt))==null||n.removeObserver(this),se(this,Dt,void 0),Ke(this,ir,au).call(this),Ke(this,ir,Kd).call(this)}mutate(n,r){var i;return se(this,Jn,r),(i=M(this,Dt))==null||i.removeObserver(this),se(this,Dt,M(this,br).getMutationCache().build(M(this,br),this.options)),M(this,Dt).addObserver(this),M(this,Dt).execute(n)}},br=new WeakMap,Dr=new WeakMap,Dt=new WeakMap,Jn=new WeakMap,ir=new WeakSet,au=function(){var r;const n=((r=M(this,Dt))==null?void 0:r.state)??fw();se(this,Dr,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},Kd=function(n){ht.batch(()=>{var r,i,s,o,l,u,h,f;if(M(this,Jn)&&this.hasListeners()){const p=M(this,Dr).variables,g=M(this,Dr).context;(n==null?void 0:n.type)==="success"?((i=(r=M(this,Jn)).onSuccess)==null||i.call(r,n.data,p,g),(o=(s=M(this,Jn)).onSettled)==null||o.call(s,n.data,null,p,g)):(n==null?void 0:n.type)==="error"&&((u=(l=M(this,Jn)).onError)==null||u.call(l,n.error,p,g),(f=(h=M(this,Jn)).onSettled)==null||f.call(h,void 0,n.error,p,g))}this.listeners.forEach(p=>{p(M(this,Dr))})})},Gv),pw=Ve.createContext(void 0),oS=t=>{const e=Ve.useContext(pw);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},aS=({client:t,children:e})=>(Ve.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),D.jsx(pw.Provider,{value:t,children:e}));function lS(t,e){return typeof t=="function"?t(...e):!!t}function uS(){}function Fh(t,e){const n=oS(),[r]=Ve.useState(()=>new sS(n,t));Ve.useEffect(()=>{r.setOptions(t)},[r,t]);const i=Ve.useSyncExternalStore(Ve.useCallback(o=>r.subscribe(ht.batchCalls(o)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),s=Ve.useCallback((o,l)=>{r.mutate(o,l).catch(uS)},[r]);if(i.error&&lS(r.options.throwOnError,[i.error]))throw i.error;return{...i,mutate:s,mutateAsync:i.mutate}}var cS=function(){return null};const hS=new iS({defaultOptions:{queries:{staleTime:1e3*60*5,retry:2},mutations:{retry:1}}});function dS({children:t}){return D.jsxs(aS,{client:hS,children:[t,D.jsx(cS,{})]})}/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var fS={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pS=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),kn=(t,e)=>{const n=Ve.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:s=2,absoluteStrokeWidth:o,className:l="",children:u,...h},f)=>Ve.createElement("svg",{ref:f,...fS,width:i,height:i,stroke:r,strokeWidth:o?Number(s)*24/Number(i):s,className:["lucide",`lucide-${pS(t)}`,l].join(" "),...h},[...e.map(([p,g])=>Ve.createElement(p,g)),...Array.isArray(u)?u:[u]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mS=kn("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ly=kn("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gS=kn("BarChart",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yS=kn("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mw=kn("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vS=kn("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _S=kn("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wS=kn("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ES=kn("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IS=kn("Wallet",[["path",{d:"M21 12V7H5a2 2 0 0 1 0-4h14v4",key:"195gfw"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h16v-5",key:"195n9w"}],["path",{d:"M18 12a2 2 0 0 0 0 4h4v-4Z",key:"vllfpd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TS=kn("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);class AS extends Ve.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}render(){return this.state.hasError?this.props.fallback||D.jsx("div",{className:"min-h-screen bg-red-50 flex items-center justify-center p-4",children:D.jsxs("div",{className:"max-w-md w-full bg-white rounded-lg shadow-lg p-6 text-center",children:[D.jsx(mS,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),D.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Something went wrong"}),D.jsx("p",{className:"text-gray-600 mb-4",children:"We're sorry, but there was an error loading this page. Please try refreshing."}),D.jsx("button",{onClick:()=>window.location.reload(),className:`px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 
                         transition-colors duration-200`,children:"Refresh Page"})]})}):this.props.children}}function SS({question:t,onAnswer:e,className:n=""}){var r;return t.type==="scale"?D.jsxs("div",{className:`space-y-4 ${n}`,children:[D.jsx("h3",{className:"text-xl font-medium mb-6",children:t.text}),D.jsx("div",{className:"flex justify-between gap-2",children:[1,2,3,4,5,6,7,8,9,10].map(i=>D.jsx("button",{onClick:()=>e(i),className:`w-10 h-10 rounded-full border-2 border-blue-600 hover:bg-blue-600 
                       hover:text-white transition-colors duration-200 focus:outline-none 
                       focus:ring-2 focus:ring-blue-500 focus:ring-offset-2`,children:i},i))}),D.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mt-2",children:[D.jsx("span",{children:"Low Risk"}),D.jsx("span",{children:"High Risk"})]})]}):D.jsxs("div",{className:`space-y-4 ${n}`,children:[D.jsx("h3",{className:"text-xl font-medium mb-6",children:t.text}),D.jsx("div",{className:"space-y-3",children:(r=t.options)==null?void 0:r.map((i,s)=>D.jsx("button",{onClick:()=>e(s+1),className:`w-full p-4 text-left rounded-lg border-2 border-gray-200 
                     hover:border-blue-600 transition-colors duration-200 
                     focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2`,children:i},s))})]})}function xS({current:t,total:e}){const n=t/e*100;return D.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5 mb-6",children:D.jsx("div",{className:"bg-blue-600 h-2.5 rounded-full transition-all duration-500 ease-out",style:{width:`${n}%`}})})}function PS({isOpen:t,onClose:e}){return t?D.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:D.jsxs("div",{className:"flex min-h-screen items-center justify-center p-4",children:[D.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm transition-opacity",onClick:e}),D.jsxs("div",{className:"relative w-full max-w-4xl bg-white rounded-xl shadow-2xl",children:[D.jsx("button",{onClick:e,className:`absolute right-4 top-4 text-gray-400 hover:text-gray-600 
                     transition-colors duration-200`,children:D.jsx(TS,{className:"w-6 h-6"})}),D.jsx("div",{className:"h-[600px] w-full",children:D.jsx("iframe",{src:"https://calendly.com/risknumber-savemyretirement/30min",width:"100%",height:"100%",frameBorder:"0",title:"Schedule Appointment",className:"rounded-xl"})})]})]})}):null}function RS({assessment:t,profile:e}){const[n,r]=Ve.useState(!1),{score:i,riskLevel:s,recommendations:o}=t,l={Conservative:"text-green-600",Moderate:"text-blue-600",Aggressive:"text-purple-600"};return D.jsxs("div",{className:"w-full max-w-2xl mx-auto",children:[D.jsxs("div",{className:"text-center mb-12",children:[D.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Your Risk Assessment Results"}),D.jsx("p",{className:"text-gray-600",children:"Based on your responses, here's your personalized analysis"})]}),D.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-12",children:[D.jsxs("div",{className:"bg-gray-50 rounded-xl p-6",children:[D.jsxs("div",{className:"relative w-32 h-32 mx-auto mb-4",children:[D.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:D.jsx("div",{className:`text-3xl font-bold ${l[s]}`,children:i})}),D.jsxs("svg",{className:"transform -rotate-90 w-32 h-32",children:[D.jsx("circle",{className:"text-gray-200",strokeWidth:"8",stroke:"currentColor",fill:"transparent",r:"56",cx:"64",cy:"64"}),D.jsx("circle",{className:`${l[s]} transition-all duration-1000 ease-out`,strokeWidth:"8",strokeLinecap:"round",stroke:"currentColor",fill:"transparent",r:"56",cx:"64",cy:"64",strokeDasharray:352,strokeDashoffset:352-352*i/100})]})]}),D.jsxs("h3",{className:`text-xl font-semibold text-center ${l[s]}`,children:[s," Risk Profile"]})]}),D.jsxs("div",{className:"bg-gray-50 rounded-xl p-6",children:[D.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Profile Summary"}),e&&D.jsxs("ul",{className:"space-y-3",children:[D.jsxs("li",{className:"flex items-center gap-2 text-gray-700",children:[D.jsx(IS,{className:"w-5 h-5 text-blue-600"}),"Income: ",e.income]}),D.jsxs("li",{className:"flex items-center gap-2 text-gray-700",children:[D.jsx(ES,{className:"w-5 h-5 text-blue-600"}),"Age Range: ",e.age]}),D.jsxs("li",{className:"flex items-center gap-2 text-gray-700",children:[D.jsx(_S,{className:"w-5 h-5 text-blue-600"}),"Properties: ",e.properties.length||"None"]})]})]})]}),D.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-8",children:[D.jsx("h3",{className:"text-xl font-semibold mb-6",children:"Personalized Recommendations"}),D.jsx("ul",{className:"space-y-4",children:o.map((u,h)=>D.jsxs("li",{className:"flex items-start gap-3 animate-fadeIn",style:{animationDelay:`${h*150}ms`},children:[D.jsx(mw,{className:"w-6 h-6 text-green-500 flex-shrink-0 mt-0.5"}),D.jsx("span",{className:"text-gray-700",children:u})]},h))})]}),D.jsxs("div",{className:"text-center space-y-4",children:[D.jsxs("button",{onClick:()=>r(!0),className:`inline-flex items-center px-6 py-3 bg-blue-600 text-white 
                   rounded-lg hover:bg-blue-700 transition-colors duration-200 
                   focus:outline-none focus:ring-2 focus:ring-blue-500 
                   focus:ring-offset-2 shadow-lg hover:shadow-xl 
                   transform hover:-translate-y-0.5 transition-all`,children:[D.jsx(yS,{className:"w-5 h-5 mr-2"}),"Schedule a Free Consultation"]}),D.jsx("p",{className:"text-sm text-gray-600",children:"Discuss your results with our financial experts"})]}),D.jsx(PS,{isOpen:n,onClose:()=>r(!1)})]})}var Xa=t=>t.type==="checkbox",xi=t=>t instanceof Date,xt=t=>t==null;const gw=t=>typeof t=="object";var He=t=>!xt(t)&&!Array.isArray(t)&&gw(t)&&!xi(t),CS=t=>He(t)&&t.target?Xa(t.target)?t.target.checked:t.target.value:t,kS=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,bS=(t,e)=>t.has(kS(e)),DS=t=>{const e=t.constructor&&t.constructor.prototype;return He(e)&&e.hasOwnProperty("isPrototypeOf")},cp=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function on(t){let e;const n=Array.isArray(t);if(t instanceof Date)e=new Date(t);else if(t instanceof Set)e=new Set(t);else if(!(cp&&(t instanceof Blob||t instanceof FileList))&&(n||He(t)))if(e=n?[]:{},!n&&!DS(t))e=t;else for(const r in t)t.hasOwnProperty(r)&&(e[r]=on(t[r]));else return t;return e}var xc=t=>Array.isArray(t)?t.filter(Boolean):[],Ge=t=>t===void 0,X=(t,e,n)=>{if(!e||!He(t))return n;const r=xc(e.split(/[,[\].]+?/)).reduce((i,s)=>xt(i)?i:i[s],t);return Ge(r)||r===t?Ge(t[e])?n:t[e]:r},Vn=t=>typeof t=="boolean",hp=t=>/^\w*$/.test(t),yw=t=>xc(t.replace(/["|']|\]/g,"").split(/\.|\[/)),ke=(t,e,n)=>{let r=-1;const i=hp(e)?[e]:yw(e),s=i.length,o=s-1;for(;++r<s;){const l=i[r];let u=n;if(r!==o){const h=t[l];u=He(h)||Array.isArray(h)?h:isNaN(+i[r+1])?{}:[]}if(l==="__proto__")return;t[l]=u,t=t[l]}return t};const uy={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},An={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Hn={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"};an.createContext(null);var VS=(t,e,n,r=!0)=>{const i={defaultValues:e._defaultValues};for(const s in t)Object.defineProperty(i,s,{get:()=>{const o=s;return e._proxyFormState[o]!==An.all&&(e._proxyFormState[o]=!r||An.all),t[o]}});return i},Vt=t=>He(t)&&!Object.keys(t).length,NS=(t,e,n,r)=>{n(t);const{name:i,...s}=t;return Vt(s)||Object.keys(s).length>=Object.keys(e).length||Object.keys(s).find(o=>e[o]===An.all)},lu=t=>Array.isArray(t)?t:[t];function OS(t){const e=an.useRef(t);e.current=t,an.useEffect(()=>{const n=!t.disabled&&e.current.subject&&e.current.subject.subscribe({next:e.current.next});return()=>{n&&n.unsubscribe()}},[t.disabled])}var jn=t=>typeof t=="string",FS=(t,e,n,r,i)=>jn(t)?(r&&e.watch.add(t),X(n,t,i)):Array.isArray(t)?t.map(s=>(r&&e.watch.add(s),X(n,s))):(r&&(e.watchAll=!0),n),MS=(t,e,n,r,i)=>e?{...n[t],types:{...n[t]&&n[t].types?n[t].types:{},[r]:i||!0}}:{},cy=t=>({isOnSubmit:!t||t===An.onSubmit,isOnBlur:t===An.onBlur,isOnChange:t===An.onChange,isOnAll:t===An.all,isOnTouch:t===An.onTouched}),hy=(t,e,n)=>!n&&(e.watchAll||e.watch.has(t)||[...e.watch].some(r=>t.startsWith(r)&&/^\.\w+/.test(t.slice(r.length))));const aa=(t,e,n,r)=>{for(const i of n||Object.keys(t)){const s=X(t,i);if(s){const{_f:o,...l}=s;if(o){if(o.refs&&o.refs[0]&&e(o.refs[0],i)&&!r)return!0;if(o.ref&&e(o.ref,o.name)&&!r)return!0;if(aa(l,e))break}else if(He(l)&&aa(l,e))break}}};var LS=(t,e,n)=>{const r=lu(X(t,n));return ke(r,"root",e[n]),ke(t,n,r),t},dp=t=>t.type==="file",Ln=t=>typeof t=="function",$u=t=>{if(!cp)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},uu=t=>jn(t),fp=t=>t.type==="radio",qu=t=>t instanceof RegExp;const dy={value:!1,isValid:!1},fy={value:!0,isValid:!0};var vw=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!Ge(t[0].attributes.value)?Ge(t[0].value)||t[0].value===""?fy:{value:t[0].value,isValid:!0}:fy:dy}return dy};const py={isValid:!1,value:null};var _w=t=>Array.isArray(t)?t.reduce((e,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:e,py):py;function my(t,e,n="validate"){if(uu(t)||Array.isArray(t)&&t.every(uu)||Vn(t)&&!t)return{type:n,message:uu(t)?t:"",ref:e}}var as=t=>He(t)&&!qu(t)?t:{value:t,message:""},gy=async(t,e,n,r,i)=>{const{ref:s,refs:o,required:l,maxLength:u,minLength:h,min:f,max:p,pattern:g,validate:S,name:C,valueAsNumber:k,mount:j,disabled:A}=t._f,v=X(e,C);if(!j||A)return{};const I=o?o[0]:s,N=P=>{r&&I.reportValidity&&(I.setCustomValidity(Vn(P)?"":P||""),I.reportValidity())},L={},U=fp(s),w=Xa(s),y=U||w,_=(k||dp(s))&&Ge(s.value)&&Ge(v)||$u(s)&&s.value===""||v===""||Array.isArray(v)&&!v.length,T=MS.bind(null,C,n,L),R=(P,E,ye,De=Hn.maxLength,ot=Hn.minLength)=>{const Be=P?E:ye;L[C]={type:P?De:ot,message:Be,ref:s,...T(P?De:ot,Be)}};if(i?!Array.isArray(v)||!v.length:l&&(!y&&(_||xt(v))||Vn(v)&&!v||w&&!vw(o).isValid||U&&!_w(o).isValid)){const{value:P,message:E}=uu(l)?{value:!!l,message:l}:as(l);if(P&&(L[C]={type:Hn.required,message:E,ref:I,...T(Hn.required,E)},!n))return N(E),L}if(!_&&(!xt(f)||!xt(p))){let P,E;const ye=as(p),De=as(f);if(!xt(v)&&!isNaN(v)){const ot=s.valueAsNumber||v&&+v;xt(ye.value)||(P=ot>ye.value),xt(De.value)||(E=ot<De.value)}else{const ot=s.valueAsDate||new Date(v),Be=ie=>new Date(new Date().toDateString()+" "+ie),H=s.type=="time",te=s.type=="week";jn(ye.value)&&v&&(P=H?Be(v)>Be(ye.value):te?v>ye.value:ot>new Date(ye.value)),jn(De.value)&&v&&(E=H?Be(v)<Be(De.value):te?v<De.value:ot<new Date(De.value))}if((P||E)&&(R(!!P,ye.message,De.message,Hn.max,Hn.min),!n))return N(L[C].message),L}if((u||h)&&!_&&(jn(v)||i&&Array.isArray(v))){const P=as(u),E=as(h),ye=!xt(P.value)&&v.length>+P.value,De=!xt(E.value)&&v.length<+E.value;if((ye||De)&&(R(ye,P.message,E.message),!n))return N(L[C].message),L}if(g&&!_&&jn(v)){const{value:P,message:E}=as(g);if(qu(P)&&!v.match(P)&&(L[C]={type:Hn.pattern,message:E,ref:s,...T(Hn.pattern,E)},!n))return N(E),L}if(S){if(Ln(S)){const P=await S(v,e),E=my(P,I);if(E&&(L[C]={...E,...T(Hn.validate,E.message)},!n))return N(E.message),L}else if(He(S)){let P={};for(const E in S){if(!Vt(P)&&!n)break;const ye=my(await S[E](v,e),I,E);ye&&(P={...ye,...T(E,ye.message)},N(ye.message),n&&(L[C]=P))}if(!Vt(P)&&(L[C]={ref:I,...P},!n))return L}}return N(!0),L};function jS(t,e){const n=e.slice(0,-1).length;let r=0;for(;r<n;)t=Ge(t)?r++:t[e[r++]];return t}function BS(t){for(const e in t)if(t.hasOwnProperty(e)&&!Ge(t[e]))return!1;return!0}function Je(t,e){const n=Array.isArray(e)?e:hp(e)?[e]:yw(e),r=n.length===1?t:jS(t,n),i=n.length-1,s=n[i];return r&&delete r[s],i!==0&&(He(r)&&Vt(r)||Array.isArray(r)&&BS(r))&&Je(t,n.slice(0,-1)),t}var Mh=()=>{let t=[];return{get observers(){return t},next:i=>{for(const s of t)s.next&&s.next(i)},subscribe:i=>(t.push(i),{unsubscribe:()=>{t=t.filter(s=>s!==i)}}),unsubscribe:()=>{t=[]}}},Gd=t=>xt(t)||!gw(t);function Ar(t,e){if(Gd(t)||Gd(e))return t===e;if(xi(t)&&xi(e))return t.getTime()===e.getTime();const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(const i of n){const s=t[i];if(!r.includes(i))return!1;if(i!=="ref"){const o=e[i];if(xi(s)&&xi(o)||He(s)&&He(o)||Array.isArray(s)&&Array.isArray(o)?!Ar(s,o):s!==o)return!1}}return!0}var ww=t=>t.type==="select-multiple",US=t=>fp(t)||Xa(t),Lh=t=>$u(t)&&t.isConnected,Ew=t=>{for(const e in t)if(Ln(t[e]))return!0;return!1};function Ku(t,e={}){const n=Array.isArray(t);if(He(t)||n)for(const r in t)Array.isArray(t[r])||He(t[r])&&!Ew(t[r])?(e[r]=Array.isArray(t[r])?[]:{},Ku(t[r],e[r])):xt(t[r])||(e[r]=!0);return e}function Iw(t,e,n){const r=Array.isArray(t);if(He(t)||r)for(const i in t)Array.isArray(t[i])||He(t[i])&&!Ew(t[i])?Ge(e)||Gd(n[i])?n[i]=Array.isArray(t[i])?Ku(t[i],[]):{...Ku(t[i])}:Iw(t[i],xt(e)?{}:e[i],n[i]):n[i]=!Ar(t[i],e[i]);return n}var Lo=(t,e)=>Iw(t,e,Ku(e)),Tw=(t,{valueAsNumber:e,valueAsDate:n,setValueAs:r})=>Ge(t)?t:e?t===""?NaN:t&&+t:n&&jn(t)?new Date(t):r?r(t):t;function jh(t){const e=t.ref;if(!(t.refs?t.refs.every(n=>n.disabled):e.disabled))return dp(e)?e.files:fp(e)?_w(t.refs).value:ww(e)?[...e.selectedOptions].map(({value:n})=>n):Xa(e)?vw(t.refs).value:Tw(Ge(e.value)?t.ref.value:e.value,t)}var zS=(t,e,n,r)=>{const i={};for(const s of t){const o=X(e,s);o&&ke(i,s,o._f)}return{criteriaMode:n,names:[...t],fields:i,shouldUseNativeValidation:r}},jo=t=>Ge(t)?t:qu(t)?t.source:He(t)?qu(t.value)?t.value.source:t.value:t;const yy="AsyncFunction";var $S=t=>(!t||!t.validate)&&!!(Ln(t.validate)&&t.validate.constructor.name===yy||He(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===yy)),qS=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate);function vy(t,e,n){const r=X(t,n);if(r||hp(n))return{error:r,name:n};const i=n.split(".");for(;i.length;){const s=i.join("."),o=X(e,s),l=X(t,s);if(o&&!Array.isArray(o)&&n!==s)return{name:n};if(l&&l.type)return{name:s,error:l};i.pop()}return{name:n}}var KS=(t,e,n,r,i)=>i.isOnAll?!1:!n&&i.isOnTouch?!(e||t):(n?r.isOnBlur:i.isOnBlur)?!t:(n?r.isOnChange:i.isOnChange)?t:!0,GS=(t,e)=>!xc(X(t,e)).length&&Je(t,e);const QS={mode:An.onSubmit,reValidateMode:An.onChange,shouldFocusError:!0};function HS(t={}){let e={...QS,...t},n={submitCount:0,isDirty:!1,isLoading:Ln(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},r={},i=He(e.defaultValues)||He(e.values)?on(e.defaultValues||e.values)||{}:{},s=e.shouldUnregister?{}:on(i),o={action:!1,mount:!1,watch:!1},l={mount:new Set,unMount:new Set,array:new Set,watch:new Set},u,h=0;const f={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},p={values:Mh(),array:Mh(),state:Mh()},g=cy(e.mode),S=cy(e.reValidateMode),C=e.criteriaMode===An.all,k=x=>O=>{clearTimeout(h),h=setTimeout(x,O)},j=async x=>{if(!e.disabled&&(f.isValid||x)){const O=e.resolver?Vt((await y()).errors):await T(r,!0);O!==n.isValid&&p.state.next({isValid:O})}},A=(x,O)=>{!e.disabled&&(f.isValidating||f.validatingFields)&&((x||Array.from(l.mount)).forEach(B=>{B&&(O?ke(n.validatingFields,B,O):Je(n.validatingFields,B))}),p.state.next({validatingFields:n.validatingFields,isValidating:!Vt(n.validatingFields)}))},v=(x,O=[],B,W,Q=!0,q=!0)=>{if(W&&B&&!e.disabled){if(o.action=!0,q&&Array.isArray(X(r,x))){const ee=B(X(r,x),W.argA,W.argB);Q&&ke(r,x,ee)}if(q&&Array.isArray(X(n.errors,x))){const ee=B(X(n.errors,x),W.argA,W.argB);Q&&ke(n.errors,x,ee),GS(n.errors,x)}if(f.touchedFields&&q&&Array.isArray(X(n.touchedFields,x))){const ee=B(X(n.touchedFields,x),W.argA,W.argB);Q&&ke(n.touchedFields,x,ee)}f.dirtyFields&&(n.dirtyFields=Lo(i,s)),p.state.next({name:x,isDirty:P(x,O),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else ke(s,x,O)},I=(x,O)=>{ke(n.errors,x,O),p.state.next({errors:n.errors})},N=x=>{n.errors=x,p.state.next({errors:n.errors,isValid:!1})},L=(x,O,B,W)=>{const Q=X(r,x);if(Q){const q=X(s,x,Ge(B)?X(i,x):B);Ge(q)||W&&W.defaultChecked||O?ke(s,x,O?q:jh(Q._f)):De(x,q),o.mount&&j()}},U=(x,O,B,W,Q)=>{let q=!1,ee=!1;const oe={name:x};if(!e.disabled){const ue=!!(X(r,x)&&X(r,x)._f&&X(r,x)._f.disabled);if(!B||W){f.isDirty&&(ee=n.isDirty,n.isDirty=oe.isDirty=P(),q=ee!==oe.isDirty);const de=ue||Ar(X(i,x),O);ee=!!(!ue&&X(n.dirtyFields,x)),de||ue?Je(n.dirtyFields,x):ke(n.dirtyFields,x,!0),oe.dirtyFields=n.dirtyFields,q=q||f.dirtyFields&&ee!==!de}if(B){const de=X(n.touchedFields,x);de||(ke(n.touchedFields,x,B),oe.touchedFields=n.touchedFields,q=q||f.touchedFields&&de!==B)}q&&Q&&p.state.next(oe)}return q?oe:{}},w=(x,O,B,W)=>{const Q=X(n.errors,x),q=f.isValid&&Vn(O)&&n.isValid!==O;if(t.delayError&&B?(u=k(()=>I(x,B)),u(t.delayError)):(clearTimeout(h),u=null,B?ke(n.errors,x,B):Je(n.errors,x)),(B?!Ar(Q,B):Q)||!Vt(W)||q){const ee={...W,...q&&Vn(O)?{isValid:O}:{},errors:n.errors,name:x};n={...n,...ee},p.state.next(ee)}},y=async x=>{A(x,!0);const O=await e.resolver(s,e.context,zS(x||l.mount,r,e.criteriaMode,e.shouldUseNativeValidation));return A(x),O},_=async x=>{const{errors:O}=await y(x);if(x)for(const B of x){const W=X(O,B);W?ke(n.errors,B,W):Je(n.errors,B)}else n.errors=O;return O},T=async(x,O,B={valid:!0})=>{for(const W in x){const Q=x[W];if(Q){const{_f:q,...ee}=Q;if(q){const oe=l.array.has(q.name),ue=Q._f&&$S(Q._f);ue&&f.validatingFields&&A([W],!0);const de=await gy(Q,s,C,e.shouldUseNativeValidation&&!O,oe);if(ue&&f.validatingFields&&A([W]),de[q.name]&&(B.valid=!1,O))break;!O&&(X(de,q.name)?oe?LS(n.errors,de,q.name):ke(n.errors,q.name,de[q.name]):Je(n.errors,q.name))}!Vt(ee)&&await T(ee,O,B)}}return B.valid},R=()=>{for(const x of l.unMount){const O=X(r,x);O&&(O._f.refs?O._f.refs.every(B=>!Lh(B)):!Lh(O._f.ref))&&zt(x)}l.unMount=new Set},P=(x,O)=>!e.disabled&&(x&&O&&ke(s,x,O),!Ar(xe(),i)),E=(x,O,B)=>FS(x,l,{...o.mount?s:Ge(O)?i:jn(x)?{[x]:O}:O},B,O),ye=x=>xc(X(o.mount?s:i,x,t.shouldUnregister?X(i,x,[]):[])),De=(x,O,B={})=>{const W=X(r,x);let Q=O;if(W){const q=W._f;q&&(!q.disabled&&ke(s,x,Tw(O,q)),Q=$u(q.ref)&&xt(O)?"":O,ww(q.ref)?[...q.ref.options].forEach(ee=>ee.selected=Q.includes(ee.value)):q.refs?Xa(q.ref)?q.refs.length>1?q.refs.forEach(ee=>(!ee.defaultChecked||!ee.disabled)&&(ee.checked=Array.isArray(Q)?!!Q.find(oe=>oe===ee.value):Q===ee.value)):q.refs[0]&&(q.refs[0].checked=!!Q):q.refs.forEach(ee=>ee.checked=ee.value===Q):dp(q.ref)?q.ref.value="":(q.ref.value=Q,q.ref.type||p.values.next({name:x,values:{...s}})))}(B.shouldDirty||B.shouldTouch)&&U(x,Q,B.shouldTouch,B.shouldDirty,!0),B.shouldValidate&&ie(x)},ot=(x,O,B)=>{for(const W in O){const Q=O[W],q=`${x}.${W}`,ee=X(r,q);(l.array.has(x)||He(Q)||ee&&!ee._f)&&!xi(Q)?ot(q,Q,B):De(q,Q,B)}},Be=(x,O,B={})=>{const W=X(r,x),Q=l.array.has(x),q=on(O);ke(s,x,q),Q?(p.array.next({name:x,values:{...s}}),(f.isDirty||f.dirtyFields)&&B.shouldDirty&&p.state.next({name:x,dirtyFields:Lo(i,s),isDirty:P(x,q)})):W&&!W._f&&!xt(q)?ot(x,q,B):De(x,q,B),hy(x,l)&&p.state.next({...n}),p.values.next({name:o.mount?x:void 0,values:{...s}})},H=async x=>{o.mount=!0;const O=x.target;let B=O.name,W=!0;const Q=X(r,B),q=()=>O.type?jh(Q._f):CS(x),ee=oe=>{W=Number.isNaN(oe)||xi(oe)&&isNaN(oe.getTime())||Ar(oe,X(s,B,oe))};if(Q){let oe,ue;const de=q(),sn=x.type===uy.BLUR||x.type===uy.FOCUS_OUT,ol=!qS(Q._f)&&!e.resolver&&!X(n.errors,B)&&!Q._f.deps||KS(sn,X(n.touchedFields,B),n.isSubmitted,S,g),es=hy(B,l,sn);ke(s,B,de),sn?(Q._f.onBlur&&Q._f.onBlur(x),u&&u(0)):Q._f.onChange&&Q._f.onChange(x);const go=U(B,de,sn,!1),li=!Vt(go)||es;if(!sn&&p.values.next({name:B,type:x.type,values:{...s}}),ol)return f.isValid&&(t.mode==="onBlur"?sn&&j():j()),li&&p.state.next({name:B,...es?{}:go});if(!sn&&es&&p.state.next({...n}),e.resolver){const{errors:yo}=await y([B]);if(ee(de),W){const al=vy(n.errors,r,B),ts=vy(yo,r,al.name||B);oe=ts.error,B=ts.name,ue=Vt(yo)}}else A([B],!0),oe=(await gy(Q,s,C,e.shouldUseNativeValidation))[B],A([B]),ee(de),W&&(oe?ue=!1:f.isValid&&(ue=await T(r,!0)));W&&(Q._f.deps&&ie(Q._f.deps),w(B,ue,oe,go))}},te=(x,O)=>{if(X(n.errors,O)&&x.focus)return x.focus(),1},ie=async(x,O={})=>{let B,W;const Q=lu(x);if(e.resolver){const q=await _(Ge(x)?x:Q);B=Vt(q),W=x?!Q.some(ee=>X(q,ee)):B}else x?(W=(await Promise.all(Q.map(async q=>{const ee=X(r,q);return await T(ee&&ee._f?{[q]:ee}:ee)}))).every(Boolean),!(!W&&!n.isValid)&&j()):W=B=await T(r);return p.state.next({...!jn(x)||f.isValid&&B!==n.isValid?{}:{name:x},...e.resolver||!x?{isValid:B}:{},errors:n.errors}),O.shouldFocus&&!W&&aa(r,te,x?Q:l.mount),W},xe=x=>{const O={...o.mount?s:i};return Ge(x)?O:jn(x)?X(O,x):x.map(B=>X(O,B))},_e=(x,O)=>({invalid:!!X((O||n).errors,x),isDirty:!!X((O||n).dirtyFields,x),error:X((O||n).errors,x),isValidating:!!X(n.validatingFields,x),isTouched:!!X((O||n).touchedFields,x)}),Oe=x=>{x&&lu(x).forEach(O=>Je(n.errors,O)),p.state.next({errors:x?n.errors:{}})},nn=(x,O,B)=>{const W=(X(r,x,{_f:{}})._f||{}).ref,Q=X(n.errors,x)||{},{ref:q,message:ee,type:oe,...ue}=Q;ke(n.errors,x,{...ue,...O,ref:W}),p.state.next({name:x,errors:n.errors,isValid:!1}),B&&B.shouldFocus&&W&&W.focus&&W.focus()},gn=(x,O)=>Ln(x)?p.values.subscribe({next:B=>x(E(void 0,O),B)}):E(x,O,!0),zt=(x,O={})=>{for(const B of x?lu(x):l.mount)l.mount.delete(B),l.array.delete(B),O.keepValue||(Je(r,B),Je(s,B)),!O.keepError&&Je(n.errors,B),!O.keepDirty&&Je(n.dirtyFields,B),!O.keepTouched&&Je(n.touchedFields,B),!O.keepIsValidating&&Je(n.validatingFields,B),!e.shouldUnregister&&!O.keepDefaultValue&&Je(i,B);p.values.next({values:{...s}}),p.state.next({...n,...O.keepDirty?{isDirty:P()}:{}}),!O.keepIsValid&&j()},rn=({disabled:x,name:O,field:B,fields:W,value:Q})=>{if(Vn(x)&&o.mount||x){const q=x?void 0:Ge(Q)?jh(B?B._f:X(W,O)._f):Q;ke(s,O,q),U(O,q,!1,!1,!0)}},po=(x,O={})=>{let B=X(r,x);const W=Vn(O.disabled)||Vn(e.disabled);return ke(r,x,{...B||{},_f:{...B&&B._f?B._f:{ref:{name:x}},name:x,mount:!0,...O}}),l.mount.add(x),B?rn({field:B,disabled:Vn(O.disabled)?O.disabled:e.disabled,name:x,value:O.value}):L(x,!0,O.value),{...W?{disabled:O.disabled||e.disabled}:{},...e.progressive?{required:!!O.required,min:jo(O.min),max:jo(O.max),minLength:jo(O.minLength),maxLength:jo(O.maxLength),pattern:jo(O.pattern)}:{},name:x,onChange:H,onBlur:H,ref:Q=>{if(Q){po(x,O),B=X(r,x);const q=Ge(Q.value)&&Q.querySelectorAll&&Q.querySelectorAll("input,select,textarea")[0]||Q,ee=US(q),oe=B._f.refs||[];if(ee?oe.find(ue=>ue===q):q===B._f.ref)return;ke(r,x,{_f:{...B._f,...ee?{refs:[...oe.filter(Lh),q,...Array.isArray(X(i,x))?[{}]:[]],ref:{type:q.type,name:x}}:{ref:q}}}),L(x,!1,void 0,q)}else B=X(r,x,{}),B._f&&(B._f.mount=!1),(e.shouldUnregister||O.shouldUnregister)&&!(bS(l.array,x)&&o.action)&&l.unMount.add(x)}}},il=()=>e.shouldFocusError&&aa(r,te,l.mount),Xi=x=>{Vn(x)&&(p.state.next({disabled:x}),aa(r,(O,B)=>{const W=X(r,B);W&&(O.disabled=W._f.disabled||x,Array.isArray(W._f.refs)&&W._f.refs.forEach(Q=>{Q.disabled=W._f.disabled||x}))},0,!1))},ai=(x,O)=>async B=>{let W;if(B&&(B.preventDefault&&B.preventDefault(),B.persist&&B.persist()),e.disabled){O&&await O({...n.errors},B);return}let Q=on(s);if(p.state.next({isSubmitting:!0}),e.resolver){const{errors:q,values:ee}=await y();n.errors=q,Q=ee}else await T(r);if(Je(n.errors,"root"),Vt(n.errors)){p.state.next({errors:{}});try{await x(Q,B)}catch(q){W=q}}else O&&await O({...n.errors},B),il(),setTimeout(il);if(p.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Vt(n.errors)&&!W,submitCount:n.submitCount+1,errors:n.errors}),W)throw W},mo=(x,O={})=>{X(r,x)&&(Ge(O.defaultValue)?Be(x,on(X(i,x))):(Be(x,O.defaultValue),ke(i,x,on(O.defaultValue))),O.keepTouched||Je(n.touchedFields,x),O.keepDirty||(Je(n.dirtyFields,x),n.isDirty=O.defaultValue?P(x,on(X(i,x))):P()),O.keepError||(Je(n.errors,x),f.isValid&&j()),p.state.next({...n}))},Ji=(x,O={})=>{const B=x?on(x):i,W=on(B),Q=Vt(x),q=Q?i:W;if(O.keepDefaultValues||(i=B),!O.keepValues){if(O.keepDirtyValues){const ee=new Set([...l.mount,...Object.keys(Lo(i,s))]);for(const oe of Array.from(ee))X(n.dirtyFields,oe)?ke(q,oe,X(s,oe)):Be(oe,X(q,oe))}else{if(cp&&Ge(x))for(const ee of l.mount){const oe=X(r,ee);if(oe&&oe._f){const ue=Array.isArray(oe._f.refs)?oe._f.refs[0]:oe._f.ref;if($u(ue)){const de=ue.closest("form");if(de){de.reset();break}}}}r={}}s=t.shouldUnregister?O.keepDefaultValues?on(i):{}:on(q),p.array.next({values:{...q}}),p.values.next({values:{...q}})}l={mount:O.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!f.isValid||!!O.keepIsValid||!!O.keepDirtyValues,o.watch=!!t.shouldUnregister,p.state.next({submitCount:O.keepSubmitCount?n.submitCount:0,isDirty:Q?!1:O.keepDirty?n.isDirty:!!(O.keepDefaultValues&&!Ar(x,i)),isSubmitted:O.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:Q?{}:O.keepDirtyValues?O.keepDefaultValues&&s?Lo(i,s):n.dirtyFields:O.keepDefaultValues&&x?Lo(i,x):O.keepDirty?n.dirtyFields:{},touchedFields:O.keepTouched?n.touchedFields:{},errors:O.keepErrors?n.errors:{},isSubmitSuccessful:O.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1})},Zi=(x,O)=>Ji(Ln(x)?x(s):x,O);return{control:{register:po,unregister:zt,getFieldState:_e,handleSubmit:ai,setError:nn,_executeSchema:y,_getWatch:E,_getDirty:P,_updateValid:j,_removeUnmounted:R,_updateFieldArray:v,_updateDisabledField:rn,_getFieldArray:ye,_reset:Ji,_resetDefaultValues:()=>Ln(e.defaultValues)&&e.defaultValues().then(x=>{Zi(x,e.resetOptions),p.state.next({isLoading:!1})}),_updateFormState:x=>{n={...n,...x}},_disableForm:Xi,_subjects:p,_proxyFormState:f,_setErrors:N,get _fields(){return r},get _formValues(){return s},get _state(){return o},set _state(x){o=x},get _defaultValues(){return i},get _names(){return l},set _names(x){l=x},get _formState(){return n},set _formState(x){n=x},get _options(){return e},set _options(x){e={...e,...x}}},trigger:ie,register:po,handleSubmit:ai,watch:gn,setValue:Be,getValues:xe,reset:Zi,resetField:mo,clearErrors:Oe,unregister:zt,setError:nn,setFocus:(x,O={})=>{const B=X(r,x),W=B&&B._f;if(W){const Q=W.refs?W.refs[0]:W.ref;Q.focus&&(Q.focus(),O.shouldSelect&&Ln(Q.select)&&Q.select())}},getFieldState:_e}}function Aw(t={}){const e=an.useRef(),n=an.useRef(),[r,i]=an.useState({isDirty:!1,isValidating:!1,isLoading:Ln(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,defaultValues:Ln(t.defaultValues)?void 0:t.defaultValues});e.current||(e.current={...HS(t),formState:r});const s=e.current.control;return s._options=t,OS({subject:s._subjects.state,next:o=>{NS(o,s._proxyFormState,s._updateFormState)&&i({...s._formState})}}),an.useEffect(()=>s._disableForm(t.disabled),[s,t.disabled]),an.useEffect(()=>{if(s._proxyFormState.isDirty){const o=s._getDirty();o!==r.isDirty&&s._subjects.state.next({isDirty:o})}},[s,r.isDirty]),an.useEffect(()=>{t.values&&!Ar(t.values,n.current)?(s._reset(t.values,s._options.resetOptions),n.current=t.values,i(o=>({...o}))):s._resetDefaultValues()},[t.values,s]),an.useEffect(()=>{t.errors&&s._setErrors(t.errors)},[t.errors,s]),an.useEffect(()=>{s._state.mount||(s._updateValid(),s._state.mount=!0),s._state.watch&&(s._state.watch=!1,s._subjects.state.next({...s._formState})),s._removeUnmounted()}),an.useEffect(()=>{t.shouldUnregister&&s._subjects.values.next({values:s._getWatch()})},[t.shouldUnregister,s]),e.current.formState=VS(r,s),e.current}const WS=[{value:"18-24",label:"18-24 years"},{value:"25-34",label:"25-34 years"},{value:"35-44",label:"35-44 years"},{value:"45-54",label:"45-54 years"},{value:"55-64",label:"55-64 years"},{value:"65+",label:"65 years or older"}],YS=[{value:"0-25k",label:"$0 - $25,000"},{value:"25-50k",label:"$25,001 - $50,000"},{value:"50-100k",label:"$50,001 - $100,000"},{value:"100k+",label:"$100,001+"}],XS=[{value:"primary",label:"Primary Residence"},{value:"investment",label:"Investment Property"},{value:"vacation",label:"Vacation Home"}];function JS({onSubmit:t}){const{register:e,handleSubmit:n,formState:{errors:r,isSubmitting:i,isSubmitSuccessful:s},reset:o}=Aw(),l=async u=>{await new Promise(h=>setTimeout(h,1e3)),t(u),o()};return s?D.jsxs("div",{className:"text-center p-8 animate-fadeIn",children:[D.jsx(mw,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),D.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Profile Updated!"}),D.jsx("p",{className:"text-gray-600 mb-6",children:"Your financial profile has been successfully saved."}),D.jsx("button",{onClick:()=>o(),className:`px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 
                   transition-colors duration-200 focus:outline-none focus:ring-2 
                   focus:ring-blue-500 focus:ring-offset-2`,children:"Add Another Profile"})]}):D.jsxs("form",{onSubmit:n(l),className:"space-y-6 animate-fadeIn",children:[D.jsxs("div",{children:[D.jsx("label",{htmlFor:"age",className:"block text-sm font-medium text-gray-700 mb-1",children:"Age Range"}),D.jsxs("select",{id:"age",...e("age",{required:"Age range is required"}),className:`w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 
                   focus:ring-blue-500 focus:border-blue-500`,children:[D.jsx("option",{value:"",children:"Select age range"}),WS.map(u=>D.jsx("option",{value:u.value,children:u.label},u.value))]}),r.age&&D.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.age.message})]}),D.jsxs("div",{children:[D.jsx("label",{htmlFor:"income",className:"block text-sm font-medium text-gray-700 mb-1",children:"Annual Income"}),D.jsxs("select",{id:"income",...e("income",{required:"Income range is required"}),className:`w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 
                   focus:ring-blue-500 focus:border-blue-500`,children:[D.jsx("option",{value:"",children:"Select income range"}),YS.map(u=>D.jsx("option",{value:u.value,children:u.label},u.value))]}),r.income&&D.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.income.message})]}),D.jsx("div",{className:"space-y-4",children:D.jsxs("fieldset",{children:[D.jsx("legend",{className:"text-sm font-medium text-gray-700 mb-3",children:"Assets & Investments"}),D.jsxs("div",{className:"space-y-4",children:[D.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg space-y-3",children:[D.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Property Ownership"}),XS.map(u=>D.jsxs("label",{className:"flex items-center",children:[D.jsx("input",{type:"checkbox",value:u.value,...e("properties"),className:`w-4 h-4 text-blue-600 border-gray-300 rounded 
                             focus:ring-blue-500`}),D.jsx("span",{className:"ml-2 text-sm text-gray-700",children:u.label})]},u.value))]}),D.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:D.jsxs("label",{className:"flex items-start",children:[D.jsx("input",{type:"checkbox",...e("hasAlternativeInvestments"),className:`w-4 h-4 text-blue-600 border-gray-300 rounded 
                           focus:ring-blue-500 mt-1`}),D.jsxs("div",{className:"ml-2",children:[D.jsx("span",{className:"text-sm font-medium text-gray-700 block mb-1",children:"Alternative Investments"}),D.jsx("span",{className:"text-sm text-gray-500",children:"I have investments in cryptocurrency, precious metals, or other alternative assets"})]})]})})]})]})}),D.jsx("button",{type:"submit",disabled:i,className:`w-full px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 
                 transition-colors duration-200 focus:outline-none focus:ring-2 
                 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 
                 disabled:cursor-not-allowed`,children:i?"Saving...":"Start the Financial Resilience Assessment"})]})}function ZS({onSubmit:t}){const{register:e,handleSubmit:n,formState:{errors:r}}=Aw();return D.jsxs("form",{onSubmit:n(t),className:"space-y-6 max-w-md mx-auto",children:[D.jsxs("div",{children:[D.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name"}),D.jsx("input",{id:"name",type:"text",...e("name",{required:"Name is required",minLength:{value:2,message:"Name must be at least 2 characters"}}),className:`w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 
                   focus:ring-blue-500 focus:border-blue-500`,placeholder:"John Doe"}),r.name&&D.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.name.message})]}),D.jsxs("div",{children:[D.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"}),D.jsx("input",{id:"email",type:"email",...e("email",{required:"Email is required",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"Invalid email address"}}),className:`w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 
                   focus:ring-blue-500 focus:border-blue-500`,placeholder:"john@example.com"}),r.email&&D.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.email.message})]}),D.jsxs("div",{children:[D.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number"}),D.jsx("input",{id:"phone",type:"tel",...e("phone",{required:"Phone number is required",pattern:{value:/^[+]?[(]?[0-9]{3}[)]?[-\s.]?[0-9]{3}[-\s.]?[0-9]{4}$/,message:"Invalid phone number format"}}),className:`w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 
                   focus:ring-blue-500 focus:border-blue-500`,placeholder:"(123) 456-7890"}),r.phone&&D.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.phone.message})]}),D.jsx("button",{type:"submit",className:`w-full px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 
                 transition-colors duration-200 focus:outline-none focus:ring-2 
                 focus:ring-blue-500 focus:ring-offset-2`,children:"View My Results"})]})}const Rs=[{id:"market_drop",text:"How would you react if your investment portfolio dropped 20% in value?",type:"choice",options:["Sell everything immediately","Sell some investments","Hold and wait it out","Buy more while prices are low"],weight:1.5},{id:"investment_horizon",text:"When do you expect to need the majority of your investment money?",type:"choice",options:["Within 2 years","2-5 years","5-10 years","More than 10 years"],weight:1.2},{id:"emergency_fund",text:"How many months of expenses do you have saved in an emergency fund?",type:"choice",options:["No emergency fund","1-3 months","3-6 months","6+ months"],weight:1.3},{id:"risk_comfort",text:"On a scale of 1-10, how comfortable are you with financial risk?",type:"scale",weight:1.4},{id:"income_stability",text:"How stable is your current income source?",type:"choice",options:["Very unstable","Somewhat unstable","Stable","Very stable"],weight:1.1}];function ex(t){const e=Rs.reduce((l,u)=>l+u.weight,0),n=t.reduce((l,u)=>{const h=Rs.find(f=>f.id===u.questionId);return h?l+u.value*h.weight:l},0),r=4*e,i=Math.round(n/r*100);let s;i<40?s="Conservative":i<70?s="Moderate":s="Aggressive";const o=tx(i);return{score:i,riskLevel:s,recommendations:o}}function tx(t,e){const n=[];return t<40?n.push("Consider a portfolio focused on bonds and stable dividend stocks","Maintain a larger emergency fund for security","Look into Principal Protection Accounts for guaranteed safety of principal"):t<70?n.push("Balance your portfolio between growth stocks and fixed-income investments","Diversify across multiple asset classes and consider a Principal Protection Account to reduce market risk","Consider index funds for steady market exposure"):n.push("Focus on growth stocks and emerging markets","Consider small-cap investments for higher potential returns","Look into alternative investments like Principal Protection Accounts to offset downside risk"),n}var _y={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sw=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},nx=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],l=t[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},xw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,l=o?t[i+1]:0,u=i+2<t.length,h=u?t[i+2]:0,f=s>>2,p=(s&3)<<4|l>>4;let g=(l&15)<<2|h>>6,S=h&63;u||(S=64,o||(g=64)),r.push(n[f],n[p],n[g],n[S])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Sw(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):nx(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],l=i<t.length?n[t.charAt(i)]:0;++i;const h=i<t.length?n[t.charAt(i)]:64;++i;const p=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||l==null||h==null||p==null)throw new rx;const g=s<<2|l>>4;if(r.push(g),h!==64){const S=l<<4&240|h>>2;if(r.push(S),p!==64){const C=h<<6&192|p;r.push(C)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class rx extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ix=function(t){const e=Sw(t);return xw.encodeByteArray(e,!0)},Gu=function(t){return ix(t).replace(/\./g,"")},sx=function(t){try{return xw.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ox(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ax=()=>ox().__FIREBASE_DEFAULTS__,lx=()=>{if(typeof process>"u"||typeof _y>"u")return;const t=_y.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},ux=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&sx(t[1]);return e&&JSON.parse(e)},pp=()=>{try{return ax()||lx()||ux()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},cx=t=>{var e,n;return(n=(e=pp())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},hx=t=>{const e=cx(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Pw=()=>{var t;return(t=pp())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dx{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fx(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Gu(JSON.stringify(n)),Gu(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qu(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function px(){var t;const e=(t=pp())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function mx(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Rw(){return!px()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function mp(){try{return typeof indexedDB=="object"}catch{return!1}}function Cw(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}function gx(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yx="FirebaseError";class dr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=yx,Object.setPrototypeOf(this,dr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Pc.prototype.create)}}class Pc{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?vx(s,r):"Error",l=`${this.serviceName}: ${o} (${i}).`;return new dr(i,l,r)}}function vx(t,e){return t.replace(_x,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const _x=/\{\$([^}]+)}/g;function Hu(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(wy(s)&&wy(o)){if(!Hu(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function wy(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wx=1e3,Ex=2,Ix=4*60*60*1e3,Tx=.5;function Ey(t,e=wx,n=Ex){const r=e*Math.pow(n,t),i=Math.round(Tx*r*(Math.random()-.5)*2);return Math.min(Ix,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bi(t){return t&&t._delegate?t._delegate:t}class ur{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ax{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new dx;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(xx(e))try{this.getOrInitializeService({instanceIdentifier:gi})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=gi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=gi){return this.instances.has(e)}getOptions(e=gi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);r===l&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Sx(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=gi){return this.component?this.component.multipleInstances?e:gi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Sx(t){return t===gi?void 0:t}function xx(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Px{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Ax(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(pe||(pe={}));const Rx={debug:pe.DEBUG,verbose:pe.VERBOSE,info:pe.INFO,warn:pe.WARN,error:pe.ERROR,silent:pe.SILENT},Cx=pe.INFO,kx={[pe.DEBUG]:"log",[pe.VERBOSE]:"log",[pe.INFO]:"info",[pe.WARN]:"warn",[pe.ERROR]:"error"},bx=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=kx[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class gp{constructor(e){this.name=e,this._logLevel=Cx,this._logHandler=bx,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in pe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Rx[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,pe.DEBUG,...e),this._logHandler(this,pe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,pe.VERBOSE,...e),this._logHandler(this,pe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,pe.INFO,...e),this._logHandler(this,pe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,pe.WARN,...e),this._logHandler(this,pe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,pe.ERROR,...e),this._logHandler(this,pe.ERROR,...e)}}const Dx=(t,e)=>e.some(n=>t instanceof n);let Iy,Ty;function Vx(){return Iy||(Iy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Nx(){return Ty||(Ty=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const kw=new WeakMap,Qd=new WeakMap,bw=new WeakMap,Bh=new WeakMap,yp=new WeakMap;function Ox(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Kr(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&kw.set(n,t)}).catch(()=>{}),yp.set(e,t),e}function Fx(t){if(Qd.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Qd.set(t,e)}let Hd={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Qd.get(t);if(e==="objectStoreNames")return t.objectStoreNames||bw.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Kr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Mx(t){Hd=t(Hd)}function Lx(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Uh(this),e,...n);return bw.set(r,e.sort?e.sort():[e]),Kr(r)}:Nx().includes(t)?function(...e){return t.apply(Uh(this),e),Kr(kw.get(this))}:function(...e){return Kr(t.apply(Uh(this),e))}}function jx(t){return typeof t=="function"?Lx(t):(t instanceof IDBTransaction&&Fx(t),Dx(t,Vx())?new Proxy(t,Hd):t)}function Kr(t){if(t instanceof IDBRequest)return Ox(t);if(Bh.has(t))return Bh.get(t);const e=jx(t);return e!==t&&(Bh.set(t,e),yp.set(e,t)),e}const Uh=t=>yp.get(t);function Dw(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),l=Kr(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Kr(o.result),u.oldVersion,u.newVersion,Kr(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",h=>i(h.oldVersion,h.newVersion,h))}).catch(()=>{}),l}const Bx=["get","getKey","getAll","getAllKeys","count"],Ux=["put","add","delete","clear"],zh=new Map;function Ay(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(zh.get(e))return zh.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=Ux.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Bx.includes(n)))return;const s=async function(o,...l){const u=this.transaction(o,i?"readwrite":"readonly");let h=u.store;return r&&(h=h.index(l.shift())),(await Promise.all([h[n](...l),i&&u.done]))[0]};return zh.set(e,s),s}Mx(t=>({...t,get:(e,n,r)=>Ay(e,n)||t.get(e,n,r),has:(e,n)=>!!Ay(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zx{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if($x(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function $x(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Wd="@firebase/app",Sy="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cr=new gp("@firebase/app"),qx="@firebase/app-compat",Kx="@firebase/analytics-compat",Gx="@firebase/analytics",Qx="@firebase/app-check-compat",Hx="@firebase/app-check",Wx="@firebase/auth",Yx="@firebase/auth-compat",Xx="@firebase/database",Jx="@firebase/data-connect",Zx="@firebase/database-compat",eP="@firebase/functions",tP="@firebase/functions-compat",nP="@firebase/installations",rP="@firebase/installations-compat",iP="@firebase/messaging",sP="@firebase/messaging-compat",oP="@firebase/performance",aP="@firebase/performance-compat",lP="@firebase/remote-config",uP="@firebase/remote-config-compat",cP="@firebase/storage",hP="@firebase/storage-compat",dP="@firebase/firestore",fP="@firebase/vertexai-preview",pP="@firebase/firestore-compat",mP="firebase",gP="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yd="[DEFAULT]",yP={[Wd]:"fire-core",[qx]:"fire-core-compat",[Gx]:"fire-analytics",[Kx]:"fire-analytics-compat",[Hx]:"fire-app-check",[Qx]:"fire-app-check-compat",[Wx]:"fire-auth",[Yx]:"fire-auth-compat",[Xx]:"fire-rtdb",[Jx]:"fire-data-connect",[Zx]:"fire-rtdb-compat",[eP]:"fire-fn",[tP]:"fire-fn-compat",[nP]:"fire-iid",[rP]:"fire-iid-compat",[iP]:"fire-fcm",[sP]:"fire-fcm-compat",[oP]:"fire-perf",[aP]:"fire-perf-compat",[lP]:"fire-rc",[uP]:"fire-rc-compat",[cP]:"fire-gcs",[hP]:"fire-gcs-compat",[dP]:"fire-fst",[pP]:"fire-fst-compat",[fP]:"fire-vertex","fire-js":"fire-js",[mP]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wu=new Map,vP=new Map,Xd=new Map;function xy(t,e){try{t.container.addComponent(e)}catch(n){cr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Jr(t){const e=t.name;if(Xd.has(e))return cr.debug(`There were multiple attempts to register component ${e}.`),!1;Xd.set(e,t);for(const n of Wu.values())xy(n,t);for(const n of vP.values())xy(n,t);return!0}function Ja(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _P={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Gr=new Pc("app","Firebase",_P);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wP{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ur("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Gr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EP=gP;function Vw(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Yd,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Gr.create("bad-app-name",{appName:String(i)});if(n||(n=Pw()),!n)throw Gr.create("no-options");const s=Wu.get(i);if(s){if(Hu(n,s.options)&&Hu(r,s.config))return s;throw Gr.create("duplicate-app",{appName:i})}const o=new Px(i);for(const u of Xd.values())o.addComponent(u);const l=new wP(n,r,o);return Wu.set(i,l),l}function Nw(t=Yd){const e=Wu.get(t);if(!e&&t===Yd&&Pw())return Vw();if(!e)throw Gr.create("no-app",{appName:t});return e}function qn(t,e,n){var r;let i=(r=yP[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const l=[`Unable to register library "${i}" with version "${e}":`];s&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),cr.warn(l.join(" "));return}Jr(new ur(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IP="firebase-heartbeat-database",TP=1,Da="firebase-heartbeat-store";let $h=null;function Ow(){return $h||($h=Dw(IP,TP,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Da)}catch(n){console.warn(n)}}}}).catch(t=>{throw Gr.create("idb-open",{originalErrorMessage:t.message})})),$h}async function AP(t){try{const n=(await Ow()).transaction(Da),r=await n.objectStore(Da).get(Fw(t));return await n.done,r}catch(e){if(e instanceof dr)cr.warn(e.message);else{const n=Gr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});cr.warn(n.message)}}}async function Py(t,e){try{const r=(await Ow()).transaction(Da,"readwrite");await r.objectStore(Da).put(e,Fw(t)),await r.done}catch(n){if(n instanceof dr)cr.warn(n.message);else{const r=Gr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});cr.warn(r.message)}}}function Fw(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SP=1024,xP=30*24*60*60*1e3;class PP{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new CP(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Ry();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const l=new Date(o.date).valueOf();return Date.now()-l<=xP}),this._storage.overwrite(this._heartbeatsCache))}catch(r){cr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Ry(),{heartbeatsToSend:r,unsentEntries:i}=RP(this._heartbeatsCache.heartbeats),s=Gu(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return cr.warn(n),""}}}function Ry(){return new Date().toISOString().substring(0,10)}function RP(t,e=SP){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Cy(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Cy(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class CP{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return mp()?Cw().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await AP(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Py(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Py(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Cy(t){return Gu(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kP(t){Jr(new ur("platform-logger",e=>new zx(e),"PRIVATE")),Jr(new ur("heartbeat",e=>new PP(e),"PRIVATE")),qn(Wd,Sy,t),qn(Wd,Sy,"esm2017"),qn("fire-js","")}kP("");var bP="firebase",DP="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */qn(bP,DP,"app");class yi extends Error{constructor(e,n,r){super(e),this.code=n,this.originalError=r,this.name="FirebaseApiError"}}function vp(t){if(t instanceof dr)switch(console.error("Firebase operation failed:",t.code,t.message),t.code){case"permission-denied":throw new yi("Unable to save data at this time. Please try again.","PERMISSION_DENIED",t);case"unavailable":throw new yi("Service is temporarily unavailable. Please try again in a few minutes.","SERVICE_UNAVAILABLE",t);case"failed-precondition":throw new yi("Unable to complete the operation. Please refresh and try again.","FAILED_PRECONDITION",t);case"resource-exhausted":throw new yi("Too many requests. Please wait a moment before trying again.","RESOURCE_EXHAUSTED",t);default:throw new yi("An error occurred while saving your data. Please try again.","UNKNOWN_ERROR",t)}throw console.error("Non-Firebase error occurred:",t),new yi("An unexpected error occurred. Please try again.","UNKNOWN_ERROR")}var ky=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Mw;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(w,y){function _(){}_.prototype=y.prototype,w.D=y.prototype,w.prototype=new _,w.prototype.constructor=w,w.C=function(T,R,P){for(var E=Array(arguments.length-2),ye=2;ye<arguments.length;ye++)E[ye-2]=arguments[ye];return y.prototype[R].apply(T,E)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(w,y,_){_||(_=0);var T=Array(16);if(typeof y=="string")for(var R=0;16>R;++R)T[R]=y.charCodeAt(_++)|y.charCodeAt(_++)<<8|y.charCodeAt(_++)<<16|y.charCodeAt(_++)<<24;else for(R=0;16>R;++R)T[R]=y[_++]|y[_++]<<8|y[_++]<<16|y[_++]<<24;y=w.g[0],_=w.g[1],R=w.g[2];var P=w.g[3],E=y+(P^_&(R^P))+T[0]+3614090360&4294967295;y=_+(E<<7&4294967295|E>>>25),E=P+(R^y&(_^R))+T[1]+3905402710&4294967295,P=y+(E<<12&4294967295|E>>>20),E=R+(_^P&(y^_))+T[2]+606105819&4294967295,R=P+(E<<17&4294967295|E>>>15),E=_+(y^R&(P^y))+T[3]+3250441966&4294967295,_=R+(E<<22&4294967295|E>>>10),E=y+(P^_&(R^P))+T[4]+4118548399&4294967295,y=_+(E<<7&4294967295|E>>>25),E=P+(R^y&(_^R))+T[5]+1200080426&4294967295,P=y+(E<<12&4294967295|E>>>20),E=R+(_^P&(y^_))+T[6]+2821735955&4294967295,R=P+(E<<17&4294967295|E>>>15),E=_+(y^R&(P^y))+T[7]+4249261313&4294967295,_=R+(E<<22&4294967295|E>>>10),E=y+(P^_&(R^P))+T[8]+1770035416&4294967295,y=_+(E<<7&4294967295|E>>>25),E=P+(R^y&(_^R))+T[9]+2336552879&4294967295,P=y+(E<<12&4294967295|E>>>20),E=R+(_^P&(y^_))+T[10]+4294925233&4294967295,R=P+(E<<17&4294967295|E>>>15),E=_+(y^R&(P^y))+T[11]+2304563134&4294967295,_=R+(E<<22&4294967295|E>>>10),E=y+(P^_&(R^P))+T[12]+1804603682&4294967295,y=_+(E<<7&4294967295|E>>>25),E=P+(R^y&(_^R))+T[13]+4254626195&4294967295,P=y+(E<<12&4294967295|E>>>20),E=R+(_^P&(y^_))+T[14]+2792965006&4294967295,R=P+(E<<17&4294967295|E>>>15),E=_+(y^R&(P^y))+T[15]+1236535329&4294967295,_=R+(E<<22&4294967295|E>>>10),E=y+(R^P&(_^R))+T[1]+4129170786&4294967295,y=_+(E<<5&4294967295|E>>>27),E=P+(_^R&(y^_))+T[6]+3225465664&4294967295,P=y+(E<<9&4294967295|E>>>23),E=R+(y^_&(P^y))+T[11]+643717713&4294967295,R=P+(E<<14&4294967295|E>>>18),E=_+(P^y&(R^P))+T[0]+3921069994&4294967295,_=R+(E<<20&4294967295|E>>>12),E=y+(R^P&(_^R))+T[5]+3593408605&4294967295,y=_+(E<<5&4294967295|E>>>27),E=P+(_^R&(y^_))+T[10]+38016083&4294967295,P=y+(E<<9&4294967295|E>>>23),E=R+(y^_&(P^y))+T[15]+3634488961&4294967295,R=P+(E<<14&4294967295|E>>>18),E=_+(P^y&(R^P))+T[4]+3889429448&4294967295,_=R+(E<<20&4294967295|E>>>12),E=y+(R^P&(_^R))+T[9]+568446438&4294967295,y=_+(E<<5&4294967295|E>>>27),E=P+(_^R&(y^_))+T[14]+3275163606&4294967295,P=y+(E<<9&4294967295|E>>>23),E=R+(y^_&(P^y))+T[3]+4107603335&4294967295,R=P+(E<<14&4294967295|E>>>18),E=_+(P^y&(R^P))+T[8]+1163531501&4294967295,_=R+(E<<20&4294967295|E>>>12),E=y+(R^P&(_^R))+T[13]+2850285829&4294967295,y=_+(E<<5&4294967295|E>>>27),E=P+(_^R&(y^_))+T[2]+4243563512&4294967295,P=y+(E<<9&4294967295|E>>>23),E=R+(y^_&(P^y))+T[7]+1735328473&4294967295,R=P+(E<<14&4294967295|E>>>18),E=_+(P^y&(R^P))+T[12]+2368359562&4294967295,_=R+(E<<20&4294967295|E>>>12),E=y+(_^R^P)+T[5]+4294588738&4294967295,y=_+(E<<4&4294967295|E>>>28),E=P+(y^_^R)+T[8]+2272392833&4294967295,P=y+(E<<11&4294967295|E>>>21),E=R+(P^y^_)+T[11]+1839030562&4294967295,R=P+(E<<16&4294967295|E>>>16),E=_+(R^P^y)+T[14]+4259657740&4294967295,_=R+(E<<23&4294967295|E>>>9),E=y+(_^R^P)+T[1]+2763975236&4294967295,y=_+(E<<4&4294967295|E>>>28),E=P+(y^_^R)+T[4]+1272893353&4294967295,P=y+(E<<11&4294967295|E>>>21),E=R+(P^y^_)+T[7]+4139469664&4294967295,R=P+(E<<16&4294967295|E>>>16),E=_+(R^P^y)+T[10]+3200236656&4294967295,_=R+(E<<23&4294967295|E>>>9),E=y+(_^R^P)+T[13]+681279174&4294967295,y=_+(E<<4&4294967295|E>>>28),E=P+(y^_^R)+T[0]+3936430074&4294967295,P=y+(E<<11&4294967295|E>>>21),E=R+(P^y^_)+T[3]+3572445317&4294967295,R=P+(E<<16&4294967295|E>>>16),E=_+(R^P^y)+T[6]+76029189&4294967295,_=R+(E<<23&4294967295|E>>>9),E=y+(_^R^P)+T[9]+3654602809&4294967295,y=_+(E<<4&4294967295|E>>>28),E=P+(y^_^R)+T[12]+3873151461&4294967295,P=y+(E<<11&4294967295|E>>>21),E=R+(P^y^_)+T[15]+530742520&4294967295,R=P+(E<<16&4294967295|E>>>16),E=_+(R^P^y)+T[2]+3299628645&4294967295,_=R+(E<<23&4294967295|E>>>9),E=y+(R^(_|~P))+T[0]+4096336452&4294967295,y=_+(E<<6&4294967295|E>>>26),E=P+(_^(y|~R))+T[7]+1126891415&4294967295,P=y+(E<<10&4294967295|E>>>22),E=R+(y^(P|~_))+T[14]+2878612391&4294967295,R=P+(E<<15&4294967295|E>>>17),E=_+(P^(R|~y))+T[5]+4237533241&4294967295,_=R+(E<<21&4294967295|E>>>11),E=y+(R^(_|~P))+T[12]+1700485571&4294967295,y=_+(E<<6&4294967295|E>>>26),E=P+(_^(y|~R))+T[3]+2399980690&4294967295,P=y+(E<<10&4294967295|E>>>22),E=R+(y^(P|~_))+T[10]+4293915773&4294967295,R=P+(E<<15&4294967295|E>>>17),E=_+(P^(R|~y))+T[1]+2240044497&4294967295,_=R+(E<<21&4294967295|E>>>11),E=y+(R^(_|~P))+T[8]+1873313359&4294967295,y=_+(E<<6&4294967295|E>>>26),E=P+(_^(y|~R))+T[15]+4264355552&4294967295,P=y+(E<<10&4294967295|E>>>22),E=R+(y^(P|~_))+T[6]+2734768916&4294967295,R=P+(E<<15&4294967295|E>>>17),E=_+(P^(R|~y))+T[13]+1309151649&4294967295,_=R+(E<<21&4294967295|E>>>11),E=y+(R^(_|~P))+T[4]+4149444226&4294967295,y=_+(E<<6&4294967295|E>>>26),E=P+(_^(y|~R))+T[11]+3174756917&4294967295,P=y+(E<<10&4294967295|E>>>22),E=R+(y^(P|~_))+T[2]+718787259&4294967295,R=P+(E<<15&4294967295|E>>>17),E=_+(P^(R|~y))+T[9]+3951481745&4294967295,w.g[0]=w.g[0]+y&4294967295,w.g[1]=w.g[1]+(R+(E<<21&4294967295|E>>>11))&4294967295,w.g[2]=w.g[2]+R&4294967295,w.g[3]=w.g[3]+P&4294967295}r.prototype.u=function(w,y){y===void 0&&(y=w.length);for(var _=y-this.blockSize,T=this.B,R=this.h,P=0;P<y;){if(R==0)for(;P<=_;)i(this,w,P),P+=this.blockSize;if(typeof w=="string"){for(;P<y;)if(T[R++]=w.charCodeAt(P++),R==this.blockSize){i(this,T),R=0;break}}else for(;P<y;)if(T[R++]=w[P++],R==this.blockSize){i(this,T),R=0;break}}this.h=R,this.o+=y},r.prototype.v=function(){var w=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);w[0]=128;for(var y=1;y<w.length-8;++y)w[y]=0;var _=8*this.o;for(y=w.length-8;y<w.length;++y)w[y]=_&255,_/=256;for(this.u(w),w=Array(16),y=_=0;4>y;++y)for(var T=0;32>T;T+=8)w[_++]=this.g[y]>>>T&255;return w};function s(w,y){var _=l;return Object.prototype.hasOwnProperty.call(_,w)?_[w]:_[w]=y(w)}function o(w,y){this.h=y;for(var _=[],T=!0,R=w.length-1;0<=R;R--){var P=w[R]|0;T&&P==y||(_[R]=P,T=!1)}this.g=_}var l={};function u(w){return-128<=w&&128>w?s(w,function(y){return new o([y|0],0>y?-1:0)}):new o([w|0],0>w?-1:0)}function h(w){if(isNaN(w)||!isFinite(w))return p;if(0>w)return j(h(-w));for(var y=[],_=1,T=0;w>=_;T++)y[T]=w/_|0,_*=4294967296;return new o(y,0)}function f(w,y){if(w.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(w.charAt(0)=="-")return j(f(w.substring(1),y));if(0<=w.indexOf("-"))throw Error('number format error: interior "-" character');for(var _=h(Math.pow(y,8)),T=p,R=0;R<w.length;R+=8){var P=Math.min(8,w.length-R),E=parseInt(w.substring(R,R+P),y);8>P?(P=h(Math.pow(y,P)),T=T.j(P).add(h(E))):(T=T.j(_),T=T.add(h(E)))}return T}var p=u(0),g=u(1),S=u(16777216);t=o.prototype,t.m=function(){if(k(this))return-j(this).m();for(var w=0,y=1,_=0;_<this.g.length;_++){var T=this.i(_);w+=(0<=T?T:4294967296+T)*y,y*=4294967296}return w},t.toString=function(w){if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(C(this))return"0";if(k(this))return"-"+j(this).toString(w);for(var y=h(Math.pow(w,6)),_=this,T="";;){var R=N(_,y).g;_=A(_,R.j(y));var P=((0<_.g.length?_.g[0]:_.h)>>>0).toString(w);if(_=R,C(_))return P+T;for(;6>P.length;)P="0"+P;T=P+T}},t.i=function(w){return 0>w?0:w<this.g.length?this.g[w]:this.h};function C(w){if(w.h!=0)return!1;for(var y=0;y<w.g.length;y++)if(w.g[y]!=0)return!1;return!0}function k(w){return w.h==-1}t.l=function(w){return w=A(this,w),k(w)?-1:C(w)?0:1};function j(w){for(var y=w.g.length,_=[],T=0;T<y;T++)_[T]=~w.g[T];return new o(_,~w.h).add(g)}t.abs=function(){return k(this)?j(this):this},t.add=function(w){for(var y=Math.max(this.g.length,w.g.length),_=[],T=0,R=0;R<=y;R++){var P=T+(this.i(R)&65535)+(w.i(R)&65535),E=(P>>>16)+(this.i(R)>>>16)+(w.i(R)>>>16);T=E>>>16,P&=65535,E&=65535,_[R]=E<<16|P}return new o(_,_[_.length-1]&-2147483648?-1:0)};function A(w,y){return w.add(j(y))}t.j=function(w){if(C(this)||C(w))return p;if(k(this))return k(w)?j(this).j(j(w)):j(j(this).j(w));if(k(w))return j(this.j(j(w)));if(0>this.l(S)&&0>w.l(S))return h(this.m()*w.m());for(var y=this.g.length+w.g.length,_=[],T=0;T<2*y;T++)_[T]=0;for(T=0;T<this.g.length;T++)for(var R=0;R<w.g.length;R++){var P=this.i(T)>>>16,E=this.i(T)&65535,ye=w.i(R)>>>16,De=w.i(R)&65535;_[2*T+2*R]+=E*De,v(_,2*T+2*R),_[2*T+2*R+1]+=P*De,v(_,2*T+2*R+1),_[2*T+2*R+1]+=E*ye,v(_,2*T+2*R+1),_[2*T+2*R+2]+=P*ye,v(_,2*T+2*R+2)}for(T=0;T<y;T++)_[T]=_[2*T+1]<<16|_[2*T];for(T=y;T<2*y;T++)_[T]=0;return new o(_,0)};function v(w,y){for(;(w[y]&65535)!=w[y];)w[y+1]+=w[y]>>>16,w[y]&=65535,y++}function I(w,y){this.g=w,this.h=y}function N(w,y){if(C(y))throw Error("division by zero");if(C(w))return new I(p,p);if(k(w))return y=N(j(w),y),new I(j(y.g),j(y.h));if(k(y))return y=N(w,j(y)),new I(j(y.g),y.h);if(30<w.g.length){if(k(w)||k(y))throw Error("slowDivide_ only works with positive integers.");for(var _=g,T=y;0>=T.l(w);)_=L(_),T=L(T);var R=U(_,1),P=U(T,1);for(T=U(T,2),_=U(_,2);!C(T);){var E=P.add(T);0>=E.l(w)&&(R=R.add(_),P=E),T=U(T,1),_=U(_,1)}return y=A(w,R.j(y)),new I(R,y)}for(R=p;0<=w.l(y);){for(_=Math.max(1,Math.floor(w.m()/y.m())),T=Math.ceil(Math.log(_)/Math.LN2),T=48>=T?1:Math.pow(2,T-48),P=h(_),E=P.j(y);k(E)||0<E.l(w);)_-=T,P=h(_),E=P.j(y);C(P)&&(P=g),R=R.add(P),w=A(w,E)}return new I(R,w)}t.A=function(w){return N(this,w).h},t.and=function(w){for(var y=Math.max(this.g.length,w.g.length),_=[],T=0;T<y;T++)_[T]=this.i(T)&w.i(T);return new o(_,this.h&w.h)},t.or=function(w){for(var y=Math.max(this.g.length,w.g.length),_=[],T=0;T<y;T++)_[T]=this.i(T)|w.i(T);return new o(_,this.h|w.h)},t.xor=function(w){for(var y=Math.max(this.g.length,w.g.length),_=[],T=0;T<y;T++)_[T]=this.i(T)^w.i(T);return new o(_,this.h^w.h)};function L(w){for(var y=w.g.length+1,_=[],T=0;T<y;T++)_[T]=w.i(T)<<1|w.i(T-1)>>>31;return new o(_,w.h)}function U(w,y){var _=y>>5;y%=32;for(var T=w.g.length-_,R=[],P=0;P<T;P++)R[P]=0<y?w.i(P+_)>>>y|w.i(P+_+1)<<32-y:w.i(P+_);return new o(R,w.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=f,Mw=o}).apply(typeof ky<"u"?ky:typeof self<"u"?self:typeof window<"u"?window:{});var zl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Lw,Yo,jw,cu,Jd,Bw,Uw,zw;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,c,d){return a==Array.prototype||a==Object.prototype||(a[c]=d.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof zl=="object"&&zl];for(var c=0;c<a.length;++c){var d=a[c];if(d&&d.Math==Math)return d}throw Error("Cannot find global object")}var r=n(this);function i(a,c){if(c)e:{var d=r;a=a.split(".");for(var m=0;m<a.length-1;m++){var b=a[m];if(!(b in d))break e;d=d[b]}a=a[a.length-1],m=d[a],c=c(m),c!=m&&c!=null&&e(d,a,{configurable:!0,writable:!0,value:c})}}function s(a,c){a instanceof String&&(a+="");var d=0,m=!1,b={next:function(){if(!m&&d<a.length){var F=d++;return{value:c(F,a[F]),done:!1}}return m=!0,{done:!0,value:void 0}}};return b[Symbol.iterator]=function(){return b},b}i("Array.prototype.values",function(a){return a||function(){return s(this,function(c,d){return d})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function u(a){var c=typeof a;return c=c!="object"?c:a?Array.isArray(a)?"array":c:"null",c=="array"||c=="object"&&typeof a.length=="number"}function h(a){var c=typeof a;return c=="object"&&a!=null||c=="function"}function f(a,c,d){return a.call.apply(a.bind,arguments)}function p(a,c,d){if(!a)throw Error();if(2<arguments.length){var m=Array.prototype.slice.call(arguments,2);return function(){var b=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(b,m),a.apply(c,b)}}return function(){return a.apply(c,arguments)}}function g(a,c,d){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:p,g.apply(null,arguments)}function S(a,c){var d=Array.prototype.slice.call(arguments,1);return function(){var m=d.slice();return m.push.apply(m,arguments),a.apply(this,m)}}function C(a,c){function d(){}d.prototype=c.prototype,a.aa=c.prototype,a.prototype=new d,a.prototype.constructor=a,a.Qb=function(m,b,F){for(var G=Array(arguments.length-2),Ie=2;Ie<arguments.length;Ie++)G[Ie-2]=arguments[Ie];return c.prototype[b].apply(m,G)}}function k(a){const c=a.length;if(0<c){const d=Array(c);for(let m=0;m<c;m++)d[m]=a[m];return d}return[]}function j(a,c){for(let d=1;d<arguments.length;d++){const m=arguments[d];if(u(m)){const b=a.length||0,F=m.length||0;a.length=b+F;for(let G=0;G<F;G++)a[b+G]=m[G]}else a.push(m)}}class A{constructor(c,d){this.i=c,this.j=d,this.h=0,this.g=null}get(){let c;return 0<this.h?(this.h--,c=this.g,this.g=c.next,c.next=null):c=this.i(),c}}function v(a){return/^[\s\xa0]*$/.test(a)}function I(){var a=l.navigator;return a&&(a=a.userAgent)?a:""}function N(a){return N[" "](a),a}N[" "]=function(){};var L=I().indexOf("Gecko")!=-1&&!(I().toLowerCase().indexOf("webkit")!=-1&&I().indexOf("Edge")==-1)&&!(I().indexOf("Trident")!=-1||I().indexOf("MSIE")!=-1)&&I().indexOf("Edge")==-1;function U(a,c,d){for(const m in a)c.call(d,a[m],m,a)}function w(a,c){for(const d in a)c.call(void 0,a[d],d,a)}function y(a){const c={};for(const d in a)c[d]=a[d];return c}const _="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function T(a,c){let d,m;for(let b=1;b<arguments.length;b++){m=arguments[b];for(d in m)a[d]=m[d];for(let F=0;F<_.length;F++)d=_[F],Object.prototype.hasOwnProperty.call(m,d)&&(a[d]=m[d])}}function R(a){var c=1;a=a.split(":");const d=[];for(;0<c&&a.length;)d.push(a.shift()),c--;return a.length&&d.push(a.join(":")),d}function P(a){l.setTimeout(()=>{throw a},0)}function E(){var a=te;let c=null;return a.g&&(c=a.g,a.g=a.g.next,a.g||(a.h=null),c.next=null),c}class ye{constructor(){this.h=this.g=null}add(c,d){const m=De.get();m.set(c,d),this.h?this.h.next=m:this.g=m,this.h=m}}var De=new A(()=>new ot,a=>a.reset());class ot{constructor(){this.next=this.g=this.h=null}set(c,d){this.h=c,this.g=d,this.next=null}reset(){this.next=this.g=this.h=null}}let Be,H=!1,te=new ye,ie=()=>{const a=l.Promise.resolve(void 0);Be=()=>{a.then(xe)}};var xe=()=>{for(var a;a=E();){try{a.h.call(a.g)}catch(d){P(d)}var c=De;c.j(a),100>c.h&&(c.h++,a.next=c.g,c.g=a)}H=!1};function _e(){this.s=this.s,this.C=this.C}_e.prototype.s=!1,_e.prototype.ma=function(){this.s||(this.s=!0,this.N())},_e.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Oe(a,c){this.type=a,this.g=this.target=c,this.defaultPrevented=!1}Oe.prototype.h=function(){this.defaultPrevented=!0};var nn=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var a=!1,c=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const d=()=>{};l.addEventListener("test",d,c),l.removeEventListener("test",d,c)}catch{}return a}();function gn(a,c){if(Oe.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var d=this.type=a.type,m=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=c,c=a.relatedTarget){if(L){e:{try{N(c.nodeName);var b=!0;break e}catch{}b=!1}b||(c=null)}}else d=="mouseover"?c=a.fromElement:d=="mouseout"&&(c=a.toElement);this.relatedTarget=c,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:zt[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&gn.aa.h.call(this)}}C(gn,Oe);var zt={2:"touch",3:"pen",4:"mouse"};gn.prototype.h=function(){gn.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var rn="closure_listenable_"+(1e6*Math.random()|0),po=0;function il(a,c,d,m,b){this.listener=a,this.proxy=null,this.src=c,this.type=d,this.capture=!!m,this.ha=b,this.key=++po,this.da=this.fa=!1}function Xi(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function ai(a){this.src=a,this.g={},this.h=0}ai.prototype.add=function(a,c,d,m,b){var F=a.toString();a=this.g[F],a||(a=this.g[F]=[],this.h++);var G=Ji(a,c,m,b);return-1<G?(c=a[G],d||(c.fa=!1)):(c=new il(c,this.src,F,!!m,b),c.fa=d,a.push(c)),c};function mo(a,c){var d=c.type;if(d in a.g){var m=a.g[d],b=Array.prototype.indexOf.call(m,c,void 0),F;(F=0<=b)&&Array.prototype.splice.call(m,b,1),F&&(Xi(c),a.g[d].length==0&&(delete a.g[d],a.h--))}}function Ji(a,c,d,m){for(var b=0;b<a.length;++b){var F=a[b];if(!F.da&&F.listener==c&&F.capture==!!d&&F.ha==m)return b}return-1}var Zi="closure_lm_"+(1e6*Math.random()|0),sl={};function Gc(a,c,d,m,b){if(Array.isArray(c)){for(var F=0;F<c.length;F++)Gc(a,c[F],d,m,b);return null}return d=oe(d),a&&a[rn]?a.K(c,d,h(m)?!!m.capture:!!m,b):Zp(a,c,d,!1,m,b)}function Zp(a,c,d,m,b,F){if(!c)throw Error("Invalid event type");var G=h(b)?!!b.capture:!!b,Ie=q(a);if(Ie||(a[Zi]=Ie=new ai(a)),d=Ie.add(c,d,m,G,F),d.proxy)return d;if(m=x(),d.proxy=m,m.src=a,m.listener=d,a.addEventListener)nn||(b=G),b===void 0&&(b=!1),a.addEventListener(c.toString(),m,b);else if(a.attachEvent)a.attachEvent(W(c.toString()),m);else if(a.addListener&&a.removeListener)a.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return d}function x(){function a(d){return c.call(a.src,a.listener,d)}const c=Q;return a}function O(a,c,d,m,b){if(Array.isArray(c))for(var F=0;F<c.length;F++)O(a,c[F],d,m,b);else m=h(m)?!!m.capture:!!m,d=oe(d),a&&a[rn]?(a=a.i,c=String(c).toString(),c in a.g&&(F=a.g[c],d=Ji(F,d,m,b),-1<d&&(Xi(F[d]),Array.prototype.splice.call(F,d,1),F.length==0&&(delete a.g[c],a.h--)))):a&&(a=q(a))&&(c=a.g[c.toString()],a=-1,c&&(a=Ji(c,d,m,b)),(d=-1<a?c[a]:null)&&B(d))}function B(a){if(typeof a!="number"&&a&&!a.da){var c=a.src;if(c&&c[rn])mo(c.i,a);else{var d=a.type,m=a.proxy;c.removeEventListener?c.removeEventListener(d,m,a.capture):c.detachEvent?c.detachEvent(W(d),m):c.addListener&&c.removeListener&&c.removeListener(m),(d=q(c))?(mo(d,a),d.h==0&&(d.src=null,c[Zi]=null)):Xi(a)}}}function W(a){return a in sl?sl[a]:sl[a]="on"+a}function Q(a,c){if(a.da)a=!0;else{c=new gn(c,this);var d=a.listener,m=a.ha||a.src;a.fa&&B(a),a=d.call(m,c)}return a}function q(a){return a=a[Zi],a instanceof ai?a:null}var ee="__closure_events_fn_"+(1e9*Math.random()>>>0);function oe(a){return typeof a=="function"?a:(a[ee]||(a[ee]=function(c){return a.handleEvent(c)}),a[ee])}function ue(){_e.call(this),this.i=new ai(this),this.M=this,this.F=null}C(ue,_e),ue.prototype[rn]=!0,ue.prototype.removeEventListener=function(a,c,d,m){O(this,a,c,d,m)};function de(a,c){var d,m=a.F;if(m)for(d=[];m;m=m.F)d.push(m);if(a=a.M,m=c.type||c,typeof c=="string")c=new Oe(c,a);else if(c instanceof Oe)c.target=c.target||a;else{var b=c;c=new Oe(m,a),T(c,b)}if(b=!0,d)for(var F=d.length-1;0<=F;F--){var G=c.g=d[F];b=sn(G,m,!0,c)&&b}if(G=c.g=a,b=sn(G,m,!0,c)&&b,b=sn(G,m,!1,c)&&b,d)for(F=0;F<d.length;F++)G=c.g=d[F],b=sn(G,m,!1,c)&&b}ue.prototype.N=function(){if(ue.aa.N.call(this),this.i){var a=this.i,c;for(c in a.g){for(var d=a.g[c],m=0;m<d.length;m++)Xi(d[m]);delete a.g[c],a.h--}}this.F=null},ue.prototype.K=function(a,c,d,m){return this.i.add(String(a),c,!1,d,m)},ue.prototype.L=function(a,c,d,m){return this.i.add(String(a),c,!0,d,m)};function sn(a,c,d,m){if(c=a.i.g[String(c)],!c)return!0;c=c.concat();for(var b=!0,F=0;F<c.length;++F){var G=c[F];if(G&&!G.da&&G.capture==d){var Ie=G.listener,at=G.ha||G.src;G.fa&&mo(a.i,G),b=Ie.call(at,m)!==!1&&b}}return b&&!m.defaultPrevented}function ol(a,c,d){if(typeof a=="function")d&&(a=g(a,d));else if(a&&typeof a.handleEvent=="function")a=g(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(c)?-1:l.setTimeout(a,c||0)}function es(a){a.g=ol(()=>{a.g=null,a.i&&(a.i=!1,es(a))},a.l);const c=a.h;a.h=null,a.m.apply(null,c)}class go extends _e{constructor(c,d){super(),this.m=c,this.l=d,this.h=null,this.i=!1,this.g=null}j(c){this.h=arguments,this.g?this.i=!0:es(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function li(a){_e.call(this),this.h=a,this.g={}}C(li,_e);var yo=[];function al(a){U(a.g,function(c,d){this.g.hasOwnProperty(d)&&B(c)},a),a.g={}}li.prototype.N=function(){li.aa.N.call(this),al(this)},li.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ts=l.JSON.stringify,j1=l.JSON.parse,B1=class{stringify(a){return l.JSON.stringify(a,void 0)}parse(a){return l.JSON.parse(a,void 0)}};function Qc(){}Qc.prototype.h=null;function em(a){return a.h||(a.h=a.i())}function tm(){}var vo={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Hc(){Oe.call(this,"d")}C(Hc,Oe);function Wc(){Oe.call(this,"c")}C(Wc,Oe);var ui={},nm=null;function ll(){return nm=nm||new ue}ui.La="serverreachability";function rm(a){Oe.call(this,ui.La,a)}C(rm,Oe);function _o(a){const c=ll();de(c,new rm(c))}ui.STAT_EVENT="statevent";function im(a,c){Oe.call(this,ui.STAT_EVENT,a),this.stat=c}C(im,Oe);function Tt(a){const c=ll();de(c,new im(c,a))}ui.Ma="timingevent";function sm(a,c){Oe.call(this,ui.Ma,a),this.size=c}C(sm,Oe);function wo(a,c){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){a()},c)}function Eo(){this.g=!0}Eo.prototype.xa=function(){this.g=!1};function U1(a,c,d,m,b,F){a.info(function(){if(a.g)if(F)for(var G="",Ie=F.split("&"),at=0;at<Ie.length;at++){var ve=Ie[at].split("=");if(1<ve.length){var mt=ve[0];ve=ve[1];var gt=mt.split("_");G=2<=gt.length&&gt[1]=="type"?G+(mt+"="+ve+"&"):G+(mt+"=redacted&")}}else G=null;else G=F;return"XMLHTTP REQ ("+m+") [attempt "+b+"]: "+c+`
`+d+`
`+G})}function z1(a,c,d,m,b,F,G){a.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+b+"]: "+c+`
`+d+`
`+F+" "+G})}function ns(a,c,d,m){a.info(function(){return"XMLHTTP TEXT ("+c+"): "+q1(a,d)+(m?" "+m:"")})}function $1(a,c){a.info(function(){return"TIMEOUT: "+c})}Eo.prototype.info=function(){};function q1(a,c){if(!a.g)return c;if(!c)return null;try{var d=JSON.parse(c);if(d){for(a=0;a<d.length;a++)if(Array.isArray(d[a])){var m=d[a];if(!(2>m.length)){var b=m[1];if(Array.isArray(b)&&!(1>b.length)){var F=b[0];if(F!="noop"&&F!="stop"&&F!="close")for(var G=1;G<b.length;G++)b[G]=""}}}}return ts(d)}catch{return c}}var ul={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},om={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Yc;function cl(){}C(cl,Qc),cl.prototype.g=function(){return new XMLHttpRequest},cl.prototype.i=function(){return{}},Yc=new cl;function fr(a,c,d,m){this.j=a,this.i=c,this.l=d,this.R=m||1,this.U=new li(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new am}function am(){this.i=null,this.g="",this.h=!1}var lm={},Xc={};function Jc(a,c,d){a.L=1,a.v=pl(Gn(c)),a.m=d,a.P=!0,um(a,null)}function um(a,c){a.F=Date.now(),hl(a),a.A=Gn(a.v);var d=a.A,m=a.R;Array.isArray(m)||(m=[String(m)]),Tm(d.i,"t",m),a.C=0,d=a.j.J,a.h=new am,a.g=Um(a.j,d?c:null,!a.m),0<a.O&&(a.M=new go(g(a.Y,a,a.g),a.O)),c=a.U,d=a.g,m=a.ca;var b="readystatechange";Array.isArray(b)||(b&&(yo[0]=b.toString()),b=yo);for(var F=0;F<b.length;F++){var G=Gc(d,b[F],m||c.handleEvent,!1,c.h||c);if(!G)break;c.g[G.key]=G}c=a.H?y(a.H):{},a.m?(a.u||(a.u="POST"),c["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,c)):(a.u="GET",a.g.ea(a.A,a.u,null,c)),_o(),U1(a.i,a.u,a.A,a.l,a.R,a.m)}fr.prototype.ca=function(a){a=a.target;const c=this.M;c&&Qn(a)==3?c.j():this.Y(a)},fr.prototype.Y=function(a){try{if(a==this.g)e:{const gt=Qn(this.g);var c=this.g.Ba();const ss=this.g.Z();if(!(3>gt)&&(gt!=3||this.g&&(this.h.h||this.g.oa()||km(this.g)))){this.J||gt!=4||c==7||(c==8||0>=ss?_o(3):_o(2)),Zc(this);var d=this.g.Z();this.X=d;t:if(cm(this)){var m=km(this.g);a="";var b=m.length,F=Qn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ci(this),Io(this);var G="";break t}this.h.i=new l.TextDecoder}for(c=0;c<b;c++)this.h.h=!0,a+=this.h.i.decode(m[c],{stream:!(F&&c==b-1)});m.length=0,this.h.g+=a,this.C=0,G=this.h.g}else G=this.g.oa();if(this.o=d==200,z1(this.i,this.u,this.A,this.l,this.R,gt,d),this.o){if(this.T&&!this.K){t:{if(this.g){var Ie,at=this.g;if((Ie=at.g?at.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(Ie)){var ve=Ie;break t}}ve=null}if(d=ve)ns(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,eh(this,d);else{this.o=!1,this.s=3,Tt(12),ci(this),Io(this);break e}}if(this.P){d=!0;let yn;for(;!this.J&&this.C<G.length;)if(yn=K1(this,G),yn==Xc){gt==4&&(this.s=4,Tt(14),d=!1),ns(this.i,this.l,null,"[Incomplete Response]");break}else if(yn==lm){this.s=4,Tt(15),ns(this.i,this.l,G,"[Invalid Chunk]"),d=!1;break}else ns(this.i,this.l,yn,null),eh(this,yn);if(cm(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),gt!=4||G.length!=0||this.h.h||(this.s=1,Tt(16),d=!1),this.o=this.o&&d,!d)ns(this.i,this.l,G,"[Invalid Chunked Response]"),ci(this),Io(this);else if(0<G.length&&!this.W){this.W=!0;var mt=this.j;mt.g==this&&mt.ba&&!mt.M&&(mt.j.info("Great, no buffering proxy detected. Bytes received: "+G.length),oh(mt),mt.M=!0,Tt(11))}}else ns(this.i,this.l,G,null),eh(this,G);gt==4&&ci(this),this.o&&!this.J&&(gt==4?Mm(this.j,this):(this.o=!1,hl(this)))}else lI(this.g),d==400&&0<G.indexOf("Unknown SID")?(this.s=3,Tt(12)):(this.s=0,Tt(13)),ci(this),Io(this)}}}catch{}finally{}};function cm(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function K1(a,c){var d=a.C,m=c.indexOf(`
`,d);return m==-1?Xc:(d=Number(c.substring(d,m)),isNaN(d)?lm:(m+=1,m+d>c.length?Xc:(c=c.slice(m,m+d),a.C=m+d,c)))}fr.prototype.cancel=function(){this.J=!0,ci(this)};function hl(a){a.S=Date.now()+a.I,hm(a,a.I)}function hm(a,c){if(a.B!=null)throw Error("WatchDog timer not null");a.B=wo(g(a.ba,a),c)}function Zc(a){a.B&&(l.clearTimeout(a.B),a.B=null)}fr.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?($1(this.i,this.A),this.L!=2&&(_o(),Tt(17)),ci(this),this.s=2,Io(this)):hm(this,this.S-a)};function Io(a){a.j.G==0||a.J||Mm(a.j,a)}function ci(a){Zc(a);var c=a.M;c&&typeof c.ma=="function"&&c.ma(),a.M=null,al(a.U),a.g&&(c=a.g,a.g=null,c.abort(),c.ma())}function eh(a,c){try{var d=a.j;if(d.G!=0&&(d.g==a||th(d.h,a))){if(!a.K&&th(d.h,a)&&d.G==3){try{var m=d.Da.g.parse(c)}catch{m=null}if(Array.isArray(m)&&m.length==3){var b=m;if(b[0]==0){e:if(!d.u){if(d.g)if(d.g.F+3e3<a.F)wl(d),vl(d);else break e;sh(d),Tt(18)}}else d.za=b[1],0<d.za-d.T&&37500>b[2]&&d.F&&d.v==0&&!d.C&&(d.C=wo(g(d.Za,d),6e3));if(1>=pm(d.h)&&d.ca){try{d.ca()}catch{}d.ca=void 0}}else di(d,11)}else if((a.K||d.g==a)&&wl(d),!v(c))for(b=d.Da.g.parse(c),c=0;c<b.length;c++){let ve=b[c];if(d.T=ve[0],ve=ve[1],d.G==2)if(ve[0]=="c"){d.K=ve[1],d.ia=ve[2];const mt=ve[3];mt!=null&&(d.la=mt,d.j.info("VER="+d.la));const gt=ve[4];gt!=null&&(d.Aa=gt,d.j.info("SVER="+d.Aa));const ss=ve[5];ss!=null&&typeof ss=="number"&&0<ss&&(m=1.5*ss,d.L=m,d.j.info("backChannelRequestTimeoutMs_="+m)),m=d;const yn=a.g;if(yn){const Il=yn.g?yn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Il){var F=m.h;F.g||Il.indexOf("spdy")==-1&&Il.indexOf("quic")==-1&&Il.indexOf("h2")==-1||(F.j=F.l,F.g=new Set,F.h&&(nh(F,F.h),F.h=null))}if(m.D){const ah=yn.g?yn.g.getResponseHeader("X-HTTP-Session-Id"):null;ah&&(m.ya=ah,Re(m.I,m.D,ah))}}d.G=3,d.l&&d.l.ua(),d.ba&&(d.R=Date.now()-a.F,d.j.info("Handshake RTT: "+d.R+"ms")),m=d;var G=a;if(m.qa=Bm(m,m.J?m.ia:null,m.W),G.K){mm(m.h,G);var Ie=G,at=m.L;at&&(Ie.I=at),Ie.B&&(Zc(Ie),hl(Ie)),m.g=G}else Om(m);0<d.i.length&&_l(d)}else ve[0]!="stop"&&ve[0]!="close"||di(d,7);else d.G==3&&(ve[0]=="stop"||ve[0]=="close"?ve[0]=="stop"?di(d,7):ih(d):ve[0]!="noop"&&d.l&&d.l.ta(ve),d.v=0)}}_o(4)}catch{}}var G1=class{constructor(a,c){this.g=a,this.map=c}};function dm(a){this.l=a||10,l.PerformanceNavigationTiming?(a=l.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function fm(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function pm(a){return a.h?1:a.g?a.g.size:0}function th(a,c){return a.h?a.h==c:a.g?a.g.has(c):!1}function nh(a,c){a.g?a.g.add(c):a.h=c}function mm(a,c){a.h&&a.h==c?a.h=null:a.g&&a.g.has(c)&&a.g.delete(c)}dm.prototype.cancel=function(){if(this.i=gm(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function gm(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let c=a.i;for(const d of a.g.values())c=c.concat(d.D);return c}return k(a.i)}function Q1(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(u(a)){for(var c=[],d=a.length,m=0;m<d;m++)c.push(a[m]);return c}c=[],d=0;for(m in a)c[d++]=a[m];return c}function H1(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(u(a)||typeof a=="string"){var c=[];a=a.length;for(var d=0;d<a;d++)c.push(d);return c}c=[],d=0;for(const m in a)c[d++]=m;return c}}}function ym(a,c){if(a.forEach&&typeof a.forEach=="function")a.forEach(c,void 0);else if(u(a)||typeof a=="string")Array.prototype.forEach.call(a,c,void 0);else for(var d=H1(a),m=Q1(a),b=m.length,F=0;F<b;F++)c.call(void 0,m[F],d&&d[F],a)}var vm=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function W1(a,c){if(a){a=a.split("&");for(var d=0;d<a.length;d++){var m=a[d].indexOf("="),b=null;if(0<=m){var F=a[d].substring(0,m);b=a[d].substring(m+1)}else F=a[d];c(F,b?decodeURIComponent(b.replace(/\+/g," ")):"")}}}function hi(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof hi){this.h=a.h,dl(this,a.j),this.o=a.o,this.g=a.g,fl(this,a.s),this.l=a.l;var c=a.i,d=new So;d.i=c.i,c.g&&(d.g=new Map(c.g),d.h=c.h),_m(this,d),this.m=a.m}else a&&(c=String(a).match(vm))?(this.h=!1,dl(this,c[1]||"",!0),this.o=To(c[2]||""),this.g=To(c[3]||"",!0),fl(this,c[4]),this.l=To(c[5]||"",!0),_m(this,c[6]||"",!0),this.m=To(c[7]||"")):(this.h=!1,this.i=new So(null,this.h))}hi.prototype.toString=function(){var a=[],c=this.j;c&&a.push(Ao(c,wm,!0),":");var d=this.g;return(d||c=="file")&&(a.push("//"),(c=this.o)&&a.push(Ao(c,wm,!0),"@"),a.push(encodeURIComponent(String(d)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d=this.s,d!=null&&a.push(":",String(d))),(d=this.l)&&(this.g&&d.charAt(0)!="/"&&a.push("/"),a.push(Ao(d,d.charAt(0)=="/"?J1:X1,!0))),(d=this.i.toString())&&a.push("?",d),(d=this.m)&&a.push("#",Ao(d,eI)),a.join("")};function Gn(a){return new hi(a)}function dl(a,c,d){a.j=d?To(c,!0):c,a.j&&(a.j=a.j.replace(/:$/,""))}function fl(a,c){if(c){if(c=Number(c),isNaN(c)||0>c)throw Error("Bad port number "+c);a.s=c}else a.s=null}function _m(a,c,d){c instanceof So?(a.i=c,tI(a.i,a.h)):(d||(c=Ao(c,Z1)),a.i=new So(c,a.h))}function Re(a,c,d){a.i.set(c,d)}function pl(a){return Re(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function To(a,c){return a?c?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Ao(a,c,d){return typeof a=="string"?(a=encodeURI(a).replace(c,Y1),d&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function Y1(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var wm=/[#\/\?@]/g,X1=/[#\?:]/g,J1=/[#\?]/g,Z1=/[#\?@]/g,eI=/#/g;function So(a,c){this.h=this.g=null,this.i=a||null,this.j=!!c}function pr(a){a.g||(a.g=new Map,a.h=0,a.i&&W1(a.i,function(c,d){a.add(decodeURIComponent(c.replace(/\+/g," ")),d)}))}t=So.prototype,t.add=function(a,c){pr(this),this.i=null,a=rs(this,a);var d=this.g.get(a);return d||this.g.set(a,d=[]),d.push(c),this.h+=1,this};function Em(a,c){pr(a),c=rs(a,c),a.g.has(c)&&(a.i=null,a.h-=a.g.get(c).length,a.g.delete(c))}function Im(a,c){return pr(a),c=rs(a,c),a.g.has(c)}t.forEach=function(a,c){pr(this),this.g.forEach(function(d,m){d.forEach(function(b){a.call(c,b,m,this)},this)},this)},t.na=function(){pr(this);const a=Array.from(this.g.values()),c=Array.from(this.g.keys()),d=[];for(let m=0;m<c.length;m++){const b=a[m];for(let F=0;F<b.length;F++)d.push(c[m])}return d},t.V=function(a){pr(this);let c=[];if(typeof a=="string")Im(this,a)&&(c=c.concat(this.g.get(rs(this,a))));else{a=Array.from(this.g.values());for(let d=0;d<a.length;d++)c=c.concat(a[d])}return c},t.set=function(a,c){return pr(this),this.i=null,a=rs(this,a),Im(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[c]),this.h+=1,this},t.get=function(a,c){return a?(a=this.V(a),0<a.length?String(a[0]):c):c};function Tm(a,c,d){Em(a,c),0<d.length&&(a.i=null,a.g.set(rs(a,c),k(d)),a.h+=d.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],c=Array.from(this.g.keys());for(var d=0;d<c.length;d++){var m=c[d];const F=encodeURIComponent(String(m)),G=this.V(m);for(m=0;m<G.length;m++){var b=F;G[m]!==""&&(b+="="+encodeURIComponent(String(G[m]))),a.push(b)}}return this.i=a.join("&")};function rs(a,c){return c=String(c),a.j&&(c=c.toLowerCase()),c}function tI(a,c){c&&!a.j&&(pr(a),a.i=null,a.g.forEach(function(d,m){var b=m.toLowerCase();m!=b&&(Em(this,m),Tm(this,b,d))},a)),a.j=c}function nI(a,c){const d=new Eo;if(l.Image){const m=new Image;m.onload=S(mr,d,"TestLoadImage: loaded",!0,c,m),m.onerror=S(mr,d,"TestLoadImage: error",!1,c,m),m.onabort=S(mr,d,"TestLoadImage: abort",!1,c,m),m.ontimeout=S(mr,d,"TestLoadImage: timeout",!1,c,m),l.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=a}else c(!1)}function rI(a,c){const d=new Eo,m=new AbortController,b=setTimeout(()=>{m.abort(),mr(d,"TestPingServer: timeout",!1,c)},1e4);fetch(a,{signal:m.signal}).then(F=>{clearTimeout(b),F.ok?mr(d,"TestPingServer: ok",!0,c):mr(d,"TestPingServer: server error",!1,c)}).catch(()=>{clearTimeout(b),mr(d,"TestPingServer: error",!1,c)})}function mr(a,c,d,m,b){try{b&&(b.onload=null,b.onerror=null,b.onabort=null,b.ontimeout=null),m(d)}catch{}}function iI(){this.g=new B1}function sI(a,c,d){const m=d||"";try{ym(a,function(b,F){let G=b;h(b)&&(G=ts(b)),c.push(m+F+"="+encodeURIComponent(G))})}catch(b){throw c.push(m+"type="+encodeURIComponent("_badmap")),b}}function ml(a){this.l=a.Ub||null,this.j=a.eb||!1}C(ml,Qc),ml.prototype.g=function(){return new gl(this.l,this.j)},ml.prototype.i=function(a){return function(){return a}}({});function gl(a,c){ue.call(this),this.D=a,this.o=c,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}C(gl,ue),t=gl.prototype,t.open=function(a,c){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=c,this.readyState=1,Po(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const c={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(c.body=a),(this.D||l).fetch(new Request(this.A,c)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,xo(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,Po(this)),this.g&&(this.readyState=3,Po(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Am(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function Am(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var c=a.value?a.value:new Uint8Array(0);(c=this.v.decode(c,{stream:!a.done}))&&(this.response=this.responseText+=c)}a.done?xo(this):Po(this),this.readyState==3&&Am(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,xo(this))},t.Qa=function(a){this.g&&(this.response=a,xo(this))},t.ga=function(){this.g&&xo(this)};function xo(a){a.readyState=4,a.l=null,a.j=null,a.v=null,Po(a)}t.setRequestHeader=function(a,c){this.u.append(a,c)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],c=this.h.entries();for(var d=c.next();!d.done;)d=d.value,a.push(d[0]+": "+d[1]),d=c.next();return a.join(`\r
`)};function Po(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(gl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Sm(a){let c="";return U(a,function(d,m){c+=m,c+=":",c+=d,c+=`\r
`}),c}function rh(a,c,d){e:{for(m in d){var m=!1;break e}m=!0}m||(d=Sm(d),typeof a=="string"?d!=null&&encodeURIComponent(String(d)):Re(a,c,d))}function Ue(a){ue.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}C(Ue,ue);var oI=/^https?$/i,aI=["POST","PUT"];t=Ue.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,c,d,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);c=c?c.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Yc.g(),this.v=this.o?em(this.o):em(Yc),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(c,String(a),!0),this.B=!1}catch(F){xm(this,F);return}if(a=d||"",d=new Map(this.headers),m)if(Object.getPrototypeOf(m)===Object.prototype)for(var b in m)d.set(b,m[b]);else if(typeof m.keys=="function"&&typeof m.get=="function")for(const F of m.keys())d.set(F,m.get(F));else throw Error("Unknown input type for opt_headers: "+String(m));m=Array.from(d.keys()).find(F=>F.toLowerCase()=="content-type"),b=l.FormData&&a instanceof l.FormData,!(0<=Array.prototype.indexOf.call(aI,c,void 0))||m||b||d.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[F,G]of d)this.g.setRequestHeader(F,G);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Cm(this),this.u=!0,this.g.send(a),this.u=!1}catch(F){xm(this,F)}};function xm(a,c){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=c,a.m=5,Pm(a),yl(a)}function Pm(a){a.A||(a.A=!0,de(a,"complete"),de(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,de(this,"complete"),de(this,"abort"),yl(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),yl(this,!0)),Ue.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Rm(this):this.bb())},t.bb=function(){Rm(this)};function Rm(a){if(a.h&&typeof o<"u"&&(!a.v[1]||Qn(a)!=4||a.Z()!=2)){if(a.u&&Qn(a)==4)ol(a.Ea,0,a);else if(de(a,"readystatechange"),Qn(a)==4){a.h=!1;try{const G=a.Z();e:switch(G){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var c=!0;break e;default:c=!1}var d;if(!(d=c)){var m;if(m=G===0){var b=String(a.D).match(vm)[1]||null;!b&&l.self&&l.self.location&&(b=l.self.location.protocol.slice(0,-1)),m=!oI.test(b?b.toLowerCase():"")}d=m}if(d)de(a,"complete"),de(a,"success");else{a.m=6;try{var F=2<Qn(a)?a.g.statusText:""}catch{F=""}a.l=F+" ["+a.Z()+"]",Pm(a)}}finally{yl(a)}}}}function yl(a,c){if(a.g){Cm(a);const d=a.g,m=a.v[0]?()=>{}:null;a.g=null,a.v=null,c||de(a,"ready");try{d.onreadystatechange=m}catch{}}}function Cm(a){a.I&&(l.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function Qn(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<Qn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var c=this.g.responseText;return a&&c.indexOf(a)==0&&(c=c.substring(a.length)),j1(c)}};function km(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function lI(a){const c={};a=(a.g&&2<=Qn(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let m=0;m<a.length;m++){if(v(a[m]))continue;var d=R(a[m]);const b=d[0];if(d=d[1],typeof d!="string")continue;d=d.trim();const F=c[b]||[];c[b]=F,F.push(d)}w(c,function(m){return m.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ro(a,c,d){return d&&d.internalChannelParams&&d.internalChannelParams[a]||c}function bm(a){this.Aa=0,this.i=[],this.j=new Eo,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ro("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ro("baseRetryDelayMs",5e3,a),this.cb=Ro("retryDelaySeedMs",1e4,a),this.Wa=Ro("forwardChannelMaxRetries",2,a),this.wa=Ro("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new dm(a&&a.concurrentRequestLimit),this.Da=new iI,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=bm.prototype,t.la=8,t.G=1,t.connect=function(a,c,d,m){Tt(0),this.W=a,this.H=c||{},d&&m!==void 0&&(this.H.OSID=d,this.H.OAID=m),this.F=this.X,this.I=Bm(this,null,this.W),_l(this)};function ih(a){if(Dm(a),a.G==3){var c=a.U++,d=Gn(a.I);if(Re(d,"SID",a.K),Re(d,"RID",c),Re(d,"TYPE","terminate"),Co(a,d),c=new fr(a,a.j,c),c.L=2,c.v=pl(Gn(d)),d=!1,l.navigator&&l.navigator.sendBeacon)try{d=l.navigator.sendBeacon(c.v.toString(),"")}catch{}!d&&l.Image&&(new Image().src=c.v,d=!0),d||(c.g=Um(c.j,null),c.g.ea(c.v)),c.F=Date.now(),hl(c)}jm(a)}function vl(a){a.g&&(oh(a),a.g.cancel(),a.g=null)}function Dm(a){vl(a),a.u&&(l.clearTimeout(a.u),a.u=null),wl(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&l.clearTimeout(a.s),a.s=null)}function _l(a){if(!fm(a.h)&&!a.s){a.s=!0;var c=a.Ga;Be||ie(),H||(Be(),H=!0),te.add(c,a),a.B=0}}function uI(a,c){return pm(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=c.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=wo(g(a.Ga,a,c),Lm(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const b=new fr(this,this.j,a);let F=this.o;if(this.S&&(F?(F=y(F),T(F,this.S)):F=this.S),this.m!==null||this.O||(b.H=F,F=null),this.P)e:{for(var c=0,d=0;d<this.i.length;d++){t:{var m=this.i[d];if("__data__"in m.map&&(m=m.map.__data__,typeof m=="string")){m=m.length;break t}m=void 0}if(m===void 0)break;if(c+=m,4096<c){c=d;break e}if(c===4096||d===this.i.length-1){c=d+1;break e}}c=1e3}else c=1e3;c=Nm(this,b,c),d=Gn(this.I),Re(d,"RID",a),Re(d,"CVER",22),this.D&&Re(d,"X-HTTP-Session-Id",this.D),Co(this,d),F&&(this.O?c="headers="+encodeURIComponent(String(Sm(F)))+"&"+c:this.m&&rh(d,this.m,F)),nh(this.h,b),this.Ua&&Re(d,"TYPE","init"),this.P?(Re(d,"$req",c),Re(d,"SID","null"),b.T=!0,Jc(b,d,null)):Jc(b,d,c),this.G=2}}else this.G==3&&(a?Vm(this,a):this.i.length==0||fm(this.h)||Vm(this))};function Vm(a,c){var d;c?d=c.l:d=a.U++;const m=Gn(a.I);Re(m,"SID",a.K),Re(m,"RID",d),Re(m,"AID",a.T),Co(a,m),a.m&&a.o&&rh(m,a.m,a.o),d=new fr(a,a.j,d,a.B+1),a.m===null&&(d.H=a.o),c&&(a.i=c.D.concat(a.i)),c=Nm(a,d,1e3),d.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),nh(a.h,d),Jc(d,m,c)}function Co(a,c){a.H&&U(a.H,function(d,m){Re(c,m,d)}),a.l&&ym({},function(d,m){Re(c,m,d)})}function Nm(a,c,d){d=Math.min(a.i.length,d);var m=a.l?g(a.l.Na,a.l,a):null;e:{var b=a.i;let F=-1;for(;;){const G=["count="+d];F==-1?0<d?(F=b[0].g,G.push("ofs="+F)):F=0:G.push("ofs="+F);let Ie=!0;for(let at=0;at<d;at++){let ve=b[at].g;const mt=b[at].map;if(ve-=F,0>ve)F=Math.max(0,b[at].g-100),Ie=!1;else try{sI(mt,G,"req"+ve+"_")}catch{m&&m(mt)}}if(Ie){m=G.join("&");break e}}}return a=a.i.splice(0,d),c.D=a,m}function Om(a){if(!a.g&&!a.u){a.Y=1;var c=a.Fa;Be||ie(),H||(Be(),H=!0),te.add(c,a),a.v=0}}function sh(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=wo(g(a.Fa,a),Lm(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,Fm(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=wo(g(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Tt(10),vl(this),Fm(this))};function oh(a){a.A!=null&&(l.clearTimeout(a.A),a.A=null)}function Fm(a){a.g=new fr(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var c=Gn(a.qa);Re(c,"RID","rpc"),Re(c,"SID",a.K),Re(c,"AID",a.T),Re(c,"CI",a.F?"0":"1"),!a.F&&a.ja&&Re(c,"TO",a.ja),Re(c,"TYPE","xmlhttp"),Co(a,c),a.m&&a.o&&rh(c,a.m,a.o),a.L&&(a.g.I=a.L);var d=a.g;a=a.ia,d.L=1,d.v=pl(Gn(c)),d.m=null,d.P=!0,um(d,a)}t.Za=function(){this.C!=null&&(this.C=null,vl(this),sh(this),Tt(19))};function wl(a){a.C!=null&&(l.clearTimeout(a.C),a.C=null)}function Mm(a,c){var d=null;if(a.g==c){wl(a),oh(a),a.g=null;var m=2}else if(th(a.h,c))d=c.D,mm(a.h,c),m=1;else return;if(a.G!=0){if(c.o)if(m==1){d=c.m?c.m.length:0,c=Date.now()-c.F;var b=a.B;m=ll(),de(m,new sm(m,d)),_l(a)}else Om(a);else if(b=c.s,b==3||b==0&&0<c.X||!(m==1&&uI(a,c)||m==2&&sh(a)))switch(d&&0<d.length&&(c=a.h,c.i=c.i.concat(d)),b){case 1:di(a,5);break;case 4:di(a,10);break;case 3:di(a,6);break;default:di(a,2)}}}function Lm(a,c){let d=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(d*=2),d*c}function di(a,c){if(a.j.info("Error code "+c),c==2){var d=g(a.fb,a),m=a.Xa;const b=!m;m=new hi(m||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||dl(m,"https"),pl(m),b?nI(m.toString(),d):rI(m.toString(),d)}else Tt(2);a.G=0,a.l&&a.l.sa(c),jm(a),Dm(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),Tt(2)):(this.j.info("Failed to ping google.com"),Tt(1))};function jm(a){if(a.G=0,a.ka=[],a.l){const c=gm(a.h);(c.length!=0||a.i.length!=0)&&(j(a.ka,c),j(a.ka,a.i),a.h.i.length=0,k(a.i),a.i.length=0),a.l.ra()}}function Bm(a,c,d){var m=d instanceof hi?Gn(d):new hi(d);if(m.g!="")c&&(m.g=c+"."+m.g),fl(m,m.s);else{var b=l.location;m=b.protocol,c=c?c+"."+b.hostname:b.hostname,b=+b.port;var F=new hi(null);m&&dl(F,m),c&&(F.g=c),b&&fl(F,b),d&&(F.l=d),m=F}return d=a.D,c=a.ya,d&&c&&Re(m,d,c),Re(m,"VER",a.la),Co(a,m),m}function Um(a,c,d){if(c&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return c=a.Ca&&!a.pa?new Ue(new ml({eb:d})):new Ue(a.pa),c.Ha(a.J),c}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function zm(){}t=zm.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function El(){}El.prototype.g=function(a,c){return new $t(a,c)};function $t(a,c){ue.call(this),this.g=new bm(c),this.l=a,this.h=c&&c.messageUrlParams||null,a=c&&c.messageHeaders||null,c&&c.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=c&&c.initMessageHeaders||null,c&&c.messageContentType&&(a?a["X-WebChannel-Content-Type"]=c.messageContentType:a={"X-WebChannel-Content-Type":c.messageContentType}),c&&c.va&&(a?a["X-WebChannel-Client-Profile"]=c.va:a={"X-WebChannel-Client-Profile":c.va}),this.g.S=a,(a=c&&c.Sb)&&!v(a)&&(this.g.m=a),this.v=c&&c.supportsCrossDomainXhr||!1,this.u=c&&c.sendRawJson||!1,(c=c&&c.httpSessionIdParam)&&!v(c)&&(this.g.D=c,a=this.h,a!==null&&c in a&&(a=this.h,c in a&&delete a[c])),this.j=new is(this)}C($t,ue),$t.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},$t.prototype.close=function(){ih(this.g)},$t.prototype.o=function(a){var c=this.g;if(typeof a=="string"){var d={};d.__data__=a,a=d}else this.u&&(d={},d.__data__=ts(a),a=d);c.i.push(new G1(c.Ya++,a)),c.G==3&&_l(c)},$t.prototype.N=function(){this.g.l=null,delete this.j,ih(this.g),delete this.g,$t.aa.N.call(this)};function $m(a){Hc.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var c=a.__sm__;if(c){e:{for(const d in c){a=d;break e}a=void 0}(this.i=a)&&(a=this.i,c=c!==null&&a in c?c[a]:void 0),this.data=c}else this.data=a}C($m,Hc);function qm(){Wc.call(this),this.status=1}C(qm,Wc);function is(a){this.g=a}C(is,zm),is.prototype.ua=function(){de(this.g,"a")},is.prototype.ta=function(a){de(this.g,new $m(a))},is.prototype.sa=function(a){de(this.g,new qm)},is.prototype.ra=function(){de(this.g,"b")},El.prototype.createWebChannel=El.prototype.g,$t.prototype.send=$t.prototype.o,$t.prototype.open=$t.prototype.m,$t.prototype.close=$t.prototype.close,zw=function(){return new El},Uw=function(){return ll()},Bw=ui,Jd={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ul.NO_ERROR=0,ul.TIMEOUT=8,ul.HTTP_ERROR=6,cu=ul,om.COMPLETE="complete",jw=om,tm.EventType=vo,vo.OPEN="a",vo.CLOSE="b",vo.ERROR="c",vo.MESSAGE="d",ue.prototype.listen=ue.prototype.K,Yo=tm,Ue.prototype.listenOnce=Ue.prototype.L,Ue.prototype.getLastError=Ue.prototype.Ka,Ue.prototype.getLastErrorCode=Ue.prototype.Ba,Ue.prototype.getStatus=Ue.prototype.Z,Ue.prototype.getResponseJson=Ue.prototype.Oa,Ue.prototype.getResponseText=Ue.prototype.oa,Ue.prototype.send=Ue.prototype.ea,Ue.prototype.setWithCredentials=Ue.prototype.Ha,Lw=Ue}).apply(typeof zl<"u"?zl:typeof self<"u"?self:typeof window<"u"?window:{});const by="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ut.UNAUTHENTICATED=new ut(null),ut.GOOGLE_CREDENTIALS=new ut("google-credentials-uid"),ut.FIRST_PARTY=new ut("first-party-uid"),ut.MOCK_USER=new ut("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ho="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ui=new gp("@firebase/firestore");function ds(){return Ui.logLevel}function K(t,...e){if(Ui.logLevel<=pe.DEBUG){const n=e.map(_p);Ui.debug(`Firestore (${ho}): ${t}`,...n)}}function Gt(t,...e){if(Ui.logLevel<=pe.ERROR){const n=e.map(_p);Ui.error(`Firestore (${ho}): ${t}`,...n)}}function Va(t,...e){if(Ui.logLevel<=pe.WARN){const n=e.map(_p);Ui.warn(`Firestore (${ho}): ${t}`,...n)}}function _p(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ne(t="Unexpected state"){const e=`FIRESTORE (${ho}) INTERNAL ASSERTION FAILED: `+t;throw Gt(e),new Error(e)}function re(t,e){t||ne()}function Se(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Z extends dr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $w{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class VP{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(ut.UNAUTHENTICATED))}shutdown(){}}class NP{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class OP{constructor(e){this.t=e,this.currentUser=ut.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){re(this.o===void 0);let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new Qr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Qr,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=s;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},l=u=>{K("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(K("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Qr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(K("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(re(typeof r.accessToken=="string"),new $w(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return re(e===null||typeof e=="string"),new ut(e)}}class FP{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=ut.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class MP{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new FP(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(ut.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class LP{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class jP{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){re(this.o===void 0);const r=s=>{s.error!=null&&K("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,K("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{K("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):K("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(re(typeof n.token=="string"),this.R=n.token,new LP(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BP(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qw{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=BP(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function ae(t,e){return t<e?-1:t>e?1:0}function Js(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function Kw(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qe{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Z(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Z(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new Z(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Z(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return qe.fromMillis(Date.now())}static fromDate(e){return qe.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new qe(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ae(this.nanoseconds,e.nanoseconds):ae(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class me{constructor(e){this.timestamp=e}static fromTimestamp(e){return new me(e)}static min(){return new me(new qe(0,0))}static max(){return new me(new qe(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Na{constructor(e,n,r){n===void 0?n=0:n>e.length&&ne(),r===void 0?r=e.length-n:r>e.length-n&&ne(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Na.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Na?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Te extends Na{construct(e,n,r){return new Te(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Z(z.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Te(n)}static emptyPath(){return new Te([])}}const UP=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Me extends Na{construct(e,n,r){return new Me(e,n,r)}static isValidIdentifier(e){return UP.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Me.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Me(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new Z(z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const l=e[i];if(l==="\\"){if(i+1===e.length)throw new Z(z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new Z(z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else l==="`"?(o=!o,i++):l!=="."||o?(r+=l,i++):(s(),i++)}if(s(),o)throw new Z(z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Me(n)}static emptyPath(){return new Me([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(e){this.path=e}static fromPath(e){return new J(Te.fromString(e))}static fromName(e){return new J(Te.fromString(e).popFirst(5))}static empty(){return new J(Te.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Te.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Te.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new J(new Te(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yu{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}}function Zd(t){return t.fields.find(e=>e.kind===2)}function vi(t){return t.fields.filter(e=>e.kind!==2)}Yu.UNKNOWN_ID=-1;class hu{constructor(e,n){this.fieldPath=e,this.kind=n}}class Oa{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new Oa(0,Zt.min())}}function zP(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=me.fromTimestamp(r===1e9?new qe(n+1,0):new qe(n,r));return new Zt(i,J.empty(),e)}function Gw(t){return new Zt(t.readTime,t.key,-1)}class Zt{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Zt(me.min(),J.empty(),-1)}static max(){return new Zt(me.max(),J.empty(),-1)}}function wp(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=J.comparator(t.documentKey,e.documentKey),n!==0?n:ae(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qw="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Hw{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rc(t){if(t.code!==z.FAILED_PRECONDITION||t.message!==Qw)throw t;K("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ne(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new V((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof V?n:V.resolve(n)}catch(n){return V.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):V.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):V.reject(n)}static resolve(e){return new V((n,r)=>{n(e)})}static reject(e){return new V((n,r)=>{r(e)})}static waitFor(e){return new V((n,r)=>{let i=0,s=0,o=!1;e.forEach(l=>{++i,l.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=V.resolve(!1);for(const r of e)n=n.next(i=>i?V.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new V((r,i)=>{const s=e.length,o=new Array(s);let l=0;for(let u=0;u<s;u++){const h=u;n(e[h]).next(f=>{o[h]=f,++l,l===s&&r(o)},f=>i(f))}})}static doWhile(e,n){return new V((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cc{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new Qr,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new la(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=Ep(r.target.error);this.V.reject(new la(e,i))}}static open(e,n,r,i){try{return new Cc(n,e.transaction(i,r))}catch(s){throw new la(n,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(K("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new qP(n)}}class Hr{constructor(e,n,r){this.name=e,this.version=n,this.p=r,Hr.S(Qu())===12.2&&Gt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return K("SimpleDb","Removing database:",e),_i(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!mp())return!1;if(Hr.v())return!0;const e=Qu(),n=Hr.S(e),r=0<n&&n<10,i=Ww(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}async M(e){return this.db||(K("SimpleDb","Opening database:",this.name),this.db=await new Promise((n,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{const o=s.target.result;n(o)},i.onblocked=()=>{r(new la(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{const o=s.target.error;o.name==="VersionError"?r(new Z(z.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new Z(z.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new la(e,o))},i.onupgradeneeded=s=>{K("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const o=s.target.result;this.p.O(o,i.transaction,s.oldVersion,this.version).next(()=>{K("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=n=>this.N(n)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,i){const s=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.M(e);const l=Cc.open(this.db,e,s?"readonly":"readwrite",r),u=i(l).next(h=>(l.g(),h)).catch(h=>(l.abort(h),V.reject(h))).toPromise();return u.catch(()=>{}),await l.m,u}catch(l){const u=l,h=u.name!=="FirebaseError"&&o<3;if(K("SimpleDb","Transaction failed with error:",u.message,"Retrying:",h),this.close(),!h)return Promise.reject(u)}}}close(){this.db&&this.db.close(),this.db=void 0}}function Ww(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class $P{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return _i(this.B.delete())}}class la extends Z{constructor(e,n){super(z.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function Yi(t){return t.name==="IndexedDbTransactionError"}class qP{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(K("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(K("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),_i(r)}add(e){return K("SimpleDb","ADD",this.store.name,e,e),_i(this.store.add(e))}get(e){return _i(this.store.get(e)).next(n=>(n===void 0&&(n=null),K("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return K("SimpleDb","DELETE",this.store.name,e),_i(this.store.delete(e))}count(){return K("SimpleDb","COUNT",this.store.name),_i(this.store.count())}U(e,n){const r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const s=i.getAll(r.range);return new V((o,l)=>{s.onerror=u=>{l(u.target.error)},s.onsuccess=u=>{o(u.target.result)}})}{const s=this.cursor(r),o=[];return this.W(s,(l,u)=>{o.push(u)}).next(()=>o)}}G(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new V((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}j(e,n){K("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.H=!1;const i=this.cursor(r);return this.W(i,(s,o,l)=>l.delete())}J(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.W(i,n)}Y(e){const n=this.cursor({});return new V((r,i)=>{n.onerror=s=>{const o=Ep(s.target.error);i(o)},n.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(l=>{l?o.continue():r()}):r()}})}W(e,n){const r=[];return new V((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const l=o.target.result;if(!l)return void i();const u=new $P(l),h=n(l.primaryKey,l.value,u);if(h instanceof V){const f=h.catch(p=>(u.done(),V.reject(p)));r.push(f)}u.isDone?i():u.K===null?l.continue():l.continue(u.K)}}).next(()=>V.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function _i(t){return new V((e,n)=>{t.onsuccess=r=>{const i=r.target.result;e(i)},t.onerror=r=>{const i=Ep(r.target.error);n(i)}})}let Dy=!1;function Ep(t){const e=Hr.S(Qu());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new Z("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Dy||(Dy=!0,setTimeout(()=>{throw r},0)),r}}return t}class KP{constructor(e,n){this.asyncQueue=e,this.Z=n,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){K("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{K("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(n){Yi(n)?K("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",n):await Rc(n)}await this.X(6e4)})}}class GP{constructor(e,n){this.localStore=e,this.persistence=n}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.te(n,e))}te(e,n){const r=new Set;let i=n,s=!0;return V.doWhile(()=>s===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return K("IndexBackfiller",`Processing collection: ${o}`),this.ne(e,o,i).next(l=>{i-=l,r.add(o)});s=!1})).next(()=>n-i)}ne(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.re(i,s)).next(l=>(K("IndexBackfiller",`Updating offset: ${l}`),this.localStore.indexManager.updateCollectionGroup(e,n,l))).next(()=>o.size)}))}re(e,n){let r=e;return n.changes.forEach((i,s)=>{const o=Gw(s);wp(o,r)>0&&(r=o)}),new Zt(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Sn.oe=-1;function kc(t){return t==null}function Fa(t){return t===0&&1/t==-1/0}function QP(t){return typeof t=="number"&&Number.isInteger(t)&&!Fa(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rt(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Vy(e)),e=HP(t.get(n),e);return Vy(e)}function HP(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case"":n+="";break;default:n+=s}}return n}function Vy(t){return t+""}function Bn(t){const e=t.length;if(re(e>=2),e===2)return re(t.charAt(0)===""&&t.charAt(1)===""),Te.emptyPath();const n=e-2,r=[];let i="";for(let s=0;s<e;){const o=t.indexOf("",s);switch((o<0||o>n)&&ne(),t.charAt(o+1)){case"":const l=t.substring(s,o);let u;i.length===0?u=l:(i+=l,u=i,i=""),r.push(u);break;case"":i+=t.substring(s,o),i+="\0";break;case"":i+=t.substring(s,o+1);break;default:ne()}s=o+2}return new Te(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ny=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function du(t,e){return[t,Rt(e)]}function Yw(t,e,n){return[t,Rt(e),n]}const WP={},YP=["prefixPath","collectionGroup","readTime","documentId"],XP=["prefixPath","collectionGroup","documentId"],JP=["collectionGroup","readTime","prefixPath","documentId"],ZP=["canonicalId","targetId"],eR=["targetId","path"],tR=["path","targetId"],nR=["collectionId","parent"],rR=["indexId","uid"],iR=["uid","sequenceNumber"],sR=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],oR=["indexId","uid","orderedDocumentKey"],aR=["userId","collectionPath","documentId"],lR=["userId","collectionPath","largestBatchId"],uR=["userId","collectionGroup","largestBatchId"],Xw=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],cR=[...Xw,"documentOverlays"],Jw=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Zw=Jw,Ip=[...Zw,"indexConfiguration","indexState","indexEntries"],hR=Ip,dR=[...Ip,"globals"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ef extends Hw{constructor(e,n){super(),this._e=e,this.currentSequenceNumber=n}}function nt(t,e){const n=Se(t);return Hr.F(n._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oy(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Za(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function eE(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e,n){this.comparator=e,this.root=n||ct.EMPTY}insert(e,n){return new Ct(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ct.BLACK,null,null))}remove(e){return new Ct(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ct.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new $l(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new $l(this.root,e,this.comparator,!1)}getReverseIterator(){return new $l(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new $l(this.root,e,this.comparator,!0)}}class $l{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ct{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??ct.RED,this.left=i??ct.EMPTY,this.right=s??ct.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new ct(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ct.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return ct.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ct.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ct.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ne();const e=this.left.check();if(e!==this.right.check())throw ne();return e+(this.isRed()?0:1)}}ct.EMPTY=null,ct.RED=!0,ct.BLACK=!1;ct.EMPTY=new class{constructor(){this.size=0}get key(){throw ne()}get value(){throw ne()}get color(){throw ne()}get left(){throw ne()}get right(){throw ne()}copy(e,n,r,i,s){return this}insert(e,n,r){return new ct(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{constructor(e){this.comparator=e,this.data=new Ct(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Fy(this.data.getIterator())}getIteratorFrom(e){return new Fy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Ae)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ae(this.comparator);return n.data=e,n}}class Fy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function ls(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e){this.fields=e,e.sort(Me.comparator)}static empty(){return new dn([])}unionWith(e){let n=new Ae(Me.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new dn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Js(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fR extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new fR("Invalid base64 string: "+s):s}}(e);return new Ut(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Ut(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ae(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ut.EMPTY_BYTE_STRING=new Ut("");const pR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Zr(t){if(re(!!t),typeof t=="string"){let e=0;const n=pR.exec(t);if(re(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ye(t.seconds),nanos:Ye(t.nanos)}}function Ye(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Zs(t){return typeof t=="string"?Ut.fromBase64String(t):Ut.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tp(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function tE(t){const e=t.mapValue.fields.__previous_value__;return Tp(e)?tE(e):e}function Xu(t){const e=Zr(t.mapValue.fields.__local_write_time__.timestampValue);return new qe(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mR{constructor(e,n,r,i,s,o,l,u,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=h}}class eo{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new eo("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof eo&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Or={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},fu={nullValue:"NULL_VALUE"};function to(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Tp(t)?4:nE(t)?9007199254740991:bc(t)?10:11:ne()}function Kn(t,e){if(t===e)return!0;const n=to(t);if(n!==to(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Xu(t).isEqual(Xu(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Zr(i.timestampValue),l=Zr(s.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Zs(i.bytesValue).isEqual(Zs(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Ye(i.geoPointValue.latitude)===Ye(s.geoPointValue.latitude)&&Ye(i.geoPointValue.longitude)===Ye(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Ye(i.integerValue)===Ye(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Ye(i.doubleValue),l=Ye(s.doubleValue);return o===l?Fa(o)===Fa(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return Js(t.arrayValue.values||[],e.arrayValue.values||[],Kn);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},l=s.mapValue.fields||{};if(Oy(o)!==Oy(l))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(l[u]===void 0||!Kn(o[u],l[u])))return!1;return!0}(t,e);default:return ne()}}function Ma(t,e){return(t.values||[]).find(n=>Kn(n,e))!==void 0}function ei(t,e){if(t===e)return 0;const n=to(t),r=to(e);if(n!==r)return ae(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ae(t.booleanValue,e.booleanValue);case 2:return function(s,o){const l=Ye(s.integerValue||s.doubleValue),u=Ye(o.integerValue||o.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return My(t.timestampValue,e.timestampValue);case 4:return My(Xu(t),Xu(e));case 5:return ae(t.stringValue,e.stringValue);case 6:return function(s,o){const l=Zs(s),u=Zs(o);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const l=s.split("/"),u=o.split("/");for(let h=0;h<l.length&&h<u.length;h++){const f=ae(l[h],u[h]);if(f!==0)return f}return ae(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const l=ae(Ye(s.latitude),Ye(o.latitude));return l!==0?l:ae(Ye(s.longitude),Ye(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Ly(t.arrayValue,e.arrayValue);case 10:return function(s,o){var l,u,h,f;const p=s.fields||{},g=o.fields||{},S=(l=p.value)===null||l===void 0?void 0:l.arrayValue,C=(u=g.value)===null||u===void 0?void 0:u.arrayValue,k=ae(((h=S==null?void 0:S.values)===null||h===void 0?void 0:h.length)||0,((f=C==null?void 0:C.values)===null||f===void 0?void 0:f.length)||0);return k!==0?k:Ly(S,C)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===Or.mapValue&&o===Or.mapValue)return 0;if(s===Or.mapValue)return 1;if(o===Or.mapValue)return-1;const l=s.fields||{},u=Object.keys(l),h=o.fields||{},f=Object.keys(h);u.sort(),f.sort();for(let p=0;p<u.length&&p<f.length;++p){const g=ae(u[p],f[p]);if(g!==0)return g;const S=ei(l[u[p]],h[f[p]]);if(S!==0)return S}return ae(u.length,f.length)}(t.mapValue,e.mapValue);default:throw ne()}}function My(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ae(t,e);const n=Zr(t),r=Zr(e),i=ae(n.seconds,r.seconds);return i!==0?i:ae(n.nanos,r.nanos)}function Ly(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=ei(n[i],r[i]);if(s)return s}return ae(n.length,r.length)}function no(t){return tf(t)}function tf(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Zr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Zs(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return J.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=tf(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${tf(n.fields[o])}`;return i+"}"}(t.mapValue):ne()}function Ap(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function nf(t){return!!t&&"integerValue"in t}function La(t){return!!t&&"arrayValue"in t}function jy(t){return!!t&&"nullValue"in t}function By(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function pu(t){return!!t&&"mapValue"in t}function bc(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function ua(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Za(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=ua(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ua(t.arrayValue.values[n]);return e}return Object.assign({},t)}function nE(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}const rE={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function gR(t){return"nullValue"in t?fu:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Ap(eo.empty(),J.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?bc(t)?rE:{mapValue:{}}:ne()}function yR(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Ap(eo.empty(),J.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?rE:"mapValue"in t?bc(t)?{mapValue:{}}:Or:ne()}function Uy(t,e){const n=ei(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function zy(t,e){const n=ei(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e){this.value=e}static empty(){return new Qt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!pu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ua(n)}setAll(e){let n=Me.emptyPath(),r={},i=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=l.popLast()}o?r[l.lastSegment()]=ua(o):i.push(l.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());pu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Kn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];pu(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Za(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Qt(ua(this.value))}}function iE(t){const e=[];return Za(t.fields,(n,r)=>{const i=new Me([n]);if(pu(r)){const s=iE(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new dn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(e,n,r,i,s,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=l}static newInvalidDocument(e){return new dt(e,0,me.min(),me.min(),me.min(),Qt.empty(),0)}static newFoundDocument(e,n,r,i){return new dt(e,1,n,me.min(),r,i,0)}static newNoDocument(e,n){return new dt(e,2,n,me.min(),me.min(),Qt.empty(),0)}static newUnknownDocument(e,n){return new dt(e,3,n,me.min(),me.min(),Qt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(me.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Qt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Qt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=me.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof dt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new dt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro{constructor(e,n){this.position=e,this.inclusive=n}}function $y(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=J.comparator(J.fromName(o.referenceValue),n.key):r=ei(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function qy(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Kn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ju{constructor(e,n="asc"){this.field=e,this.dir=n}}function vR(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sE{}class he extends sE{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new _R(e,n,r):n==="array-contains"?new IR(e,r):n==="in"?new hE(e,r):n==="not-in"?new TR(e,r):n==="array-contains-any"?new AR(e,r):new he(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new wR(e,r):new ER(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(ei(n,this.value)):n!==null&&to(this.value)===to(n)&&this.matchesComparison(ei(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ne()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ee extends sE{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Ee(e,n)}matches(e){return io(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function io(t){return t.op==="and"}function rf(t){return t.op==="or"}function Sp(t){return oE(t)&&io(t)}function oE(t){for(const e of t.filters)if(e instanceof Ee)return!1;return!0}function sf(t){if(t instanceof he)return t.field.canonicalString()+t.op.toString()+no(t.value);if(Sp(t))return t.filters.map(e=>sf(e)).join(",");{const e=t.filters.map(n=>sf(n)).join(",");return`${t.op}(${e})`}}function aE(t,e){return t instanceof he?function(r,i){return i instanceof he&&r.op===i.op&&r.field.isEqual(i.field)&&Kn(r.value,i.value)}(t,e):t instanceof Ee?function(r,i){return i instanceof Ee&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,l)=>s&&aE(o,i.filters[l]),!0):!1}(t,e):void ne()}function lE(t,e){const n=t.filters.concat(e);return Ee.create(n,t.op)}function uE(t){return t instanceof he?function(n){return`${n.field.canonicalString()} ${n.op} ${no(n.value)}`}(t):t instanceof Ee?function(n){return n.op.toString()+" {"+n.getFilters().map(uE).join(" ,")+"}"}(t):"Filter"}class _R extends he{constructor(e,n,r){super(e,n,r),this.key=J.fromName(r.referenceValue)}matches(e){const n=J.comparator(e.key,this.key);return this.matchesComparison(n)}}class wR extends he{constructor(e,n){super(e,"in",n),this.keys=cE("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class ER extends he{constructor(e,n){super(e,"not-in",n),this.keys=cE("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function cE(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>J.fromName(r.referenceValue))}class IR extends he{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return La(n)&&Ma(n.arrayValue,this.value)}}class hE extends he{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ma(this.value.arrayValue,n)}}class TR extends he{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ma(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Ma(this.value.arrayValue,n)}}class AR extends he{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!La(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Ma(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SR{constructor(e,n=null,r=[],i=[],s=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=l,this.ue=null}}function of(t,e=null,n=[],r=[],i=null,s=null,o=null){return new SR(t,e,n,r,i,s,o)}function zi(t){const e=Se(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>sf(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),kc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>no(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>no(r)).join(",")),e.ue=n}return e.ue}function el(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!vR(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!aE(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!qy(t.startAt,e.startAt)&&qy(t.endAt,e.endAt)}function xR(t){return J.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Zu(t,e){return t.filters.filter(n=>n instanceof he&&n.field.isEqual(e))}function Ky(t,e,n){let r=fu,i=!0;for(const s of Zu(t,e)){let o=fu,l=!0;switch(s.op){case"<":case"<=":o=gR(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,l=!1;break;case"!=":case"not-in":o=fu}Uy({value:r,inclusive:i},{value:o,inclusive:l})<0&&(r=o,i=l)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];Uy({value:r,inclusive:i},{value:o,inclusive:n.inclusive})<0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}function Gy(t,e,n){let r=Or,i=!0;for(const s of Zu(t,e)){let o=Or,l=!0;switch(s.op){case">=":case">":o=yR(s.value),l=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,l=!1;break;case"!=":case"not-in":o=Or}zy({value:r,inclusive:i},{value:o,inclusive:l})>0&&(r=o,i=l)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];zy({value:r,inclusive:i},{value:o,inclusive:n.inclusive})>0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dc{constructor(e,n=null,r=[],i=[],s=null,o="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=l,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function PR(t,e,n,r,i,s,o,l){return new Dc(t,e,n,r,i,s,o,l)}function dE(t){return new Dc(t)}function Qy(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function RR(t){return t.collectionGroup!==null}function ca(t){const e=Se(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new Ae(Me.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(h=>{h.isInequality()&&(l=l.add(h.field))})}),l})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Ju(s,r))}),n.has(Me.keyField().canonicalString())||e.ce.push(new Ju(Me.keyField(),r))}return e.ce}function nr(t){const e=Se(t);return e.le||(e.le=CR(e,ca(t))),e.le}function CR(t,e){if(t.limitType==="F")return of(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Ju(i.field,s)});const n=t.endAt?new ro(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new ro(t.startAt.position,t.startAt.inclusive):null;return of(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function af(t,e,n){return new Dc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function fE(t,e){return el(nr(t),nr(e))&&t.limitType===e.limitType}function pE(t){return`${zi(nr(t))}|lt:${t.limitType}`}function Bo(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>uE(i)).join(", ")}]`),kc(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>no(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>no(i)).join(",")),`Target(${r})`}(nr(t))}; limitType=${t.limitType})`}function Vc(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):J.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of ca(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,l,u){const h=$y(o,l,u);return o.inclusive?h<=0:h<0}(r.startAt,ca(r),i)||r.endAt&&!function(o,l,u){const h=$y(o,l,u);return o.inclusive?h>=0:h>0}(r.endAt,ca(r),i))}(t,e)}function kR(t){return(e,n)=>{let r=!1;for(const i of ca(t)){const s=bR(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function bR(t,e,n){const r=t.field.isKeyField()?J.comparator(e.key,n.key):function(s,o,l){const u=o.data.field(s),h=l.data.field(s);return u!==null&&h!==null?ei(u,h):ne()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ne()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class si{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Za(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return eE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DR=new Ct(J.comparator);function Fr(){return DR}const mE=new Ct(J.comparator);function ql(...t){let e=mE;for(const n of t)e=e.insert(n.key,n);return e}function gE(t){let e=mE;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Un(){return ha()}function yE(){return ha()}function ha(){return new si(t=>t.toString(),(t,e)=>t.isEqual(e))}const VR=new Ct(J.comparator),NR=new Ae(J.comparator);function et(...t){let e=NR;for(const n of t)e=e.add(n);return e}const OR=new Ae(ae);function FR(){return OR}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xp(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Fa(e)?"-0":e}}function vE(t){return{integerValue:""+t}}function MR(t,e){return QP(e)?vE(e):xp(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nc{constructor(){this._=void 0}}function LR(t,e,n){return t instanceof so?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Tp(s)&&(s=tE(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof oo?wE(t,e):t instanceof ao?EE(t,e):function(i,s){const o=_E(i,s),l=Hy(o)+Hy(i.Pe);return nf(o)&&nf(i.Pe)?vE(l):xp(i.serializer,l)}(t,e)}function jR(t,e,n){return t instanceof oo?wE(t,e):t instanceof ao?EE(t,e):n}function _E(t,e){return t instanceof ja?function(r){return nf(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class so extends Nc{}class oo extends Nc{constructor(e){super(),this.elements=e}}function wE(t,e){const n=IE(e);for(const r of t.elements)n.some(i=>Kn(i,r))||n.push(r);return{arrayValue:{values:n}}}class ao extends Nc{constructor(e){super(),this.elements=e}}function EE(t,e){let n=IE(e);for(const r of t.elements)n=n.filter(i=>!Kn(i,r));return{arrayValue:{values:n}}}class ja extends Nc{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Hy(t){return Ye(t.integerValue||t.doubleValue)}function IE(t){return La(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TE{constructor(e,n){this.field=e,this.transform=n}}function BR(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof oo&&i instanceof oo||r instanceof ao&&i instanceof ao?Js(r.elements,i.elements,Kn):r instanceof ja&&i instanceof ja?Kn(r.Pe,i.Pe):r instanceof so&&i instanceof so}(t.transform,e.transform)}class UR{constructor(e,n){this.version=e,this.transformResults=n}}class Wt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Wt}static exists(e){return new Wt(void 0,e)}static updateTime(e){return new Wt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function mu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Oc{}function AE(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Pp(t.key,Wt.none()):new fo(t.key,t.data,Wt.none());{const n=t.data,r=Qt.empty();let i=new Ae(Me.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new oi(t.key,r,new dn(i.toArray()),Wt.none())}}function zR(t,e,n){t instanceof fo?function(i,s,o){const l=i.value.clone(),u=Yy(i.fieldTransforms,s,o.transformResults);l.setAll(u),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof oi?function(i,s,o){if(!mu(i.precondition,s))return void s.convertToUnknownDocument(o.version);const l=Yy(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(SE(i)),u.setAll(l),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function da(t,e,n,r){return t instanceof fo?function(s,o,l,u){if(!mu(s.precondition,o))return l;const h=s.value.clone(),f=Xy(s.fieldTransforms,u,o);return h.setAll(f),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null}(t,e,n,r):t instanceof oi?function(s,o,l,u){if(!mu(s.precondition,o))return l;const h=Xy(s.fieldTransforms,u,o),f=o.data;return f.setAll(SE(s)),f.setAll(h),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(s,o,l){return mu(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function $R(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=_E(r.transform,i||null);s!=null&&(n===null&&(n=Qt.empty()),n.set(r.field,s))}return n||null}function Wy(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Js(r,i,(s,o)=>BR(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class fo extends Oc{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class oi extends Oc{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function SE(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Yy(t,e,n){const r=new Map;re(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,l=e.data.field(s.field);r.set(s.field,jR(o,l,n[i]))}return r}function Xy(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,LR(s,o,e))}return r}class Pp extends Oc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class xE extends Oc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rp{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&zR(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=da(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=da(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=yE();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let l=this.applyToLocalView(o,s.mutatedFields);l=n.has(i.key)?null:l;const u=AE(o,l);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(me.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),et())}isEqual(e){return this.batchId===e.batchId&&Js(this.mutations,e.mutations,(n,r)=>Wy(n,r))&&Js(this.baseMutations,e.baseMutations,(n,r)=>Wy(n,r))}}class Cp{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){re(e.mutations.length===r.length);let i=function(){return VR}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new Cp(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kp{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var We,fe;function qR(t){switch(t){default:return ne();case z.CANCELLED:case z.UNKNOWN:case z.DEADLINE_EXCEEDED:case z.RESOURCE_EXHAUSTED:case z.INTERNAL:case z.UNAVAILABLE:case z.UNAUTHENTICATED:return!1;case z.INVALID_ARGUMENT:case z.NOT_FOUND:case z.ALREADY_EXISTS:case z.PERMISSION_DENIED:case z.FAILED_PRECONDITION:case z.ABORTED:case z.OUT_OF_RANGE:case z.UNIMPLEMENTED:case z.DATA_LOSS:return!0}}function KR(t){if(t===void 0)return Gt("GRPC error has no .code"),z.UNKNOWN;switch(t){case We.OK:return z.OK;case We.CANCELLED:return z.CANCELLED;case We.UNKNOWN:return z.UNKNOWN;case We.DEADLINE_EXCEEDED:return z.DEADLINE_EXCEEDED;case We.RESOURCE_EXHAUSTED:return z.RESOURCE_EXHAUSTED;case We.INTERNAL:return z.INTERNAL;case We.UNAVAILABLE:return z.UNAVAILABLE;case We.UNAUTHENTICATED:return z.UNAUTHENTICATED;case We.INVALID_ARGUMENT:return z.INVALID_ARGUMENT;case We.NOT_FOUND:return z.NOT_FOUND;case We.ALREADY_EXISTS:return z.ALREADY_EXISTS;case We.PERMISSION_DENIED:return z.PERMISSION_DENIED;case We.FAILED_PRECONDITION:return z.FAILED_PRECONDITION;case We.ABORTED:return z.ABORTED;case We.OUT_OF_RANGE:return z.OUT_OF_RANGE;case We.UNIMPLEMENTED:return z.UNIMPLEMENTED;case We.DATA_LOSS:return z.DATA_LOSS;default:return ne()}}(fe=We||(We={}))[fe.OK=0]="OK",fe[fe.CANCELLED=1]="CANCELLED",fe[fe.UNKNOWN=2]="UNKNOWN",fe[fe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",fe[fe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",fe[fe.NOT_FOUND=5]="NOT_FOUND",fe[fe.ALREADY_EXISTS=6]="ALREADY_EXISTS",fe[fe.PERMISSION_DENIED=7]="PERMISSION_DENIED",fe[fe.UNAUTHENTICATED=16]="UNAUTHENTICATED",fe[fe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",fe[fe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",fe[fe.ABORTED=10]="ABORTED",fe[fe.OUT_OF_RANGE=11]="OUT_OF_RANGE",fe[fe.UNIMPLEMENTED=12]="UNIMPLEMENTED",fe[fe.INTERNAL=13]="INTERNAL",fe[fe.UNAVAILABLE=14]="UNAVAILABLE",fe[fe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new Mw([4294967295,4294967295],0);const GR={asc:"ASCENDING",desc:"DESCENDING"},QR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},HR={and:"AND",or:"OR"};class WR{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function YR(t,e){return t.useProto3Json||kc(e)?e:{value:e}}function Ba(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function XR(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function JR(t,e){return Ba(t,e.toTimestamp())}function Rn(t){return re(!!t),me.fromTimestamp(function(n){const r=Zr(n);return new qe(r.seconds,r.nanos)}(t))}function bp(t,e){return lf(t,e).canonicalString()}function lf(t,e){const n=function(i){return new Te(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function PE(t){const e=Te.fromString(t);return re(lC(e)),e}function ec(t,e){return bp(t.databaseId,e.path)}function gu(t,e){const n=PE(e);if(n.get(1)!==t.databaseId.projectId)throw new Z(z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Z(z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new J(kE(n))}function RE(t,e){return bp(t.databaseId,e)}function CE(t){const e=PE(t);return e.length===4?Te.emptyPath():kE(e)}function ZR(t){return new Te(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function kE(t){return re(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Jy(t,e,n){return{name:ec(t,e),fields:n.value.mapValue.fields}}function eC(t,e,n){const r=gu(t,e.name),i=Rn(e.updateTime),s=e.createTime?Rn(e.createTime):me.min(),o=new Qt({mapValue:{fields:e.fields}}),l=dt.newFoundDocument(r,i,s,o);return n&&l.setHasCommittedMutations(),n?l.setHasCommittedMutations():l}function tc(t,e){let n;if(e instanceof fo)n={update:Jy(t,e.key,e.value)};else if(e instanceof Pp)n={delete:ec(t,e.key)};else if(e instanceof oi)n={update:Jy(t,e.key,e.data),updateMask:aC(e.fieldMask)};else{if(!(e instanceof xE))return ne();n={verify:ec(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const l=o.transform;if(l instanceof so)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof oo)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof ao)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof ja)return{fieldPath:o.field.canonicalString(),increment:l.Pe};throw ne()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:JR(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:ne()}(t,e.precondition)),n}function uf(t,e){const n=e.currentDocument?function(s){return s.updateTime!==void 0?Wt.updateTime(Rn(s.updateTime)):s.exists!==void 0?Wt.exists(s.exists):Wt.none()}(e.currentDocument):Wt.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,l){let u=null;if("setToServerValue"in l)re(l.setToServerValue==="REQUEST_TIME"),u=new so;else if("appendMissingElements"in l){const f=l.appendMissingElements.values||[];u=new oo(f)}else if("removeAllFromArray"in l){const f=l.removeAllFromArray.values||[];u=new ao(f)}else"increment"in l?u=new ja(o,l.increment):ne();const h=Me.fromServerFormat(l.fieldPath);return new TE(h,u)}(t,i)):[];if(e.update){e.update.name;const i=gu(t,e.update.name),s=new Qt({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(u){const h=u.fieldPaths||[];return new dn(h.map(f=>Me.fromServerFormat(f)))}(e.updateMask);return new oi(i,s,o,n,r)}return new fo(i,s,n,r)}if(e.delete){const i=gu(t,e.delete);return new Pp(i,n)}if(e.verify){const i=gu(t,e.verify);return new xE(i,n)}return ne()}function tC(t,e){return t&&t.length>0?(re(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?Rn(i.updateTime):Rn(s);return o.isEqual(me.min())&&(o=Rn(s)),new UR(o,i.transformResults||[])}(n,e))):[]}function nC(t,e){return{documents:[RE(t,e.path)]}}function rC(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=RE(t,i);const s=function(h){if(h.length!==0)return VE(Ee.create(h,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(h){if(h.length!==0)return h.map(f=>function(g){return{field:fs(g.field),direction:iC(g.dir)}}(f))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=YR(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{_t:n,parent:i}}function bE(t){let e=CE(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){re(r===1);const f=n.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let s=[];n.where&&(s=function(p){const g=DE(p);return g instanceof Ee&&Sp(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(g=>function(C){return new Ju(ps(C.field),function(j){switch(j){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(C.direction))}(g))}(n.orderBy));let l=null;n.limit&&(l=function(p){let g;return g=typeof p=="object"?p.value:p,kc(g)?null:g}(n.limit));let u=null;n.startAt&&(u=function(p){const g=!!p.before,S=p.values||[];return new ro(S,g)}(n.startAt));let h=null;return n.endAt&&(h=function(p){const g=!p.before,S=p.values||[];return new ro(S,g)}(n.endAt)),PR(e,i,o,s,l,"F",u,h)}function DE(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=ps(n.unaryFilter.field);return he.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=ps(n.unaryFilter.field);return he.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=ps(n.unaryFilter.field);return he.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=ps(n.unaryFilter.field);return he.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ne()}}(t):t.fieldFilter!==void 0?function(n){return he.create(ps(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ne()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Ee.create(n.compositeFilter.filters.map(r=>DE(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ne()}}(n.compositeFilter.op))}(t):ne()}function iC(t){return GR[t]}function sC(t){return QR[t]}function oC(t){return HR[t]}function fs(t){return{fieldPath:t.canonicalString()}}function ps(t){return Me.fromServerFormat(t.fieldPath)}function VE(t){return t instanceof he?function(n){if(n.op==="=="){if(By(n.value))return{unaryFilter:{field:fs(n.field),op:"IS_NAN"}};if(jy(n.value))return{unaryFilter:{field:fs(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(By(n.value))return{unaryFilter:{field:fs(n.field),op:"IS_NOT_NAN"}};if(jy(n.value))return{unaryFilter:{field:fs(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:fs(n.field),op:sC(n.op),value:n.value}}}(t):t instanceof Ee?function(n){const r=n.getFilters().map(i=>VE(i));return r.length===1?r[0]:{compositeFilter:{op:oC(n.op),filters:r}}}(t):ne()}function aC(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function lC(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cs{constructor(e,n,r,i,s=me.min(),o=me.min(),l=Ut.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new Cs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Cs(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Cs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Cs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NE{constructor(e){this.ct=e}}function uC(t,e){let n;if(e.document)n=eC(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=J.fromSegments(e.noDocument.path),i=qi(e.noDocument.readTime);n=dt.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return ne();{const r=J.fromSegments(e.unknownDocument.path),i=qi(e.unknownDocument.version);n=dt.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(i){const s=new qe(i[0],i[1]);return me.fromTimestamp(s)}(e.readTime)),n}function Zy(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:nc(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(s,o){return{name:ec(s,o.key),fields:o.data.value.mapValue.fields,updateTime:Ba(s,o.version.toTimestamp()),createTime:Ba(s,o.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:$i(e.version)};else{if(!e.isUnknownDocument())return ne();r.unknownDocument={path:n.path.toArray(),version:$i(e.version)}}return r}function nc(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function $i(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function qi(t){const e=new qe(t.seconds,t.nanoseconds);return me.fromTimestamp(e)}function wi(t,e){const n=(e.baseMutations||[]).map(s=>uf(t.ct,s));for(let s=0;s<e.mutations.length-1;++s){const o=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const l=e.mutations[s+1];o.updateTransforms=l.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const r=e.mutations.map(s=>uf(t.ct,s)),i=qe.fromMillis(e.localWriteTimeMs);return new Rp(e.batchId,i,n,r)}function Xo(t){const e=qi(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?qi(t.lastLimboFreeSnapshotVersion):me.min();let r;return r=function(s){return s.documents!==void 0}(t.query)?function(s){return re(s.documents.length===1),nr(dE(CE(s.documents[0])))}(t.query):function(s){return nr(bE(s))}(t.query),new Cs(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,Ut.fromBase64String(t.resumeToken))}function OE(t,e){const n=$i(e.snapshotVersion),r=$i(e.lastLimboFreeSnapshotVersion);let i;i=xR(e.target)?nC(t.ct,e.target):rC(t.ct,e.target)._t;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:zi(e.target),readTime:n,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function FE(t){const e=bE({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?af(e,e.limit,"L"):e}function qh(t,e){return new kp(e.largestBatchId,uf(t.ct,e.overlayMutation))}function ev(t,e){const n=e.path.lastSegment();return[t,Rt(e.path.popLast()),n]}function tv(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:$i(r.readTime),documentKey:Rt(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cC{getBundleMetadata(e,n){return nv(e).get(n).next(r=>{if(r)return function(s){return{id:s.bundleId,createTime:qi(s.createTime),version:s.version}}(r)})}saveBundleMetadata(e,n){return nv(e).put(function(i){return{bundleId:i.id,createTime:$i(Rn(i.createTime)),version:i.version}}(n))}getNamedQuery(e,n){return rv(e).get(n).next(r=>{if(r)return function(s){return{name:s.name,query:FE(s.bundledQuery),readTime:qi(s.readTime)}}(r)})}saveNamedQuery(e,n){return rv(e).put(function(i){return{name:i.name,readTime:$i(Rn(i.readTime)),bundledQuery:i.bundledQuery}}(n))}}function nv(t){return nt(t,"bundles")}function rv(t){return nt(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fc{constructor(e,n){this.serializer=e,this.userId=n}static lt(e,n){const r=n.uid||"";return new Fc(e,r)}getOverlay(e,n){return Uo(e).get(ev(this.userId,n)).next(r=>r?qh(this.serializer,r):null)}getOverlays(e,n){const r=Un();return V.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){const i=[];return r.forEach((s,o)=>{const l=new kp(n,o);i.push(this.ht(e,l))}),V.waitFor(i)}removeOverlaysForBatchId(e,n,r){const i=new Set;n.forEach(o=>i.add(Rt(o.getCollectionPath())));const s=[];return i.forEach(o=>{const l=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(Uo(e).j("collectionPathOverlayIndex",l))}),V.waitFor(s)}getOverlaysForCollection(e,n,r){const i=Un(),s=Rt(n),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Uo(e).U("collectionPathOverlayIndex",o).next(l=>{for(const u of l){const h=qh(this.serializer,u);i.set(h.getKey(),h)}return i})}getOverlaysForCollectionGroup(e,n,r,i){const s=Un();let o;const l=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Uo(e).J({index:"collectionGroupOverlayIndex",range:l},(u,h,f)=>{const p=qh(this.serializer,h);s.size()<i||p.largestBatchId===o?(s.set(p.getKey(),p),o=p.largestBatchId):f.done()}).next(()=>s)}ht(e,n){return Uo(e).put(function(i,s,o){const[l,u,h]=ev(s,o.mutation.key);return{userId:s,collectionPath:u,documentId:h,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:tc(i.ct,o.mutation)}}(this.serializer,this.userId,n))}}function Uo(t){return nt(t,"documentOverlays")}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hC{Pt(e){return nt(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(n=>{const r=n==null?void 0:n.value;return r?Ut.fromUint8Array(r):Ut.EMPTY_BYTE_STRING})}setSessionToken(e,n){return this.Pt(e).put({name:"sessionToken",value:n.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei{constructor(){}It(e,n){this.Tt(e,n),n.Et()}Tt(e,n){if("nullValue"in e)this.dt(n,5);else if("booleanValue"in e)this.dt(n,10),n.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(n,15),n.At(Ye(e.integerValue));else if("doubleValue"in e){const r=Ye(e.doubleValue);isNaN(r)?this.dt(n,13):(this.dt(n,15),Fa(r)?n.At(0):n.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(n,20),typeof r=="string"&&(r=Zr(r)),n.Rt(`${r.seconds||""}`),n.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,n),this.ft(n);else if("bytesValue"in e)this.dt(n,30),n.gt(Zs(e.bytesValue)),this.ft(n);else if("referenceValue"in e)this.yt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.dt(n,45),n.At(r.latitude||0),n.At(r.longitude||0)}else"mapValue"in e?nE(e)?this.dt(n,Number.MAX_SAFE_INTEGER):bc(e)?this.wt(e.mapValue,n):(this.St(e.mapValue,n),this.ft(n)):"arrayValue"in e?(this.bt(e.arrayValue,n),this.ft(n)):ne()}Vt(e,n){this.dt(n,25),this.Dt(e,n)}Dt(e,n){n.Rt(e)}St(e,n){const r=e.fields||{};this.dt(n,55);for(const i of Object.keys(r))this.Vt(i,n),this.Tt(r[i],n)}wt(e,n){var r,i;const s=e.fields||{};this.dt(n,53);const o="value",l=((i=(r=s[o].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(n,15),n.At(Ye(l)),this.Vt(o,n),this.Tt(s[o],n)}bt(e,n){const r=e.values||[];this.dt(n,50);for(const i of r)this.Tt(i,n)}yt(e,n){this.dt(n,37),J.fromName(e).path.forEach(r=>{this.dt(n,60),this.Dt(r,n)})}dt(e,n){e.At(n)}ft(e){e.At(2)}}Ei.vt=new Ei;function dC(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function iv(t){const e=64-function(r){let i=0;for(let s=0;s<8;++s){const o=dC(255&r[s]);if(i+=o,o!==8)break}return i}(t);return Math.ceil(e/8)}class fC{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ft(r.value),r=n.next();this.Mt()}xt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ot(r.value),r=n.next();this.Nt()}Lt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{const i=n.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Bt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{const i=n.codePointAt(0);this.Ot(240|i>>>18),this.Ot(128|63&i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i)}}this.Nt()}kt(e){const n=this.qt(e),r=iv(n);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}Kt(e){const n=this.qt(e),r=iv(n);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const n=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=(128&n[0])!=0;n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Ft(e){const n=255&e;n===0?(this.Ut(0),this.Ut(255)):n===255?(this.Ut(255),this.Ut(0)):this.Ut(n)}Ot(e){const n=255&e;n===0?(this.Gt(0),this.Gt(255)):n===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class pC{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class mC{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class zo{constructor(){this.jt=new fC,this.Ht=new pC(this.jt),this.Jt=new mC(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii{constructor(e,n,r,i){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}Zt(){const e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Ii(this.indexId,this.documentKey,this.arrayValue,r)}}function yr(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=sv(t.arrayValue,e.arrayValue),n!==0?n:(n=sv(t.directionalValue,e.directionalValue),n!==0?n:J.comparator(t.documentKey,e.documentKey)))}function sv(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ov{constructor(e){this.Xt=new Ae((n,r)=>Me.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const n of e.filters){const r=n;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(re(e.collectionGroup===this.collectionId),this.nn)return!1;const n=Zd(e);if(n!==void 0&&!this.sn(n))return!1;const r=vi(e);let i=new Set,s=0,o=0;for(;s<r.length&&this.sn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Xt.size>0){const l=this.Xt.getIterator().getNext();if(!i.has(l.field.canonicalString())){const u=r[s];if(!this.on(l,u)||!this._n(this.en[o++],u))return!1}++s}for(;s<r.length;++s){const l=r[s];if(o>=this.en.length||!this._n(this.en[o++],l))return!1}return!0}an(){if(this.nn)return null;let e=new Ae(Me.comparator);const n=[];for(const r of this.tn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new hu(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new hu(r.field,0))}for(const r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new hu(r.field,r.dir==="asc"?0:1)));return new Yu(Yu.UNKNOWN_ID,this.collectionId,n,Oa.empty())}sn(e){for(const n of this.tn)if(this.on(n,e))return!0;return!1}on(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}_n(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ME(t){var e,n;if(re(t instanceof he||t instanceof Ee),t instanceof he){if(t instanceof hE){const i=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(s=>he.create(t.field,"==",s)))||[];return Ee.create(i,"or")}return t}const r=t.filters.map(i=>ME(i));return Ee.create(r,t.op)}function gC(t){if(t.getFilters().length===0)return[];const e=df(ME(t));return re(LE(e)),cf(e)||hf(e)?[e]:e.getFilters()}function cf(t){return t instanceof he}function hf(t){return t instanceof Ee&&Sp(t)}function LE(t){return cf(t)||hf(t)||function(n){if(n instanceof Ee&&rf(n)){for(const r of n.getFilters())if(!cf(r)&&!hf(r))return!1;return!0}return!1}(t)}function df(t){if(re(t instanceof he||t instanceof Ee),t instanceof he)return t;if(t.filters.length===1)return df(t.filters[0]);const e=t.filters.map(r=>df(r));let n=Ee.create(e,t.op);return n=rc(n),LE(n)?n:(re(n instanceof Ee),re(io(n)),re(n.filters.length>1),n.filters.reduce((r,i)=>Dp(r,i)))}function Dp(t,e){let n;return re(t instanceof he||t instanceof Ee),re(e instanceof he||e instanceof Ee),n=t instanceof he?e instanceof he?function(i,s){return Ee.create([i,s],"and")}(t,e):av(t,e):e instanceof he?av(e,t):function(i,s){if(re(i.filters.length>0&&s.filters.length>0),io(i)&&io(s))return lE(i,s.getFilters());const o=rf(i)?i:s,l=rf(i)?s:i,u=o.filters.map(h=>Dp(h,l));return Ee.create(u,"or")}(t,e),rc(n)}function av(t,e){if(io(e))return lE(e,t.getFilters());{const n=e.filters.map(r=>Dp(t,r));return Ee.create(n,"or")}}function rc(t){if(re(t instanceof he||t instanceof Ee),t instanceof he)return t;const e=t.getFilters();if(e.length===1)return rc(e[0]);if(oE(t))return t;const n=e.map(i=>rc(i)),r=[];return n.forEach(i=>{i instanceof he?r.push(i):i instanceof Ee&&(i.op===t.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:Ee.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yC{constructor(){this.un=new Vp}addToCollectionParentIndex(e,n){return this.un.add(n),V.resolve()}getCollectionParents(e,n){return V.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return V.resolve()}deleteFieldIndex(e,n){return V.resolve()}deleteAllFieldIndexes(e){return V.resolve()}createTargetIndexes(e,n){return V.resolve()}getDocumentsMatchingTarget(e,n){return V.resolve(null)}getIndexType(e,n){return V.resolve(0)}getFieldIndexes(e,n){return V.resolve([])}getNextCollectionGroupToUpdate(e){return V.resolve(null)}getMinOffset(e,n){return V.resolve(Zt.min())}getMinOffsetFromCollectionGroup(e,n){return V.resolve(Zt.min())}updateCollectionGroup(e,n,r){return V.resolve()}updateIndexEntries(e,n){return V.resolve()}}class Vp{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Ae(Te.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ae(Te.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kl=new Uint8Array(0);class vC{constructor(e,n){this.databaseId=n,this.cn=new Vp,this.ln=new si(r=>zi(r),(r,i)=>el(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.cn.has(n)){const r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this.cn.add(n)});const s={collectionId:r,parent:Rt(i)};return lv(e).put(s)}return V.resolve()}getCollectionParents(e,n){const r=[],i=IDBKeyRange.bound([n,""],[Kw(n),""],!1,!0);return lv(e).U(i).next(s=>{for(const o of s){if(o.collectionId!==n)break;r.push(Bn(o.parent))}return r})}addFieldIndex(e,n){const r=$o(e),i=function(l){return{indexId:l.indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(u=>[u.fieldPath.canonicalString(),u.kind])}}(n);delete i.indexId;const s=r.add(i);if(n.indexState){const o=cs(e);return s.next(l=>{o.put(tv(l,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return s.next()}deleteFieldIndex(e,n){const r=$o(e),i=cs(e),s=us(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=$o(e),r=us(e),i=cs(e);return n.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,n){return V.forEach(this.hn(n),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){const s=new ov(r).an();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,n){const r=us(e);let i=!0;const s=new Map;return V.forEach(this.hn(n),o=>this.Pn(e,o).next(l=>{i&&(i=!!l),s.set(o,l)})).next(()=>{if(i){let o=et();const l=[];return V.forEach(s,(u,h)=>{K("IndexedDbIndexManager",`Using index ${function(I){return`id=${I.indexId}|cg=${I.collectionGroup}|f=${I.fields.map(N=>`${N.fieldPath}:${N.kind}`).join(",")}`}(u)} to execute ${zi(n)}`);const f=function(I,N){const L=Zd(N);if(L===void 0)return null;for(const U of Zu(I,L.fieldPath))switch(U.op){case"array-contains-any":return U.value.arrayValue.values||[];case"array-contains":return[U.value]}return null}(h,u),p=function(I,N){const L=new Map;for(const U of vi(N))for(const w of Zu(I,U.fieldPath))switch(w.op){case"==":case"in":L.set(U.fieldPath.canonicalString(),w.value);break;case"not-in":case"!=":return L.set(U.fieldPath.canonicalString(),w.value),Array.from(L.values())}return null}(h,u),g=function(I,N){const L=[];let U=!0;for(const w of vi(N)){const y=w.kind===0?Ky(I,w.fieldPath,I.startAt):Gy(I,w.fieldPath,I.startAt);L.push(y.value),U&&(U=y.inclusive)}return new ro(L,U)}(h,u),S=function(I,N){const L=[];let U=!0;for(const w of vi(N)){const y=w.kind===0?Gy(I,w.fieldPath,I.endAt):Ky(I,w.fieldPath,I.endAt);L.push(y.value),U&&(U=y.inclusive)}return new ro(L,U)}(h,u),C=this.In(u,h,g),k=this.In(u,h,S),j=this.Tn(u,h,p),A=this.En(u.indexId,f,C,g.inclusive,k,S.inclusive,j);return V.forEach(A,v=>r.G(v,n.limit).next(I=>{I.forEach(N=>{const L=J.fromSegments(N.documentKey);o.has(L)||(o=o.add(L),l.push(L))})}))}).next(()=>l)}return V.resolve(null)})}hn(e){let n=this.ln.get(e);return n||(e.filters.length===0?n=[e]:n=gC(Ee.create(e.filters,"and")).map(r=>of(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,n),n)}En(e,n,r,i,s,o,l){const u=(n!=null?n.length:1)*Math.max(r.length,s.length),h=u/(n!=null?n.length:1),f=[];for(let p=0;p<u;++p){const g=n?this.dn(n[p/h]):Kl,S=this.An(e,g,r[p%h],i),C=this.Rn(e,g,s[p%h],o),k=l.map(j=>this.An(e,g,j,!0));f.push(...this.createRange(S,C,k))}return f}An(e,n,r,i){const s=new Ii(e,J.empty(),n,r);return i?s:s.Zt()}Rn(e,n,r,i){const s=new Ii(e,J.empty(),n,r);return i?s.Zt():s}Pn(e,n){const r=new ov(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const l of s)r.rn(l)&&(!o||l.fields.length>o.fields.length)&&(o=l);return o})}getIndexType(e,n){let r=2;const i=this.hn(n);return V.forEach(i,s=>this.Pn(e,s).next(o=>{o?r!==0&&o.fields.length<function(u){let h=new Ae(Me.comparator),f=!1;for(const p of u.filters)for(const g of p.getFlattenedFilters())g.field.isKeyField()||(g.op==="array-contains"||g.op==="array-contains-any"?f=!0:h=h.add(g.field));for(const p of u.orderBy)p.field.isKeyField()||(h=h.add(p.field));return h.size+(f?1:0)}(s)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(n)&&i.length>1&&r===2?1:r)}Vn(e,n){const r=new zo;for(const i of vi(e)){const s=n.data.field(i.fieldPath);if(s==null)return null;const o=r.Yt(i.kind);Ei.vt.It(s,o)}return r.zt()}dn(e){const n=new zo;return Ei.vt.It(e,n.Yt(0)),n.zt()}mn(e,n){const r=new zo;return Ei.vt.It(Ap(this.databaseId,n),r.Yt(function(s){const o=vi(s);return o.length===0?0:o[o.length-1].kind}(e))),r.zt()}Tn(e,n,r){if(r===null)return[];let i=[];i.push(new zo);let s=0;for(const o of vi(e)){const l=r[s++];for(const u of i)if(this.fn(n,o.fieldPath)&&La(l))i=this.gn(i,o,l);else{const h=u.Yt(o.kind);Ei.vt.It(l,h)}}return this.pn(i)}In(e,n,r){return this.Tn(e,n,r.position)}pn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].zt();return n}gn(e,n,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const l of i){const u=new zo;u.seed(l.zt()),Ei.vt.It(o,u.Yt(n.kind)),s.push(u)}return s}fn(e,n){return!!e.filters.find(r=>r instanceof he&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){const r=$o(e),i=cs(e);return(n?r.U("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.U()).next(s=>{const o=[];return V.forEach(s,l=>i.get([l.indexId,this.uid]).next(u=>{o.push(function(f,p){const g=p?new Oa(p.sequenceNumber,new Zt(qi(p.readTime),new J(Bn(p.documentKey)),p.largestBatchId)):Oa.empty(),S=f.fields.map(([C,k])=>new hu(Me.fromServerFormat(C),k));return new Yu(f.indexId,f.collectionGroup,S,g)}(l,u))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:ae(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const i=$o(e),s=cs(e);return this.yn(e).next(o=>i.U("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(l=>V.forEach(l,u=>s.put(tv(u.indexId,this.uid,o,r)))))}updateIndexEntries(e,n){const r=new Map;return V.forEach(n,(i,s)=>{const o=r.get(i.collectionGroup);return(o?V.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(l=>(r.set(i.collectionGroup,l),V.forEach(l,u=>this.wn(e,i,u).next(h=>{const f=this.Sn(s,u);return h.isEqual(f)?V.resolve():this.bn(e,s,u,h,f)}))))})}Dn(e,n,r,i){return us(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(r,n.key),documentKey:n.key.path.toArray()})}vn(e,n,r,i){return us(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(r,n.key),n.key.path.toArray()])}wn(e,n,r){const i=us(e);let s=new Ae(yr);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,n)])},(o,l)=>{s=s.add(new Ii(r.indexId,n,l.arrayValue,l.directionalValue))}).next(()=>s)}Sn(e,n){let r=new Ae(yr);const i=this.Vn(n,e);if(i==null)return r;const s=Zd(n);if(s!=null){const o=e.data.field(s.fieldPath);if(La(o))for(const l of o.arrayValue.values||[])r=r.add(new Ii(n.indexId,e.key,this.dn(l),i))}else r=r.add(new Ii(n.indexId,e.key,Kl,i));return r}bn(e,n,r,i,s){K("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const o=[];return function(u,h,f,p,g){const S=u.getIterator(),C=h.getIterator();let k=ls(S),j=ls(C);for(;k||j;){let A=!1,v=!1;if(k&&j){const I=f(k,j);I<0?v=!0:I>0&&(A=!0)}else k!=null?v=!0:A=!0;A?(p(j),j=ls(C)):v?(g(k),k=ls(S)):(k=ls(S),j=ls(C))}}(i,s,yr,l=>{o.push(this.Dn(e,n,r,l))},l=>{o.push(this.vn(e,n,r,l))}),V.waitFor(o)}yn(e){let n=1;return cs(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,l)=>yr(o,l)).filter((o,l,u)=>!l||yr(o,u[l-1])!==0);const i=[];i.push(e);for(const o of r){const l=yr(o,e),u=yr(o,n);if(l===0)i[0]=e.Zt();else if(l>0&&u<0)i.push(o),i.push(o.Zt());else if(u>0)break}i.push(n);const s=[];for(let o=0;o<i.length;o+=2){if(this.Cn(i[o],i[o+1]))return[];const l=[i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,Kl,[]],u=[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,Kl,[]];s.push(IDBKeyRange.bound(l,u))}return s}Cn(e,n){return yr(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(uv)}getMinOffset(e,n){return V.mapArray(this.hn(n),r=>this.Pn(e,r).next(i=>i||ne())).next(uv)}}function lv(t){return nt(t,"collectionParents")}function us(t){return nt(t,"indexEntries")}function $o(t){return nt(t,"indexConfiguration")}function cs(t){return nt(t,"indexState")}function uv(t){re(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const i=t[r].indexState.offset;wp(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Zt(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Nt{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Nt(e,Nt.DEFAULT_COLLECTION_PERCENTILE,Nt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jE(t,e,n){const r=t.store("mutations"),i=t.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId);let l=0;const u=r.J({range:o},(f,p,g)=>(l++,g.delete()));s.push(u.next(()=>{re(l===1)}));const h=[];for(const f of n.mutations){const p=Yw(e,f.key.path,n.batchId);s.push(i.delete(p)),h.push(f.key)}return V.waitFor(s).next(()=>h)}function ic(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw ne();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Nt.DEFAULT_COLLECTION_PERCENTILE=10,Nt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Nt.DEFAULT=new Nt(41943040,Nt.DEFAULT_COLLECTION_PERCENTILE,Nt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Nt.DISABLED=new Nt(-1,0,0);class Mc{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Fn={}}static lt(e,n,r,i){re(e.uid!=="");const s=e.isAuthenticated()?e.uid:"";return new Mc(s,n,r,i)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return vr(e).J({index:"userMutationsIndex",range:r},(i,s,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,i){const s=ms(e),o=vr(e);return o.add({}).next(l=>{re(typeof l=="number");const u=new Rp(l,n,r,i),h=function(S,C,k){const j=k.baseMutations.map(v=>tc(S.ct,v)),A=k.mutations.map(v=>tc(S.ct,v));return{userId:C,batchId:k.batchId,localWriteTimeMs:k.localWriteTime.toMillis(),baseMutations:j,mutations:A}}(this.serializer,this.userId,u),f=[];let p=new Ae((g,S)=>ae(g.canonicalString(),S.canonicalString()));for(const g of i){const S=Yw(this.userId,g.key.path,l);p=p.add(g.key.path.popLast()),f.push(o.put(h)),f.push(s.put(S,WP))}return p.forEach(g=>{f.push(this.indexManager.addToCollectionParentIndex(e,g))}),e.addOnCommittedListener(()=>{this.Fn[l]=u.keys()}),V.waitFor(f).next(()=>u)})}lookupMutationBatch(e,n){return vr(e).get(n).next(r=>r?(re(r.userId===this.userId),wi(this.serializer,r)):null)}Mn(e,n){return this.Fn[n]?V.resolve(this.Fn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const i=r.keys();return this.Fn[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return vr(e).J({index:"userMutationsIndex",range:i},(o,l,u)=>{l.userId===this.userId&&(re(l.batchId>=r),s=wi(this.serializer,l)),u.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return vr(e).J({index:"userMutationsIndex",range:n,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return vr(e).U("userMutationsIndex",n).next(r=>r.map(i=>wi(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=du(this.userId,n.path),i=IDBKeyRange.lowerBound(r),s=[];return ms(e).J({range:i},(o,l,u)=>{const[h,f,p]=o,g=Bn(f);if(h===this.userId&&n.path.isEqual(g))return vr(e).get(p).next(S=>{if(!S)throw ne();re(S.userId===this.userId),s.push(wi(this.serializer,S))});u.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ae(ae);const i=[];return n.forEach(s=>{const o=du(this.userId,s.path),l=IDBKeyRange.lowerBound(o),u=ms(e).J({range:l},(h,f,p)=>{const[g,S,C]=h,k=Bn(S);g===this.userId&&s.path.isEqual(k)?r=r.add(C):p.done()});i.push(u)}),V.waitFor(i).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1,s=du(this.userId,r),o=IDBKeyRange.lowerBound(s);let l=new Ae(ae);return ms(e).J({range:o},(u,h,f)=>{const[p,g,S]=u,C=Bn(g);p===this.userId&&r.isPrefixOf(C)?C.length===i&&(l=l.add(S)):f.done()}).next(()=>this.xn(e,l))}xn(e,n){const r=[],i=[];return n.forEach(s=>{i.push(vr(e).get(s).next(o=>{if(o===null)throw ne();re(o.userId===this.userId),r.push(wi(this.serializer,o))}))}),V.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return jE(e._e,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.On(n.batchId)}),V.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return V.resolve();const r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),i=[];return ms(e).J({range:r},(s,o,l)=>{if(s[0]===this.userId){const u=Bn(s[1]);i.push(u)}else l.done()}).next(()=>{re(i.length===0)})})}containsKey(e,n){return BE(e,this.userId,n)}Nn(e){return UE(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function BE(t,e,n){const r=du(e,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return ms(t).J({range:s,H:!0},(l,u,h)=>{const[f,p,g]=l;f===e&&p===i&&(o=!0),h.done()}).next(()=>o)}function vr(t){return nt(t,"mutations")}function ms(t){return nt(t,"documentMutations")}function UE(t){return nt(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Ki(0)}static kn(){return new Ki(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _C{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.qn(e).next(n=>{const r=new Ki(n.highestTargetId);return n.highestTargetId=r.next(),this.Qn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(n=>me.fromTimestamp(new qe(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.qn(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.Qn(e,i)))}addTargetData(e,n){return this.Kn(e,n).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(n,r),this.Qn(e,r))))}updateTargetData(e,n){return this.Kn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>hs(e).delete(n.targetId)).next(()=>this.qn(e)).next(r=>(re(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,n,r){let i=0;const s=[];return hs(e).J((o,l)=>{const u=Xo(l);u.sequenceNumber<=n&&r.get(u.targetId)===null&&(i++,s.push(this.removeTargetData(e,u)))}).next(()=>V.waitFor(s)).next(()=>i)}forEachTarget(e,n){return hs(e).J((r,i)=>{const s=Xo(i);n(s)})}qn(e){return hv(e).get("targetGlobalKey").next(n=>(re(n!==null),n))}Qn(e,n){return hv(e).put("targetGlobalKey",n)}Kn(e,n){return hs(e).put(OE(this.serializer,n))}$n(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(n=>n.targetCount)}getTargetData(e,n){const r=zi(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return hs(e).J({range:i,index:"queryTargetsIndex"},(o,l,u)=>{const h=Xo(l);el(n,h.target)&&(s=h,u.done())}).next(()=>s)}addMatchingKeys(e,n,r){const i=[],s=Sr(e);return n.forEach(o=>{const l=Rt(o.path);i.push(s.put({targetId:r,path:l})),i.push(this.referenceDelegate.addReference(e,r,o))}),V.waitFor(i)}removeMatchingKeys(e,n,r){const i=Sr(e);return V.forEach(n,s=>{const o=Rt(s.path);return V.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,n){const r=Sr(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),i=Sr(e);let s=et();return i.J({range:r,H:!0},(o,l,u)=>{const h=Bn(o[1]),f=new J(h);s=s.add(f)}).next(()=>s)}containsKey(e,n){const r=Rt(n.path),i=IDBKeyRange.bound([r],[Kw(r)],!1,!0);let s=0;return Sr(e).J({index:"documentTargetsIndex",H:!0,range:i},([o,l],u,h)=>{o!==0&&(s++,h.done())}).next(()=>s>0)}ot(e,n){return hs(e).get(n).next(r=>r?Xo(r):null)}}function hs(t){return nt(t,"targets")}function hv(t){return nt(t,"targetGlobal")}function Sr(t){return nt(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dv([t,e],[n,r]){const i=ae(t,n);return i===0?ae(e,r):i}class wC{constructor(e){this.Un=e,this.buffer=new Ae(dv),this.Wn=0}Gn(){return++this.Wn}zn(e){const n=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();dv(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class EC{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){K("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Yi(n)?K("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await Rc(n)}await this.Hn(3e5)})}}class IC{constructor(e,n){this.Jn=e,this.params=n}calculateTargetCount(e,n){return this.Jn.Yn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return V.resolve(Sn.oe);const r=new wC(n);return this.Jn.forEachTarget(e,i=>r.zn(i.sequenceNumber)).next(()=>this.Jn.Zn(e,i=>r.zn(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Jn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Jn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(K("LruGarbageCollector","Garbage collection skipped; disabled"),V.resolve(cv)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(K("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),cv):this.Xn(e,n))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,n){let r,i,s,o,l,u,h;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(K("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,o=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,l=Date.now(),this.removeTargets(e,r,n))).next(p=>(s=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(h=Date.now(),ds()<=pe.DEBUG&&K("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-f}ms
	Determined least recently used ${i} in `+(l-o)+`ms
	Removed ${s} targets in `+(u-l)+`ms
	Removed ${p} documents in `+(h-u)+`ms
Total Duration: ${h-f}ms`),V.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:p})))}}function TC(t,e){return new IC(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AC{constructor(e,n){this.db=e,this.garbageCollector=TC(this,n)}Yn(e){const n=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}er(e){let n=0;return this.Zn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Zn(e,n){return this.tr(e,(r,i)=>n(i))}addReference(e,n,r){return Gl(e,r)}removeReference(e,n,r){return Gl(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return Gl(e,n)}nr(e,n){return function(i,s){let o=!1;return UE(i).Y(l=>BE(i,l,s).next(u=>(u&&(o=!0),V.resolve(!u)))).next(()=>o)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.tr(e,(o,l)=>{if(l<=n){const u=this.nr(e,o).next(h=>{if(!h)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,me.min()),Sr(e).delete(function(p){return[0,Rt(p.path)]}(o))))});i.push(u)}}).next(()=>V.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return Gl(e,n)}tr(e,n){const r=Sr(e);let i,s=Sn.oe;return r.J({index:"documentTargetsIndex"},([o,l],{path:u,sequenceNumber:h})=>{o===0?(s!==Sn.oe&&n(new J(Bn(i)),s),s=h,i=u):s=Sn.oe}).next(()=>{s!==Sn.oe&&n(new J(Bn(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Gl(t,e){return Sr(t).put(function(r,i){return{targetId:0,path:Rt(r.path),sequenceNumber:i}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zE{constructor(){this.changes=new si(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,dt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?V.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SC{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return fi(e).put(r)}removeEntry(e,n,r){return fi(e).delete(function(s,o){const l=s.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],nc(o),l[l.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.rr(e,r)))}getEntry(e,n){let r=dt.newInvalidDocument(n);return fi(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(qo(n))},(i,s)=>{r=this.ir(n,s)}).next(()=>r)}sr(e,n){let r={size:0,document:dt.newInvalidDocument(n)};return fi(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(qo(n))},(i,s)=>{r={document:this.ir(n,s),size:ic(s)}}).next(()=>r)}getEntries(e,n){let r=Fr();return this._r(e,n,(i,s)=>{const o=this.ir(i,s);r=r.insert(i,o)}).next(()=>r)}ar(e,n){let r=Fr(),i=new Ct(J.comparator);return this._r(e,n,(s,o)=>{const l=this.ir(s,o);r=r.insert(s,l),i=i.insert(s,ic(o))}).next(()=>({documents:r,ur:i}))}_r(e,n,r){if(n.isEmpty())return V.resolve();let i=new Ae(mv);n.forEach(u=>i=i.add(u));const s=IDBKeyRange.bound(qo(i.first()),qo(i.last())),o=i.getIterator();let l=o.getNext();return fi(e).J({index:"documentKeyIndex",range:s},(u,h,f)=>{const p=J.fromSegments([...h.prefixPath,h.collectionGroup,h.documentId]);for(;l&&mv(l,p)<0;)r(l,null),l=o.getNext();l&&l.isEqual(p)&&(r(l,h),l=o.hasNext()?o.getNext():null),l?f.$(qo(l)):f.done()}).next(()=>{for(;l;)r(l,null),l=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,r,i,s){const o=n.path,l=[o.popLast().toArray(),o.lastSegment(),nc(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return fi(e).U(IDBKeyRange.bound(l,u,!0)).next(h=>{s==null||s.incrementDocumentReadCount(h.length);let f=Fr();for(const p of h){const g=this.ir(J.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);g.isFoundDocument()&&(Vc(n,g)||i.has(g.key))&&(f=f.insert(g.key,g))}return f})}getAllFromCollectionGroup(e,n,r,i){let s=Fr();const o=pv(n,r),l=pv(n,Zt.max());return fi(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,l,!0)},(u,h,f)=>{const p=this.ir(J.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);s=s.insert(p.key,p),s.size===i&&f.done()}).next(()=>s)}newChangeBuffer(e){return new xC(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return fv(e).get("remoteDocumentGlobalKey").next(n=>(re(!!n),n))}rr(e,n){return fv(e).put("remoteDocumentGlobalKey",n)}ir(e,n){if(n){const r=uC(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(me.min())))return r}return dt.newInvalidDocument(e)}}function $E(t){return new SC(t)}class xC extends zE{constructor(e,n){super(),this.cr=e,this.trackRemovals=n,this.lr=new si(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const n=[];let r=0,i=new Ae((s,o)=>ae(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const l=this.lr.get(s);if(n.push(this.cr.removeEntry(e,s,l.readTime)),o.isValidDocument()){const u=Zy(this.cr.serializer,o);i=i.add(s.path.popLast());const h=ic(u);r+=h-l.size,n.push(this.cr.addEntry(e,s,u))}else if(r-=l.size,this.trackRemovals){const u=Zy(this.cr.serializer,o.convertToNoDocument(me.min()));n.push(this.cr.addEntry(e,s,u))}}),i.forEach(s=>{n.push(this.cr.indexManager.addToCollectionParentIndex(e,s))}),n.push(this.cr.updateMetadata(e,r)),V.waitFor(n)}getFromCache(e,n){return this.cr.sr(e,n).next(r=>(this.lr.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.cr.ar(e,n).next(({documents:r,ur:i})=>(i.forEach((s,o)=>{this.lr.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function fv(t){return nt(t,"remoteDocumentGlobal")}function fi(t){return nt(t,"remoteDocumentsV14")}function qo(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function pv(t,e){const n=e.documentKey.path.toArray();return[t,nc(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function mv(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=ae(n[s],r[s]),i)return i;return i=ae(n.length,r.length),i||(i=ae(n[n.length-2],r[r.length-2]),i||ae(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PC{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qE{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&da(r.mutation,i,dn.empty(),qe.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,et()).next(()=>r))}getLocalViewOfDocuments(e,n,r=et()){const i=Un();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=ql();return s.forEach((l,u)=>{o=o.insert(l,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Un();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,et()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,i){let s=Fr();const o=ha(),l=function(){return ha()}();return n.forEach((u,h)=>{const f=r.get(h.key);i.has(h.key)&&(f===void 0||f.mutation instanceof oi)?s=s.insert(h.key,h):f!==void 0?(o.set(h.key,f.mutation.getFieldMask()),da(f.mutation,h,f.mutation.getFieldMask(),qe.now())):o.set(h.key,dn.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((h,f)=>o.set(h,f)),n.forEach((h,f)=>{var p;return l.set(h,new PC(f,(p=o.get(h))!==null&&p!==void 0?p:null))}),l))}recalculateAndSaveOverlays(e,n){const r=ha();let i=new Ct((o,l)=>o-l),s=et();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(u=>{const h=n.get(u);if(h===null)return;let f=r.get(u)||dn.empty();f=l.applyToLocalView(h,f),r.set(u,f);const p=(i.get(l.batchId)||et()).add(u);i=i.insert(l.batchId,p)})}).next(()=>{const o=[],l=i.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),h=u.key,f=u.value,p=yE();f.forEach(g=>{if(!s.has(g)){const S=AE(n.get(g),r.get(g));S!==null&&p.set(g,S),s=s.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,h,p))}return V.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return J.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):RR(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):V.resolve(Un());let l=-1,u=s;return o.next(h=>V.forEach(h,(f,p)=>(l<p.largestBatchId&&(l=p.largestBatchId),s.get(f)?V.resolve():this.remoteDocumentCache.getEntry(e,f).next(g=>{u=u.insert(f,g)}))).next(()=>this.populateOverlays(e,h,s)).next(()=>this.computeViews(e,u,h,et())).next(f=>({batchId:l,changes:gE(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new J(n)).next(r=>{let i=ql();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=ql();return this.indexManager.getCollectionParents(e,s).next(l=>V.forEach(l,u=>{const h=function(p,g){return new Dc(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,h,r,i).next(f=>{f.forEach((p,g)=>{o=o.insert(p,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((u,h)=>{const f=h.getKey();o.get(f)===null&&(o=o.insert(f,dt.newInvalidDocument(f)))});let l=ql();return o.forEach((u,h)=>{const f=s.get(u);f!==void 0&&da(f.mutation,h,dn.empty(),qe.now()),Vc(n,h)&&(l=l.insert(u,h))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RC{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return V.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Rn(i.createTime)}}(n)),V.resolve()}getNamedQuery(e,n){return V.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:FE(i.bundledQuery),readTime:Rn(i.readTime)}}(n)),V.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CC{constructor(){this.overlays=new Ct(J.comparator),this.Ir=new Map}getOverlay(e,n){return V.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Un();return V.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),V.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),V.resolve()}getOverlaysForCollection(e,n,r){const i=Un(),s=n.length+1,o=new J(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const u=l.getNext().value,h=u.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return V.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Ct((h,f)=>h-f);const o=this.overlays.getIterator();for(;o.hasNext();){const h=o.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>r){let f=s.get(h.largestBatchId);f===null&&(f=Un(),s=s.insert(h.largestBatchId,f)),f.set(h.getKey(),h)}}const l=Un(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((h,f)=>l.set(h,f)),!(l.size()>=i)););return V.resolve(l)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new kp(n,r));let s=this.Ir.get(n);s===void 0&&(s=et(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kC{constructor(){this.sessionToken=Ut.EMPTY_BYTE_STRING}getSessionToken(e){return V.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,V.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Np{constructor(){this.Tr=new Ae(rt.Er),this.dr=new Ae(rt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new rt(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new rt(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new J(new Te([])),r=new rt(n,e),i=new rt(n,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new J(new Te([])),r=new rt(n,e),i=new rt(n,e+1);let s=et();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new rt(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class rt{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return J.comparator(e.key,n.key)||ae(e.wr,n.wr)}static Ar(e,n){return ae(e.wr,n.wr)||J.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bC{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Ae(rt.Er)}checkEmpty(e){return V.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Rp(s,n,r,i);this.mutationQueue.push(o);for(const l of i)this.br=this.br.add(new rt(l.key,s)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return V.resolve(o)}lookupMutationBatch(e,n){return V.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),s=i<0?0:i;return V.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return V.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return V.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new rt(n,0),i=new rt(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{const l=this.Dr(o.wr);s.push(l)}),V.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ae(ae);return n.forEach(i=>{const s=new rt(i,0),o=new rt(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],l=>{r=r.add(l.wr)})}),V.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;J.isDocumentKey(s)||(s=s.child(""));const o=new rt(new J(s),0);let l=new Ae(ae);return this.br.forEachWhile(u=>{const h=u.key.path;return!!r.isPrefixOf(h)&&(h.length===i&&(l=l.add(u.wr)),!0)},o),V.resolve(this.Cr(l))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){re(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return V.forEach(n.mutations,i=>{const s=new rt(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new rt(n,0),i=this.br.firstAfterOrEqual(r);return V.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,V.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DC{constructor(e){this.Mr=e,this.docs=function(){return new Ct(J.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return V.resolve(r?r.document.mutableCopy():dt.newInvalidDocument(n))}getEntries(e,n){let r=Fr();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():dt.newInvalidDocument(i))}),V.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Fr();const o=n.path,l=new J(o.child("")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:h,value:{document:f}}=u.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||wp(Gw(f),r)<=0||(i.has(f.key)||Vc(n,f))&&(s=s.insert(f.key,f.mutableCopy()))}return V.resolve(s)}getAllFromCollectionGroup(e,n,r,i){ne()}Or(e,n){return V.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new VC(this)}getSize(e){return V.resolve(this.size)}}class VC extends zE{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),V.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NC{constructor(e){this.persistence=e,this.Nr=new si(n=>zi(n),el),this.lastRemoteSnapshotVersion=me.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Np,this.targetCount=0,this.kr=Ki.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),V.resolve()}getLastRemoteSnapshotVersion(e){return V.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return V.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),V.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),V.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Ki(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,V.resolve()}updateTargetData(e,n){return this.Kn(n),V.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,V.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Nr.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,l.targetId)),i++)}),V.waitFor(s).next(()=>i)}getTargetCount(e){return V.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return V.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),V.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),V.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),V.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return V.resolve(r)}containsKey(e,n){return V.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KE{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Sn(0),this.Kr=!1,this.Kr=!0,this.$r=new kC,this.referenceDelegate=e(this),this.Ur=new NC(this),this.indexManager=new yC,this.remoteDocumentCache=function(i){return new DC(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new NE(n),this.Gr=new RC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new CC,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new bC(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){K("MemoryPersistence","Starting transaction:",e);const i=new OC(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return V.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class OC extends Hw{constructor(e){super(),this.currentSequenceNumber=e}}class Lc{constructor(e){this.persistence=e,this.Jr=new Np,this.Yr=null}static Zr(e){return new Lc(e)}get Xr(){if(this.Yr)return this.Yr;throw ne()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),V.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),V.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),V.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return V.forEach(this.Xr,r=>{const i=J.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,me.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return V.or([()=>V.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FC{constructor(e){this.serializer=e}O(e,n,r,i){const s=new Cc("createOrUpgrade",n);r<1&&i>=1&&(function(u){u.createObjectStore("owner")}(e),function(u){u.createObjectStore("mutationQueues",{keyPath:"userId"}),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Ny,{unique:!0}),u.createObjectStore("documentMutations")}(e),gv(e),function(u){u.createObjectStore("remoteDocuments")}(e));let o=V.resolve();return r<3&&i>=3&&(r!==0&&(function(u){u.deleteObjectStore("targetDocuments"),u.deleteObjectStore("targets"),u.deleteObjectStore("targetGlobal")}(e),gv(e)),o=o.next(()=>function(u){const h=u.store("targetGlobal"),f={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:me.min().toTimestamp(),targetCount:0};return h.put("targetGlobalKey",f)}(s))),r<4&&i>=4&&(r!==0&&(o=o.next(()=>function(u,h){return h.store("mutations").U().next(f=>{u.deleteObjectStore("mutations"),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Ny,{unique:!0});const p=h.store("mutations"),g=f.map(S=>p.put(S));return V.waitFor(g)})}(e,s))),o=o.next(()=>{(function(u){u.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(o=o.next(()=>this.ni(s))),r<6&&i>=6&&(o=o.next(()=>(function(u){u.createObjectStore("remoteDocumentGlobal")}(e),this.ri(s)))),r<7&&i>=7&&(o=o.next(()=>this.ii(s))),r<8&&i>=8&&(o=o.next(()=>this.si(e,s))),r<9&&i>=9&&(o=o.next(()=>{(function(u){u.objectStoreNames.contains("remoteDocumentChanges")&&u.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(o=o.next(()=>this.oi(s))),r<11&&i>=11&&(o=o.next(()=>{(function(u){u.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(u){u.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{(function(u){const h=u.createObjectStore("documentOverlays",{keyPath:aR});h.createIndex("collectionPathOverlayIndex",lR,{unique:!1}),h.createIndex("collectionGroupOverlayIndex",uR,{unique:!1})})(e)})),r<13&&i>=13&&(o=o.next(()=>function(u){const h=u.createObjectStore("remoteDocumentsV14",{keyPath:YP});h.createIndex("documentKeyIndex",XP),h.createIndex("collectionGroupIndex",JP)}(e)).next(()=>this._i(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.ai(e,s))),r<15&&i>=15&&(o=o.next(()=>function(u){u.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),u.createObjectStore("indexState",{keyPath:rR}).createIndex("sequenceNumberIndex",iR,{unique:!1}),u.createObjectStore("indexEntries",{keyPath:sR}).createIndex("documentKeyIndex",oR,{unique:!1})}(e))),r<16&&i>=16&&(o=o.next(()=>{n.objectStore("indexState").clear()}).next(()=>{n.objectStore("indexEntries").clear()})),r<17&&i>=17&&(o=o.next(()=>{(function(u){u.createObjectStore("globals",{keyPath:"name"})})(e)})),o}ri(e){let n=0;return e.store("remoteDocuments").J((r,i)=>{n+=ic(i)}).next(()=>{const r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){const n=e.store("mutationQueues"),r=e.store("mutations");return n.U().next(i=>V.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",o).next(l=>V.forEach(l,u=>{re(u.userId===s.userId);const h=wi(this.serializer,u);return jE(e,s.userId,h).next(()=>{})}))}))}ii(e){const n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.J((o,l)=>{const u=new Te(o),h=function(p){return[0,Rt(p)]}(u);s.push(n.get(h).next(f=>f?V.resolve():(p=>n.put({targetId:0,path:Rt(p),sequenceNumber:i.highestListenSequenceNumber}))(u)))}).next(()=>V.waitFor(s))})}si(e,n){e.createObjectStore("collectionParents",{keyPath:nR});const r=n.store("collectionParents"),i=new Vp,s=o=>{if(i.add(o)){const l=o.lastSegment(),u=o.popLast();return r.put({collectionId:l,parent:Rt(u)})}};return n.store("remoteDocuments").J({H:!0},(o,l)=>{const u=new Te(o);return s(u.popLast())}).next(()=>n.store("documentMutations").J({H:!0},([o,l,u],h)=>{const f=Bn(l);return s(f.popLast())}))}oi(e){const n=e.store("targets");return n.J((r,i)=>{const s=Xo(i),o=OE(this.serializer,s);return n.put(o)})}_i(e,n){const r=n.store("remoteDocuments"),i=[];return r.J((s,o)=>{const l=n.store("remoteDocumentsV14"),u=function(p){return p.document?new J(Te.fromString(p.document.name).popFirst(5)):p.noDocument?J.fromSegments(p.noDocument.path):p.unknownDocument?J.fromSegments(p.unknownDocument.path):ne()}(o).path.toArray(),h={prefixPath:u.slice(0,u.length-2),collectionGroup:u[u.length-2],documentId:u[u.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};i.push(l.put(h))}).next(()=>V.waitFor(i))}ai(e,n){const r=n.store("mutations"),i=$E(this.serializer),s=new KE(Lc.Zr,this.serializer.ct);return r.U().next(o=>{const l=new Map;return o.forEach(u=>{var h;let f=(h=l.get(u.userId))!==null&&h!==void 0?h:et();wi(this.serializer,u).keys().forEach(p=>f=f.add(p)),l.set(u.userId,f)}),V.forEach(l,(u,h)=>{const f=new ut(h),p=Fc.lt(this.serializer,f),g=s.getIndexManager(f),S=Mc.lt(f,this.serializer,g,s.referenceDelegate);return new qE(i,S,p,g).recalculateAndSaveOverlaysForDocumentKeys(new ef(n,Sn.oe),u).next()})})}}function gv(t){t.createObjectStore("targetDocuments",{keyPath:eR}).createIndex("documentTargetsIndex",tR,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",ZP,{unique:!0}),t.createObjectStore("targetGlobal")}const Kh="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Op{constructor(e,n,r,i,s,o,l,u,h,f,p=17){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.ui=s,this.window=o,this.document=l,this.ci=h,this.li=f,this.hi=p,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=g=>Promise.resolve(),!Op.D())throw new Z(z.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new AC(this,i),this.Ai=n+"main",this.serializer=new NE(u),this.Ri=new Hr(this.Ai,this.hi,new FC(this.serializer)),this.$r=new hC,this.Ur=new _C(this.referenceDelegate,this.serializer),this.remoteDocumentCache=$E(this.serializer),this.Gr=new cC,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,f===!1&&Gt("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Z(z.FAILED_PRECONDITION,Kh);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new Sn(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(async()=>{this.started&&await this.mi()}))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Ql(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(n=>{n||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(n=>this.isPrimary&&!n?this.bi(e).next(()=>!1):!!n&&this.Di(e).next(()=>!0))).catch(e=>{if(Yi(e))return K("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return K("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return Ko(e).get("owner").next(n=>V.resolve(this.vi(n)))}Ci(e){return Ql(e).delete(this.clientId)}async Fi(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const r=nt(n,"clientMetadata");return r.U().next(i=>{const s=this.xi(i,18e5),o=i.filter(l=>s.indexOf(l)===-1);return V.forEach(o,l=>r.delete(l.clientId)).next(()=>o)})}).catch(()=>[]);if(this.Vi)for(const n of e)this.Vi.removeItem(this.Oi(n.clientId))}}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?V.resolve(!0):Ko(e).get("owner").next(n=>{if(n!==null&&this.Mi(n.leaseTimestampMs,5e3)&&!this.Ni(n.ownerId)){if(this.vi(n)&&this.networkEnabled)return!0;if(!this.vi(n)){if(!n.allowTabSynchronization)throw new Z(z.FAILED_PRECONDITION,Kh);return!1}}return!(!this.networkEnabled||!this.inForeground)||Ql(e).U().next(r=>this.xi(r,5e3).find(i=>{if(this.clientId!==i.clientId){const s=!this.networkEnabled&&i.networkEnabled,o=!this.inForeground&&i.inForeground,l=this.networkEnabled===i.networkEnabled;if(s||o&&l)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&K("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),await this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const n=new ef(e,Sn.oe);return this.bi(n).next(()=>this.Ci(n))}),this.Ri.close(),this.qi()}xi(e,n){return e.filter(r=>this.Mi(r.updateTimeMs,n)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>Ql(e).U().next(n=>this.xi(n,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,n){return Mc.lt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new vC(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Fc.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,n,r){K("IndexedDbPersistence","Starting transaction:",e);const i=n==="readonly"?"readonly":"readwrite",s=function(u){return u===17?dR:u===16?hR:u===15?Ip:u===14?Zw:u===13?Jw:u===12?cR:u===11?Xw:void ne()}(this.hi);let o;return this.Ri.runTransaction(e,i,s,l=>(o=new ef(l,this.Qr?this.Qr.next():Sn.oe),n==="readwrite-primary"?this.wi(o).next(u=>!!u||this.Si(o)).next(u=>{if(!u)throw Gt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new Z(z.FAILED_PRECONDITION,Qw);return r(o)}).next(u=>this.Di(o).next(()=>u)):this.Ki(o).next(()=>r(o)))).then(l=>(o.raiseOnCommittedEvent(),l))}Ki(e){return Ko(e).get("owner").next(n=>{if(n!==null&&this.Mi(n.leaseTimestampMs,5e3)&&!this.Ni(n.ownerId)&&!this.vi(n)&&!(this.li||this.allowTabSynchronization&&n.allowTabSynchronization))throw new Z(z.FAILED_PRECONDITION,Kh)})}Di(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Ko(e).put("owner",n)}static D(){return Hr.D()}bi(e){const n=Ko(e);return n.get("owner").next(r=>this.vi(r)?(K("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):V.resolve())}Mi(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(Gt(`Detected an update time that is in the future: ${e} > ${r}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();const n=/(?:Version|Mobile)\/1[456]/;Rw()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var n;try{const r=((n=this.Vi)===null||n===void 0?void 0:n.getItem(this.Oi(e)))!==null;return K("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Gt("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){Gt("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Ko(t){return nt(t,"owner")}function Ql(t){return nt(t,"clientMetadata")}function MC(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fp{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=et(),i=et();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Fp(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LC{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GE{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return Rw()?8:Ww(Qu())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new LC;return this.Xi(e,n,o).next(l=>{if(s.result=l,this.zi)return this.es(e,n,o,l.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(ds()<=pe.DEBUG&&K("QueryEngine","SDK will not create cache indexes for query:",Bo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),V.resolve()):(ds()<=pe.DEBUG&&K("QueryEngine","Query:",Bo(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(ds()<=pe.DEBUG&&K("QueryEngine","The SDK decides to create cache indexes for query:",Bo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,nr(n))):V.resolve())}Yi(e,n){if(Qy(n))return V.resolve(null);let r=nr(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=af(n,null,"F"),r=nr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=et(...s);return this.Ji.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(u=>{const h=this.ts(n,l);return this.ns(n,h,o,u.readTime)?this.Yi(e,af(n,null,"F")):this.rs(e,h,n,u)}))})))}Zi(e,n,r,i){return Qy(n)||i.isEqual(me.min())?V.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const o=this.ts(n,s);return this.ns(n,o,r,i)?V.resolve(null):(ds()<=pe.DEBUG&&K("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Bo(n)),this.rs(e,o,n,zP(i,-1)).next(l=>l))})}ts(e,n){let r=new Ae(kR(e));return n.forEach((i,s)=>{Vc(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return ds()<=pe.DEBUG&&K("QueryEngine","Using full collection scan to execute query:",Bo(n)),this.Ji.getDocumentsMatchingQuery(e,n,Zt.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jC{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new Ct(ae),this._s=new si(s=>zi(s),el),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new qE(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function QE(t,e,n,r){return new jC(t,e,n,r)}async function HE(t,e){const n=Se(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],l=[];let u=et();for(const h of i){o.push(h.batchId);for(const f of h.mutations)u=u.add(f.key)}for(const h of s){l.push(h.batchId);for(const f of h.mutations)u=u.add(f.key)}return n.localDocuments.getDocuments(r,u).next(h=>({hs:h,removedBatchIds:o,addedBatchIds:l}))})})}function BC(t,e){const n=Se(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(l,u,h,f){const p=h.batch,g=p.keys();let S=V.resolve();return g.forEach(C=>{S=S.next(()=>f.getEntry(u,C)).next(k=>{const j=h.docVersions.get(C);re(j!==null),k.version.compareTo(j)<0&&(p.applyToRemoteDocument(k,h),k.isValidDocument()&&(k.setReadTime(h.commitVersion),f.addEntry(k)))})}),S.next(()=>l.mutationQueue.removeMutationBatch(u,p))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let u=et();for(let h=0;h<l.mutationResults.length;++h)l.mutationResults[h].transformResults.length>0&&(u=u.add(l.batch.mutations[h].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function UC(t){const e=Se(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function zC(t,e){const n=Se(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}class yv{constructor(){this.activeTargetIds=FR()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class WE{constructor(){this.so=new yv,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new yv,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $C{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vv{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){K("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){K("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hl=null;function Gh(){return Hl===null?Hl=function(){return 268435456+Math.round(2147483648*Math.random())}():Hl++,"0x"+Hl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KC{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _t="WebChannelConnection";class GC extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,o){const l=Gh(),u=this.xo(n,r.toUriEncodedString());K("RestConnection",`Sending RPC '${n}' ${l}:`,u,i);const h={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(h,s,o),this.No(n,u,h,i).then(f=>(K("RestConnection",`Received RPC '${n}' ${l}: `,f),f),f=>{throw Va("RestConnection",`RPC '${n}' ${l} failed with error: `,f,"url: ",u,"request:",i),f})}Lo(n,r,i,s,o,l){return this.Mo(n,r,i,s,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ho}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}xo(n,r){const i=qC[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const s=Gh();return new Promise((o,l)=>{const u=new Lw;u.setWithCredentials(!0),u.listenOnce(jw.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case cu.NO_ERROR:const f=u.getResponseJson();K(_t,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(f)),o(f);break;case cu.TIMEOUT:K(_t,`RPC '${e}' ${s} timed out`),l(new Z(z.DEADLINE_EXCEEDED,"Request time out"));break;case cu.HTTP_ERROR:const p=u.getStatus();if(K(_t,`RPC '${e}' ${s} failed with status:`,p,"response text:",u.getResponseText()),p>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);const S=g==null?void 0:g.error;if(S&&S.status&&S.message){const C=function(j){const A=j.toLowerCase().replace(/_/g,"-");return Object.values(z).indexOf(A)>=0?A:z.UNKNOWN}(S.status);l(new Z(C,S.message))}else l(new Z(z.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new Z(z.UNAVAILABLE,"Connection failed."));break;default:ne()}}finally{K(_t,`RPC '${e}' ${s} completed.`)}});const h=JSON.stringify(i);K(_t,`RPC '${e}' ${s} sending request:`,i),u.send(n,"POST",h,r,15)})}Bo(e,n,r){const i=Gh(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=zw(),l=Uw(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(u.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const f=s.join("");K(_t,`Creating RPC '${e}' stream ${i}: ${f}`,u);const p=o.createWebChannel(f,u);let g=!1,S=!1;const C=new KC({Io:j=>{S?K(_t,`Not sending because RPC '${e}' stream ${i} is closed:`,j):(g||(K(_t,`Opening RPC '${e}' stream ${i} transport.`),p.open(),g=!0),K(_t,`RPC '${e}' stream ${i} sending:`,j),p.send(j))},To:()=>p.close()}),k=(j,A,v)=>{j.listen(A,I=>{try{v(I)}catch(N){setTimeout(()=>{throw N},0)}})};return k(p,Yo.EventType.OPEN,()=>{S||(K(_t,`RPC '${e}' stream ${i} transport opened.`),C.yo())}),k(p,Yo.EventType.CLOSE,()=>{S||(S=!0,K(_t,`RPC '${e}' stream ${i} transport closed`),C.So())}),k(p,Yo.EventType.ERROR,j=>{S||(S=!0,Va(_t,`RPC '${e}' stream ${i} transport errored:`,j),C.So(new Z(z.UNAVAILABLE,"The operation could not be completed")))}),k(p,Yo.EventType.MESSAGE,j=>{var A;if(!S){const v=j.data[0];re(!!v);const I=v,N=I.error||((A=I[0])===null||A===void 0?void 0:A.error);if(N){K(_t,`RPC '${e}' stream ${i} received error:`,N);const L=N.status;let U=function(_){const T=We[_];if(T!==void 0)return KR(T)}(L),w=N.message;U===void 0&&(U=z.INTERNAL,w="Unknown error status: "+L+" with message "+N.message),S=!0,C.So(new Z(U,w)),p.close()}else K(_t,`RPC '${e}' stream ${i} received:`,v),C.bo(v)}}),k(l,Bw.STAT_EVENT,j=>{j.stat===Jd.PROXY?K(_t,`RPC '${e}' stream ${i} detected buffering proxy`):j.stat===Jd.NOPROXY&&K(_t,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{C.wo()},0),C}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QC(){return typeof window<"u"?window:null}function yu(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jc(t){return new WR(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YE{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&K("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HC{constructor(e,n,r,i,s,o,l,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new YE(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===z.RESOURCE_EXHAUSTED?(Gt(n.toString()),Gt("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new Z(z.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return K("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(K("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class WC extends HC{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return re(!!e.streamToken),this.lastStreamToken=e.streamToken,re(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){re(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=tC(e.writeResults,e.commitTime),r=Rn(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=ZR(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>tc(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YC extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new Z(z.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,lf(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Z(z.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Lo(e,lf(n,r),i,o,l,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Z(z.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class XC{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Gt(n),this.D_=!1):K("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JC{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(async()=>{nl(this)&&(K("RemoteStore","Restarting streams for network reachability change."),await async function(u){const h=Se(u);h.L_.add(4),await tl(h),h.q_.set("Unknown"),h.L_.delete(4),await Bc(h)}(this))})}),this.q_=new XC(r,i)}}async function Bc(t){if(nl(t))for(const e of t.B_)await e(!0)}async function tl(t){for(const e of t.B_)await e(!1)}function nl(t){return Se(t).L_.size===0}async function XE(t,e,n){if(!Yi(e))throw e;t.L_.add(1),await tl(t),t.q_.set("Offline"),n||(n=()=>UC(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{K("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Bc(t)})}function JE(t,e){return e().catch(n=>XE(t,n,e))}async function rl(t){const e=Se(t),n=ti(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;ZC(e);)try{const i=await zC(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,ek(e,i)}catch(i){await XE(e,i)}ZE(e)&&e1(e)}function ZC(t){return nl(t)&&t.O_.length<10}function ek(t,e){t.O_.push(e);const n=ti(t);n.r_()&&n.V_&&n.m_(e.mutations)}function ZE(t){return nl(t)&&!ti(t).n_()&&t.O_.length>0}function e1(t){ti(t).start()}async function tk(t){ti(t).p_()}async function nk(t){const e=ti(t);for(const n of t.O_)e.m_(n.mutations)}async function rk(t,e,n){const r=t.O_.shift(),i=Cp.from(r,e,n);await JE(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await rl(t)}async function ik(t,e){e&&ti(t).V_&&await async function(r,i){if(function(o){return qR(o)&&o!==z.ABORTED}(i.code)){const s=r.O_.shift();ti(r).s_(),await JE(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await rl(r)}}(t,e),ZE(t)&&e1(t)}async function _v(t,e){const n=Se(t);n.asyncQueue.verifyOperationInProgress(),K("RemoteStore","RemoteStore received new credentials");const r=nl(n);n.L_.add(3),await tl(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Bc(n)}async function sk(t,e){const n=Se(t);e?(n.L_.delete(2),await Bc(n)):e||(n.L_.add(2),await tl(n),n.q_.set("Unknown"))}function ti(t){return t.U_||(t.U_=function(n,r,i){const s=Se(n);return s.w_(),new WC(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:tk.bind(null,t),mo:ik.bind(null,t),f_:nk.bind(null,t),g_:rk.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await rl(t)):(await t.U_.stop(),t.O_.length>0&&(K("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mp{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Qr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,l=new Mp(e,n,o,i,s);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Z(z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function t1(t,e){if(Gt("AsyncQueue",`${e}: ${t}`),Yi(t))return new Z(z.UNAVAILABLE,`${e}: ${t}`);throw t}class ok{constructor(){this.queries=wv(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=Se(n),s=i.queries;i.queries=wv(),s.forEach((o,l)=>{for(const u of l.j_)u.onError(r)})})(this,new Z(z.ABORTED,"Firestore shutting down"))}}function wv(){return new si(t=>pE(t),fE)}function ak(t){t.Y_.forEach(e=>{e.next()})}var Ev,Iv;(Iv=Ev||(Ev={})).ea="default",Iv.Cache="cache";class lk{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new si(l=>pE(l),fE),this.Ma=new Map,this.xa=new Set,this.Oa=new Ct(J.comparator),this.Na=new Map,this.La=new Np,this.Ba={},this.ka=new Map,this.qa=Ki.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function uk(t,e,n){const r=i1(t);try{const i=await function(o,l){const u=Se(o),h=qe.now(),f=l.reduce((S,C)=>S.add(C.key),et());let p,g;return u.persistence.runTransaction("Locally write mutations","readwrite",S=>{let C=Fr(),k=et();return u.cs.getEntries(S,f).next(j=>{C=j,C.forEach((A,v)=>{v.isValidDocument()||(k=k.add(A))})}).next(()=>u.localDocuments.getOverlayedDocuments(S,C)).next(j=>{p=j;const A=[];for(const v of l){const I=$R(v,p.get(v.key).overlayedDocument);I!=null&&A.push(new oi(v.key,I,iE(I.value.mapValue),Wt.exists(!0)))}return u.mutationQueue.addMutationBatch(S,h,A,l)}).next(j=>{g=j;const A=j.applyToLocalDocumentSet(p,k);return u.documentOverlayCache.saveOverlays(S,j.batchId,A)})}).then(()=>({batchId:g.batchId,changes:gE(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,l,u){let h=o.Ba[o.currentUser.toKey()];h||(h=new Ct(ae)),h=h.insert(l,u),o.Ba[o.currentUser.toKey()]=h}(r,i.batchId,n),await Uc(r,i.changes),await rl(r.remoteStore)}catch(i){const s=t1(i,"Failed to persist write");n.reject(s)}}function Tv(t,e,n){const r=Se(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((s,o)=>{const l=o.view.Z_(e);l.snapshot&&i.push(l.snapshot)}),function(o,l){const u=Se(o);u.onlineState=l;let h=!1;u.queries.forEach((f,p)=>{for(const g of p.j_)g.Z_(l)&&(h=!0)}),h&&ak(u)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function ck(t,e){const n=Se(t),r=e.batch.batchId;try{const i=await BC(n.localStore,e);r1(n,r,null),n1(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Uc(n,i)}catch(i){await Rc(i)}}async function hk(t,e,n){const r=Se(t);try{const i=await function(o,l){const u=Se(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let f;return u.mutationQueue.lookupMutationBatch(h,l).next(p=>(re(p!==null),f=p.keys(),u.mutationQueue.removeMutationBatch(h,p))).next(()=>u.mutationQueue.performConsistencyCheck(h)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(h,f,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,f)).next(()=>u.localDocuments.getDocuments(h,f))})}(r.localStore,e);r1(r,e,n),n1(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Uc(r,i)}catch(i){await Rc(i)}}function n1(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function r1(t,e,n){const r=Se(t);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}async function Uc(t,e,n){const r=Se(t),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((l,u)=>{o.push(r.Ka(u,e,n).then(h=>{var f;if((h||n)&&r.isPrimaryClient){const p=h?!h.fromCache:(f=void 0)===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(h){i.push(h);const p=Fp.Wi(u.targetId,h);s.push(p)}}))}),await Promise.all(o),r.Ca.d_(i),await async function(u,h){const f=Se(u);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>V.forEach(h,g=>V.forEach(g.$i,S=>f.persistence.referenceDelegate.addReference(p,g.targetId,S)).next(()=>V.forEach(g.Ui,S=>f.persistence.referenceDelegate.removeReference(p,g.targetId,S)))))}catch(p){if(!Yi(p))throw p;K("LocalStore","Failed to update sequence numbers: "+p)}for(const p of h){const g=p.targetId;if(!p.fromCache){const S=f.os.get(g),C=S.snapshotVersion,k=S.withLastLimboFreeSnapshotVersion(C);f.os=f.os.insert(g,k)}}}(r.localStore,s))}async function dk(t,e){const n=Se(t);if(!n.currentUser.isEqual(e)){K("SyncEngine","User change. New user:",e.toKey());const r=await HE(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(l=>{l.forEach(u=>{u.reject(new Z(z.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Uc(n,r.hs)}}function i1(t){const e=Se(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=ck.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=hk.bind(null,e),e}class Ua{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=jc(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return QE(this.persistence,new GE,e.initialUser,this.serializer)}Ga(e){return new KE(Lc.Zr,this.serializer)}Wa(e){return new WE}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ua.provider={build:()=>new Ua};class fk extends Ua{constructor(e,n,r){super(),this.Ja=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ja.initialize(this,e),await i1(this.Ja.syncEngine),await rl(this.Ja.remoteStore),await this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}za(e){return QE(this.persistence,new GE,e.initialUser,this.serializer)}ja(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new EC(r,e.asyncQueue,n)}Ha(e,n){const r=new GP(n,this.persistence);return new KP(e.asyncQueue,r)}Ga(e){const n=MC(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Nt.withCacheSize(this.cacheSizeBytes):Nt.DEFAULT;return new Op(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,QC(),yu(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new WE}}class sc{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Tv(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=dk.bind(null,this.syncEngine),await sk(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new ok}()}createDatastore(e){const n=jc(e.databaseInfo.databaseId),r=function(s){return new GC(s)}(e.databaseInfo);return function(s,o,l,u){return new YC(s,o,l,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,l){return new JC(r,i,s,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>Tv(this.syncEngine,n,0),function(){return vv.D()?new vv:new $C}())}createSyncEngine(e,n){return function(i,s,o,l,u,h,f){const p=new lk(i,s,o,l,u,h);return f&&(p.Qa=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=Se(i);K("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await tl(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}sc.provider={build:()=>new sc};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pk{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=ut.UNAUTHENTICATED,this.clientId=qw.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{K("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(K("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Qr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=t1(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Qh(t,e){t.asyncQueue.verifyOperationInProgress(),K("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await HE(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Av(t,e){t.asyncQueue.verifyOperationInProgress();const n=await mk(t);K("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>_v(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>_v(e.remoteStore,i)),t._onlineComponents=e}async function mk(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){K("FirestoreClient","Using user provided OfflineComponentProvider");try{await Qh(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===z.FAILED_PRECONDITION||i.code===z.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Va("Error using user provided cache. Falling back to memory cache: "+n),await Qh(t,new Ua)}}else K("FirestoreClient","Using default OfflineComponentProvider"),await Qh(t,new Ua);return t._offlineComponents}async function gk(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(K("FirestoreClient","Using user provided OnlineComponentProvider"),await Av(t,t._uninitializedComponentsProvider._online)):(K("FirestoreClient","Using default OnlineComponentProvider"),await Av(t,new sc))),t._onlineComponents}function yk(t){return gk(t).then(e=>e.syncEngine)}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s1(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sv=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o1(t,e,n){if(!n)throw new Z(z.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function vk(t,e,n,r){if(e===!0&&r===!0)throw new Z(z.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function xv(t){if(!J.isDocumentKey(t))throw new Z(z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Pv(t){if(J.isDocumentKey(t))throw new Z(z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Lp(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ne()}function jp(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Z(z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Lp(t);throw new Z(z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rv{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Z(z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Z(z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}vk("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=s1((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Z(z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Z(z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Z(z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class zc{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Rv({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Z(z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Z(z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Rv(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new VP;switch(r.type){case"firstParty":return new MP(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Z(z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Sv.get(n);r&&(K("ComponentProvider","Removing Datastore"),Sv.delete(n),r.terminate())}(this),Promise.resolve()}}function _k(t,e,n,r={}){var i;const s=(t=jp(t,zc))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Va("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let l,u;if(typeof r.mockUserToken=="string")l=r.mockUserToken,u=ut.MOCK_USER;else{l=fx(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const h=r.mockUserToken.sub||r.mockUserToken.user_id;if(!h)throw new Z(z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new ut(h)}t._authCredentials=new NP(new $w(l,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bp{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Bp(this.firestore,e,this._query)}}class rr{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Wr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new rr(this.firestore,e,this._key)}}class Wr extends Bp{constructor(e,n,r){super(e,n,dE(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new rr(this.firestore,null,new J(e))}withConverter(e){return new Wr(this.firestore,e,this._path)}}function Up(t,e,...n){if(t=Bi(t),o1("collection","path",e),t instanceof zc){const r=Te.fromString(e,...n);return Pv(r),new Wr(t,null,r)}{if(!(t instanceof rr||t instanceof Wr))throw new Z(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Te.fromString(e,...n));return Pv(r),new Wr(t.firestore,null,r)}}function wk(t,e,...n){if(t=Bi(t),arguments.length===1&&(e=qw.newId()),o1("doc","path",e),t instanceof zc){const r=Te.fromString(e,...n);return xv(r),new rr(t,null,new J(r))}{if(!(t instanceof rr||t instanceof Wr))throw new Z(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Te.fromString(e,...n));return xv(r),new rr(t.firestore,t instanceof Wr?t.converter:null,new J(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cv{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new YE(this,"async_queue_retry"),this.Vu=()=>{const r=yu();r&&K("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=yu();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=yu();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Qr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Yi(e))throw e;K("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(o){let l=o.message||"";return o.stack&&(l=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),l}(r);throw Gt("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=Mp.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&ne()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class zp extends zc{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new Cv,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Cv(e),this._firestoreClient=void 0,await e}}}function Ek(t,e){const n=typeof t=="object"?t:Nw(),r=typeof t=="string"?t:"(default)",i=Ja(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=hx("firestore");s&&_k(i,...s)}return i}function Ik(t){if(t._terminated)throw new Z(z.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||a1(t),t._firestoreClient}function a1(t){var e,n,r;const i=t._freezeSettings(),s=function(l,u,h,f){return new mR(l,u,h,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,s1(f.experimentalLongPollingOptions),f.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new pk(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(t._componentsProvider))}function Tk(t,e){Va("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings();return Ak(t,sc.provider,{build:r=>new fk(r,n.cacheSizeBytes,void 0)}),Promise.resolve()}function Ak(t,e,n){if((t=jp(t,zp))._firestoreClient||t._terminated)throw new Z(z.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new Z(z.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:n},a1(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class za{constructor(e){this._byteString=e}static fromBase64String(e){try{return new za(Ut.fromBase64String(e))}catch(n){throw new Z(z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new za(Ut.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l1{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Z(z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Me(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $p{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u1{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Z(z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Z(z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ae(this._lat,e._lat)||ae(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c1{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sk=/^__.*__$/;class xk{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new oi(e,this.data,this.fieldMask,n,this.fieldTransforms):new fo(e,this.data,n,this.fieldTransforms)}}function h1(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ne()}}class qp{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new qp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return oc(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(h1(this.Cu)&&Sk.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class Pk{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||jc(e)}Qu(e,n,r,i=!1){return new qp({Cu:e,methodName:n,qu:r,path:Me.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Rk(t){const e=t._freezeSettings(),n=jc(t._databaseId);return new Pk(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Ck(t,e,n,r,i,s={}){const o=t.Qu(s.merge||s.mergeFields?2:0,e,n,i);m1("Data must be an object, but it was:",o,r);const l=f1(r,o);let u,h;if(s.merge)u=new dn(o.fieldMask),h=o.fieldTransforms;else if(s.mergeFields){const f=[];for(const p of s.mergeFields){const g=kk(e,p,n);if(!o.contains(g))throw new Z(z.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);Vk(f,g)||f.push(g)}u=new dn(f),h=o.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,h=o.fieldTransforms;return new xk(new Qt(l),u,h)}class Kp extends $p{_toFieldTransform(e){return new TE(e.path,new so)}isEqual(e){return e instanceof Kp}}function d1(t,e){if(p1(t=Bi(t)))return m1("Unsupported field value:",e,t),f1(t,e);if(t instanceof $p)return function(r,i){if(!h1(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const l of r){let u=d1(l,i.Lu(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=Bi(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return MR(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=qe.fromDate(r);return{timestampValue:Ba(i.serializer,s)}}if(r instanceof qe){const s=new qe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ba(i.serializer,s)}}if(r instanceof u1)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof za)return{bytesValue:XR(i.serializer,r._byteString)};if(r instanceof rr){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:bp(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof c1)return function(o,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw l.Bu("VectorValues must only contain numeric values.");return xp(l.serializer,u)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${Lp(r)}`)}(t,e)}function f1(t,e){const n={};return eE(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Za(t,(r,i)=>{const s=d1(i,e.Mu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function p1(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof qe||t instanceof u1||t instanceof za||t instanceof rr||t instanceof $p||t instanceof c1)}function m1(t,e,n){if(!p1(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=Lp(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function kk(t,e,n){if((e=Bi(e))instanceof l1)return e._internalPath;if(typeof e=="string")return Dk(t,e);throw oc("Field path arguments must be of type string or ",t,!1,void 0,n)}const bk=new RegExp("[~\\*/\\[\\]]");function Dk(t,e,n){if(e.search(bk)>=0)throw oc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new l1(...e.split("."))._internalPath}catch{throw oc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function oc(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new Z(z.INVALID_ARGUMENT,l+t+u)}function Vk(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nk(t,e,n){let r;return r=t?t.toFirestore(e):e,r}function Gp(t,e){const n=jp(t.firestore,zp),r=wk(t),i=Nk(t.converter,e);return Ok(n,[Ck(Rk(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Wt.exists(!1))]).then(()=>r)}function Ok(t,e){return function(r,i){const s=new Qr;return r.asyncQueue.enqueueAndForget(async()=>uk(await yk(r),i,s)),s.promise}(Ik(t),e)}function Qp(){return new Kp("serverTimestamp")}(function(e,n=!0){(function(i){ho=i})(EP),Jr(new ur("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),l=new zp(new OP(r.getProvider("auth-internal")),new jP(r.getProvider("app-check-internal")),function(h,f){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new Z(z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new eo(h.options.projectId,f)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),qn(by,"4.7.3",e),qn(by,"4.7.3","esm2017")})();const g1="@firebase/installations",Hp="0.6.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y1=1e4,v1=`w:${Hp}`,_1="FIS_v2",Fk="https://firebaseinstallations.googleapis.com/v1",Mk=60*60*1e3,Lk="installations",jk="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bk={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Gi=new Pc(Lk,jk,Bk);function w1(t){return t instanceof dr&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E1({projectId:t}){return`${Fk}/projects/${t}/installations`}function I1(t){return{token:t.token,requestStatus:2,expiresIn:zk(t.expiresIn),creationTime:Date.now()}}async function T1(t,e){const r=(await e.json()).error;return Gi.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function A1({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function Uk(t,{refreshToken:e}){const n=A1(t);return n.append("Authorization",$k(e)),n}async function S1(t){const e=await t();return e.status>=500&&e.status<600?t():e}function zk(t){return Number(t.replace("s","000"))}function $k(t){return`${_1} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qk({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=E1(t),i=A1(t),s=e.getImmediate({optional:!0});if(s){const h=await s.getHeartbeatsHeader();h&&i.append("x-firebase-client",h)}const o={fid:n,authVersion:_1,appId:t.appId,sdkVersion:v1},l={method:"POST",headers:i,body:JSON.stringify(o)},u=await S1(()=>fetch(r,l));if(u.ok){const h=await u.json();return{fid:h.fid||n,registrationStatus:2,refreshToken:h.refreshToken,authToken:I1(h.authToken)}}else throw await T1("Create Installation",u)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x1(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kk(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gk=/^[cdef][\w-]{21}$/,ff="";function Qk(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=Hk(t);return Gk.test(n)?n:ff}catch{return ff}}function Hk(t){return Kk(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $c(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P1=new Map;function R1(t,e){const n=$c(t);C1(n,e),Wk(n,e)}function C1(t,e){const n=P1.get(t);if(n)for(const r of n)r(e)}function Wk(t,e){const n=Yk();n&&n.postMessage({key:t,fid:e}),Xk()}let Pi=null;function Yk(){return!Pi&&"BroadcastChannel"in self&&(Pi=new BroadcastChannel("[Firebase] FID Change"),Pi.onmessage=t=>{C1(t.data.key,t.data.fid)}),Pi}function Xk(){P1.size===0&&Pi&&(Pi.close(),Pi=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jk="firebase-installations-database",Zk=1,Qi="firebase-installations-store";let Hh=null;function Wp(){return Hh||(Hh=Dw(Jk,Zk,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Qi)}}})),Hh}async function ac(t,e){const n=$c(t),i=(await Wp()).transaction(Qi,"readwrite"),s=i.objectStore(Qi),o=await s.get(n);return await s.put(e,n),await i.done,(!o||o.fid!==e.fid)&&R1(t,e.fid),e}async function k1(t){const e=$c(t),r=(await Wp()).transaction(Qi,"readwrite");await r.objectStore(Qi).delete(e),await r.done}async function qc(t,e){const n=$c(t),i=(await Wp()).transaction(Qi,"readwrite"),s=i.objectStore(Qi),o=await s.get(n),l=e(o);return l===void 0?await s.delete(n):await s.put(l,n),await i.done,l&&(!o||o.fid!==l.fid)&&R1(t,l.fid),l}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yp(t){let e;const n=await qc(t.appConfig,r=>{const i=e2(r),s=t2(t,i);return e=s.registrationPromise,s.installationEntry});return n.fid===ff?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function e2(t){const e=t||{fid:Qk(),registrationStatus:0};return b1(e)}function t2(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(Gi.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=n2(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:r2(t)}:{installationEntry:e}}async function n2(t,e){try{const n=await qk(t,e);return ac(t.appConfig,n)}catch(n){throw w1(n)&&n.customData.serverCode===409?await k1(t.appConfig):await ac(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function r2(t){let e=await kv(t.appConfig);for(;e.registrationStatus===1;)await x1(100),e=await kv(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await Yp(t);return r||n}return e}function kv(t){return qc(t,e=>{if(!e)throw Gi.create("installation-not-found");return b1(e)})}function b1(t){return i2(t)?{fid:t.fid,registrationStatus:0}:t}function i2(t){return t.registrationStatus===1&&t.registrationTime+y1<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function s2({appConfig:t,heartbeatServiceProvider:e},n){const r=o2(t,n),i=Uk(t,n),s=e.getImmediate({optional:!0});if(s){const h=await s.getHeartbeatsHeader();h&&i.append("x-firebase-client",h)}const o={installation:{sdkVersion:v1,appId:t.appId}},l={method:"POST",headers:i,body:JSON.stringify(o)},u=await S1(()=>fetch(r,l));if(u.ok){const h=await u.json();return I1(h)}else throw await T1("Generate Auth Token",u)}function o2(t,{fid:e}){return`${E1(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xp(t,e=!1){let n;const r=await qc(t.appConfig,s=>{if(!D1(s))throw Gi.create("not-registered");const o=s.authToken;if(!e&&u2(o))return s;if(o.requestStatus===1)return n=a2(t,e),s;{if(!navigator.onLine)throw Gi.create("app-offline");const l=h2(s);return n=l2(t,l),l}});return n?await n:r.authToken}async function a2(t,e){let n=await bv(t.appConfig);for(;n.authToken.requestStatus===1;)await x1(100),n=await bv(t.appConfig);const r=n.authToken;return r.requestStatus===0?Xp(t,e):r}function bv(t){return qc(t,e=>{if(!D1(e))throw Gi.create("not-registered");const n=e.authToken;return d2(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function l2(t,e){try{const n=await s2(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await ac(t.appConfig,r),n}catch(n){if(w1(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await k1(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await ac(t.appConfig,r)}throw n}}function D1(t){return t!==void 0&&t.registrationStatus===2}function u2(t){return t.requestStatus===2&&!c2(t)}function c2(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+Mk}function h2(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function d2(t){return t.requestStatus===1&&t.requestTime+y1<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function f2(t){const e=t,{installationEntry:n,registrationPromise:r}=await Yp(e);return r?r.catch(console.error):Xp(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function p2(t,e=!1){const n=t;return await m2(n),(await Xp(n,e)).token}async function m2(t){const{registrationPromise:e}=await Yp(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g2(t){if(!t||!t.options)throw Wh("App Configuration");if(!t.name)throw Wh("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw Wh(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Wh(t){return Gi.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V1="installations",y2="installations-internal",v2=t=>{const e=t.getProvider("app").getImmediate(),n=g2(e),r=Ja(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},_2=t=>{const e=t.getProvider("app").getImmediate(),n=Ja(e,V1).getImmediate();return{getId:()=>f2(n),getToken:i=>p2(n,i)}};function w2(){Jr(new ur(V1,v2,"PUBLIC")),Jr(new ur(y2,_2,"PRIVATE"))}w2();qn(g1,Hp);qn(g1,Hp,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lc="analytics",E2="firebase_id",I2="origin",T2=60*1e3,A2="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Jp="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bt=new gp("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S2={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Xt=new Pc("analytics","Analytics",S2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x2(t){if(!t.startsWith(Jp)){const e=Xt.create("invalid-gtag-resource",{gtagURL:t});return Bt.warn(e.message),""}return t}function N1(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function P2(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function R2(t,e){const n=P2("firebase-js-sdk-policy",{createScriptURL:x2}),r=document.createElement("script"),i=`${Jp}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function C2(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function k2(t,e,n,r,i,s){const o=r[i];try{if(o)await e[o];else{const u=(await N1(n)).find(h=>h.measurementId===i);u&&await e[u.appId]}}catch(l){Bt.error(l)}t("config",i,s)}async function b2(t,e,n,r,i){try{let s=[];if(i&&i.send_to){let o=i.send_to;Array.isArray(o)||(o=[o]);const l=await N1(n);for(const u of o){const h=l.find(p=>p.measurementId===u),f=h&&e[h.appId];if(f)s.push(f);else{s=[];break}}}s.length===0&&(s=Object.values(e)),await Promise.all(s),t("event",r,i||{})}catch(s){Bt.error(s)}}function D2(t,e,n,r){async function i(s,...o){try{if(s==="event"){const[l,u]=o;await b2(t,e,n,l,u)}else if(s==="config"){const[l,u]=o;await k2(t,e,n,r,l,u)}else if(s==="consent"){const[l,u]=o;t("consent",l,u)}else if(s==="get"){const[l,u,h]=o;t("get",l,u,h)}else if(s==="set"){const[l]=o;t("set",l)}else t(s,...o)}catch(l){Bt.error(l)}}return i}function V2(t,e,n,r,i){let s=function(...o){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(s=window[i]),window[i]=D2(s,t,e,n),{gtagCore:s,wrappedGtag:window[i]}}function N2(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(Jp)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O2=30,F2=1e3;class M2{constructor(e={},n=F2){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const O1=new M2;function L2(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function j2(t){var e;const{appId:n,apiKey:r}=t,i={method:"GET",headers:L2(r)},s=A2.replace("{app-id}",n),o=await fetch(s,i);if(o.status!==200&&o.status!==304){let l="";try{const u=await o.json();!((e=u.error)===null||e===void 0)&&e.message&&(l=u.error.message)}catch{}throw Xt.create("config-fetch-failed",{httpStatus:o.status,responseMessage:l})}return o.json()}async function B2(t,e=O1,n){const{appId:r,apiKey:i,measurementId:s}=t.options;if(!r)throw Xt.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw Xt.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},l=new $2;return setTimeout(async()=>{l.abort()},T2),F1({appId:r,apiKey:i,measurementId:s},o,l,e)}async function F1(t,{throttleEndTimeMillis:e,backoffCount:n},r,i=O1){var s;const{appId:o,measurementId:l}=t;try{await U2(r,e)}catch(u){if(l)return Bt.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${u==null?void 0:u.message}]`),{appId:o,measurementId:l};throw u}try{const u=await j2(t);return i.deleteThrottleMetadata(o),u}catch(u){const h=u;if(!z2(h)){if(i.deleteThrottleMetadata(o),l)return Bt.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${h==null?void 0:h.message}]`),{appId:o,measurementId:l};throw u}const f=Number((s=h==null?void 0:h.customData)===null||s===void 0?void 0:s.httpStatus)===503?Ey(n,i.intervalMillis,O2):Ey(n,i.intervalMillis),p={throttleEndTimeMillis:Date.now()+f,backoffCount:n+1};return i.setThrottleMetadata(o,p),Bt.debug(`Calling attemptFetch again in ${f} millis`),F1(t,p,r,i)}}function U2(t,e){return new Promise((n,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(n,i);t.addEventListener(()=>{clearTimeout(s),r(Xt.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function z2(t){if(!(t instanceof dr)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class $2{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function q2(t,e,n,r,i){if(i&&i.global){t("event",n,r);return}else{const s=await e,o=Object.assign(Object.assign({},r),{send_to:s});t("event",n,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function K2(){if(mp())try{await Cw()}catch(t){return Bt.warn(Xt.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return Bt.warn(Xt.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function G2(t,e,n,r,i,s,o){var l;const u=B2(t);u.then(S=>{n[S.measurementId]=S.appId,t.options.measurementId&&S.measurementId!==t.options.measurementId&&Bt.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${S.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(S=>Bt.error(S)),e.push(u);const h=K2().then(S=>{if(S)return r.getId()}),[f,p]=await Promise.all([u,h]);N2(s)||R2(s,f.measurementId),i("js",new Date);const g=(l=o==null?void 0:o.config)!==null&&l!==void 0?l:{};return g[I2]="firebase",g.update=!0,p!=null&&(g[E2]=p),i("config",f.measurementId,g),f.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q2{constructor(e){this.app=e}_delete(){return delete fa[this.app.options.appId],Promise.resolve()}}let fa={},Dv=[];const Vv={};let Yh="dataLayer",H2="gtag",Nv,M1,Ov=!1;function W2(){const t=[];if(mx()&&t.push("This is a browser extension environment."),gx()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,i)=>`(${i+1}) ${r}`).join(" "),n=Xt.create("invalid-analytics-context",{errorInfo:e});Bt.warn(n.message)}}function Y2(t,e,n){W2();const r=t.options.appId;if(!r)throw Xt.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)Bt.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Xt.create("no-api-key");if(fa[r]!=null)throw Xt.create("already-exists",{id:r});if(!Ov){C2(Yh);const{wrappedGtag:s,gtagCore:o}=V2(fa,Dv,Vv,Yh,H2);M1=s,Nv=o,Ov=!0}return fa[r]=G2(t,Dv,Vv,e,Nv,Yh,n),new Q2(t)}function X2(t=Nw()){t=Bi(t);const e=Ja(t,lc);return e.isInitialized()?e.getImmediate():J2(t)}function J2(t,e={}){const n=Ja(t,lc);if(n.isInitialized()){const i=n.getImmediate();if(Hu(e,n.getOptions()))return i;throw Xt.create("already-initialized")}return n.initialize({options:e})}function Z2(t,e,n,r){t=Bi(t),q2(M1,fa[t.app.options.appId],e,n,r).catch(i=>Bt.error(i))}const Fv="@firebase/analytics",Mv="0.10.8";function eb(){Jr(new ur(lc,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return Y2(r,i,n)},"PUBLIC")),Jr(new ur("analytics-internal",t,"PRIVATE")),qn(Fv,Mv),qn(Fv,Mv,"esm2017");function t(e){try{const n=e.getProvider(lc).getImmediate();return{logEvent:(r,i,s)=>Z2(n,r,i,s)}}catch(n){throw Xt.create("interop-component-reg-failed",{reason:n})}}}eb();const tb={apiKey:"AIzaSyAInrHFiyxGmZqxROh8swj4NxB9Xvpo8e8",authDomain:"what-is-my-risk-number-2f147.firebaseapp.com",projectId:"what-is-my-risk-number-2f147",storageBucket:"what-is-my-risk-number-2f147.firebasestorage.app",messagingSenderId:"504205411003",appId:"1:504205411003:web:d85c29c8d1598580b39f9e",measurementId:"G-SGCRJZ9E4H"},L1=Vw(tb),Kc=Ek(L1);typeof window<"u"&&X2(L1);typeof window<"u"&&Tk(Kc).catch(t=>{t.code==="failed-precondition"?console.warn("Multiple tabs open, persistence can only be enabled in one tab at a time."):t.code==="unimplemented"&&console.warn("The current browser does not support persistence.")});async function nb(t){try{return{id:(await Gp(Up(Kc,"profiles"),{...t,createdAt:Qp(),status:"active"})).id}}catch(e){throw console.error("Error submitting profile:",e),vp(e)}}async function rb(t,e){try{return{id:(await Gp(Up(Kc,"assessments"),{profileId:t,answers:e,createdAt:Qp(),status:"completed"})).id}}catch(n){throw console.error("Error submitting answers:",n),vp(n)}}async function ib(t,e){try{return{id:(await Gp(Up(Kc,"contacts"),{profileId:t,...e,createdAt:Qp(),status:"pending"})).id}}catch(n){throw console.error("Error submitting contact info:",n),vp(n)}}const Xh=t=>t instanceof yi?t.message:"An unexpected error occurred. Please try again.";function sb(){const[t,e]=Ve.useState(null),n=Fh({mutationFn:async s=>{try{return await nb(s)}catch(o){throw console.error("Profile mutation error:",o),new Error(Xh(o))}},onSuccess:s=>{e(s.id)}}),r=Fh({mutationFn:async({answers:s})=>{if(!t)throw new Error("Please complete your profile first");try{return await rb(t,s)}catch(o){throw console.error("Answers mutation error:",o),new Error(Xh(o))}}}),i=Fh({mutationFn:async s=>{if(!t)throw new Error("Please complete your profile first");try{return await ib(t,s)}catch(o){throw console.error("Contact mutation error:",o),new Error(Xh(o))}}});return{submitProfile:n.mutateAsync,submitAnswers:r.mutateAsync,submitContact:i.mutateAsync,currentProfileId:t,isLoading:n.isPending||r.isPending||i.isPending,error:n.error||r.error||i.error}}function ob(){const[t,e]=Ve.useState(0),[n,r]=Ve.useState([]),[i,s]=Ve.useState(null),[o,l]=Ve.useState(null),[u,h]=Ve.useState(null),[f,p]=Ve.useState("profile"),{submitProfile:g,submitAnswers:S,submitContact:C,isLoading:k,error:j}=sb(),A=async L=>{const U=[...n,{questionId:Rs[t].id,value:L}];if(r(U),t<Rs.length-1)e(w=>w+1);else{const w=ex(U);s(w),await S({answers:U}),p("contact")}},v=async L=>{l(L),await g(L),p("assessment")},I=async L=>{h(L),await C(L),p("results")},N=()=>{e(0),r([]),s(null),l(null),h(null),p("profile")};return j?D.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:D.jsxs("div",{className:"bg-red-50 text-red-800 rounded-lg p-4 max-w-md w-full",children:[D.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Error"}),D.jsx("p",{className:"text-sm",children:j.message}),D.jsx("button",{onClick:N,className:`mt-4 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 
                     transition-colors duration-200`,children:"Try Again"})]})}):D.jsx("div",{className:"min-h-screen p-4 sm:p-8",children:D.jsxs("div",{className:"max-w-4xl mx-auto",children:[D.jsxs("div",{className:"flex flex-col items-center justify-center mb-6",children:[D.jsx("img",{src:"https://i.iheart.com/v3/re/assets.brands/56421c976594a5e45c5e2b947bf0e508?ops=gravity(%22center%22),maxcontain(96,60)",alt:"News Talk 560 KLVI",className:"h-12 sm:h-16 object-contain mb-2"}),D.jsx("p",{className:"text-navy-600 font-medium text-sm italic text-center px-4",children:"As heard on AM News Talk 560 KLVI"})]}),D.jsx("div",{className:`bg-gradient-to-r from-blue-700 to-blue-500
                      backdrop-blur-xl rounded-t-xl p-4 flex items-center justify-center`,children:D.jsx("h1",{className:"text-xl sm:text-2xl text-white font-semibold tracking-wide text-center",children:"What is My Risk Number?"})}),D.jsx("div",{className:"magical-card rounded-b-xl overflow-hidden",children:D.jsxs("div",{className:"p-4 sm:p-8",children:[D.jsx("div",{className:"flex justify-center mb-8",children:D.jsxs("div",{className:`flex flex-wrap sm:flex-nowrap items-center gap-2 sm:gap-4 
                            text-sm font-medium bg-white/50 backdrop-blur-sm rounded-lg p-2`,children:[D.jsxs("div",{className:`flex items-center gap-2 px-3 py-1.5 rounded-md transition-all
                              ${f==="profile"?"bg-gradient-to-r from-blue-700 to-blue-500 text-white shadow-lg":"text-navy-400"}`,children:[D.jsx(vS,{className:`w-4 h-4 ${f==="profile"?"animate-float":""}`}),D.jsx("span",{className:"hidden sm:inline",children:"Profile"})]}),D.jsx(ly,{className:"w-4 h-4 text-navy-300 hidden sm:block"}),D.jsxs("div",{className:`flex items-center gap-2 px-3 py-1.5 rounded-md transition-all
                              ${f==="assessment"?"bg-gradient-to-r from-blue-600 to-blue-400 text-white shadow-lg":"text-navy-400"}`,children:[D.jsx(gS,{className:`w-4 h-4 ${f==="assessment"?"animate-float":""}`}),D.jsx("span",{className:"hidden sm:inline",children:"Assessment"})]}),D.jsx(ly,{className:"w-4 h-4 text-navy-300 hidden sm:block"}),D.jsxs("div",{className:`flex items-center gap-2 px-3 py-1.5 rounded-md transition-all
                              ${f==="contact"||f==="results"?"bg-gradient-to-r from-blue-700 to-blue-500 text-white shadow-lg":"text-navy-400"}`,children:[D.jsx(wS,{className:`w-4 h-4 ${f==="contact"||f==="results"?"animate-float":""}`}),D.jsx("span",{className:"hidden sm:inline",children:"Results"})]})]})}),D.jsxs("div",{className:"magical-card rounded-xl p-4 sm:p-8",children:[k&&D.jsx("div",{className:"flex items-center justify-center py-12",children:D.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}),!k&&f==="profile"&&D.jsxs("div",{className:"animate-fadeIn",children:[D.jsx("h2",{className:`text-xl sm:text-2xl font-semibold text-transparent bg-clip-text 
                               bg-gradient-to-r from-blue-700 to-blue-500 mb-6`,children:"Your Financial Profile"}),D.jsx(JS,{onSubmit:v})]}),!k&&f==="assessment"&&D.jsxs("div",{className:"animate-fadeIn",children:[D.jsx(xS,{current:t+1,total:Rs.length}),D.jsx(SS,{question:Rs[t],onAnswer:A})]}),!k&&f==="contact"&&i&&D.jsxs("div",{className:"animate-fadeIn",children:[D.jsx("h2",{className:`text-xl sm:text-2xl font-semibold text-transparent bg-clip-text 
                               bg-gradient-to-r from-blue-700 to-blue-500 mb-2 text-center`,children:"Almost There!"}),D.jsx("p",{className:"text-navy-600 text-center mb-8",children:"Please provide your contact information to view your personalized results."}),D.jsx(ZS,{onSubmit:I})]}),!k&&f==="results"&&i&&u&&D.jsxs("div",{className:"animate-fadeIn",children:[D.jsx(RS,{assessment:i,profile:o}),D.jsx("div",{className:"mt-8 text-center",children:D.jsx("button",{onClick:N,className:"magical-button",children:"Start New Assessment"})})]})]})]})})]})})}sw(document.getElementById("root")).render(D.jsx(Ve.StrictMode,{children:D.jsx(AS,{children:D.jsx(dS,{children:D.jsx(ob,{})})})}));
